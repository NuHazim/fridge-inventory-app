(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Ww(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $d={exports:{}},Wu={},qd={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function $w(){if(mv)return Le;mv=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=v&&$[v]||$["@@iterator"],typeof $=="function"?$:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,I={};function S($,re,be){this.props=$,this.context=re,this.refs=I,this.updater=be||_}S.prototype.isReactComponent={},S.prototype.setState=function($,re){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,re,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function D(){}D.prototype=S.prototype;function O($,re,be){this.props=$,this.context=re,this.refs=I,this.updater=be||_}var V=O.prototype=new D;V.constructor=O,E(V,S.prototype),V.isPureReactComponent=!0;var z=Array.isArray,G=Object.prototype.hasOwnProperty,B={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function N($,re,be){var De,Ve={},Be=null,et=null;if(re!=null)for(De in re.ref!==void 0&&(et=re.ref),re.key!==void 0&&(Be=""+re.key),re)G.call(re,De)&&!R.hasOwnProperty(De)&&(Ve[De]=re[De]);var $e=arguments.length-2;if($e===1)Ve.children=be;else if(1<$e){for(var lt=Array($e),Sr=0;Sr<$e;Sr++)lt[Sr]=arguments[Sr+2];Ve.children=lt}if($&&$.defaultProps)for(De in $e=$.defaultProps,$e)Ve[De]===void 0&&(Ve[De]=$e[De]);return{$$typeof:r,type:$,key:Be,ref:et,props:Ve,_owner:B.current}}function k($,re){return{$$typeof:r,type:$.type,key:re,ref:$.ref,props:$.props,_owner:$._owner}}function F($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function U($){var re={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(be){return re[be]})}var H=/\/+/g;function M($,re){return typeof $=="object"&&$!==null&&$.key!=null?U(""+$.key):re.toString(36)}function ke($,re,be,De,Ve){var Be=typeof $;(Be==="undefined"||Be==="boolean")&&($=null);var et=!1;if($===null)et=!0;else switch(Be){case"string":case"number":et=!0;break;case"object":switch($.$$typeof){case r:case e:et=!0}}if(et)return et=$,Ve=Ve(et),$=De===""?"."+M(et,0):De,z(Ve)?(be="",$!=null&&(be=$.replace(H,"$&/")+"/"),ke(Ve,re,be,"",function(Sr){return Sr})):Ve!=null&&(F(Ve)&&(Ve=k(Ve,be+(!Ve.key||et&&et.key===Ve.key?"":(""+Ve.key).replace(H,"$&/")+"/")+$)),re.push(Ve)),1;if(et=0,De=De===""?".":De+":",z($))for(var $e=0;$e<$.length;$e++){Be=$[$e];var lt=De+M(Be,$e);et+=ke(Be,re,be,lt,Ve)}else if(lt=m($),typeof lt=="function")for($=lt.call($),$e=0;!(Be=$.next()).done;)Be=Be.value,lt=De+M(Be,$e++),et+=ke(Be,re,be,lt,Ve);else if(Be==="object")throw re=String($),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return et}function ut($,re,be){if($==null)return $;var De=[],Ve=0;return ke($,De,"","",function(Be){return re.call(be,Be,Ve++)}),De}function bt($){if($._status===-1){var re=$._result;re=re(),re.then(function(be){($._status===0||$._status===-1)&&($._status=1,$._result=be)},function(be){($._status===0||$._status===-1)&&($._status=2,$._result=be)}),$._status===-1&&($._status=0,$._result=re)}if($._status===1)return $._result.default;throw $._result}var at={current:null},le={transition:null},we={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:le,ReactCurrentOwner:B};function de(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:ut,forEach:function($,re,be){ut($,function(){re.apply(this,arguments)},be)},count:function($){var re=0;return ut($,function(){re++}),re},toArray:function($){return ut($,function(re){return re})||[]},only:function($){if(!F($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Le.Component=S,Le.Fragment=t,Le.Profiler=i,Le.PureComponent=O,Le.StrictMode=n,Le.Suspense=c,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Le.act=de,Le.cloneElement=function($,re,be){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var De=E({},$.props),Ve=$.key,Be=$.ref,et=$._owner;if(re!=null){if(re.ref!==void 0&&(Be=re.ref,et=B.current),re.key!==void 0&&(Ve=""+re.key),$.type&&$.type.defaultProps)var $e=$.type.defaultProps;for(lt in re)G.call(re,lt)&&!R.hasOwnProperty(lt)&&(De[lt]=re[lt]===void 0&&$e!==void 0?$e[lt]:re[lt])}var lt=arguments.length-2;if(lt===1)De.children=be;else if(1<lt){$e=Array(lt);for(var Sr=0;Sr<lt;Sr++)$e[Sr]=arguments[Sr+2];De.children=$e}return{$$typeof:r,type:$.type,key:Ve,ref:Be,props:De,_owner:et}},Le.createContext=function($){return $={$$typeof:s,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Le.createElement=N,Le.createFactory=function($){var re=N.bind(null,$);return re.type=$,re},Le.createRef=function(){return{current:null}},Le.forwardRef=function($){return{$$typeof:l,render:$}},Le.isValidElement=F,Le.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:bt}},Le.memo=function($,re){return{$$typeof:h,type:$,compare:re===void 0?null:re}},Le.startTransition=function($){var re=le.transition;le.transition={};try{$()}finally{le.transition=re}},Le.unstable_act=de,Le.useCallback=function($,re){return at.current.useCallback($,re)},Le.useContext=function($){return at.current.useContext($)},Le.useDebugValue=function(){},Le.useDeferredValue=function($){return at.current.useDeferredValue($)},Le.useEffect=function($,re){return at.current.useEffect($,re)},Le.useId=function(){return at.current.useId()},Le.useImperativeHandle=function($,re,be){return at.current.useImperativeHandle($,re,be)},Le.useInsertionEffect=function($,re){return at.current.useInsertionEffect($,re)},Le.useLayoutEffect=function($,re){return at.current.useLayoutEffect($,re)},Le.useMemo=function($,re){return at.current.useMemo($,re)},Le.useReducer=function($,re,be){return at.current.useReducer($,re,be)},Le.useRef=function($){return at.current.useRef($)},Le.useState=function($){return at.current.useState($)},Le.useSyncExternalStore=function($,re,be){return at.current.useSyncExternalStore($,re,be)},Le.useTransition=function(){return at.current.useTransition()},Le.version="18.3.1",Le}var yv;function Xf(){return yv||(yv=1,qd.exports=$w()),qd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function qw(){if(_v)return Wu;_v=1;var r=Xf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(l,c,h){var p,v={},m=null,_=null;h!==void 0&&(m=""+h),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(_=c.ref);for(p in c)n.call(c,p)&&!o.hasOwnProperty(p)&&(v[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)v[p]===void 0&&(v[p]=c[p]);return{$$typeof:e,type:l,key:m,ref:_,props:v,_owner:i.current}}return Wu.Fragment=t,Wu.jsx=s,Wu.jsxs=s,Wu}var xv;function Xw(){return xv||(xv=1,$d.exports=qw()),$d.exports}var T=Xw(),Zc={},Xd={exports:{}},Fr={},Kd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function Kw(){return wv||(wv=1,(function(r){function e(le,we){var de=le.length;le.push(we);e:for(;0<de;){var $=de-1>>>1,re=le[$];if(0<i(re,we))le[$]=we,le[de]=re,de=$;else break e}}function t(le){return le.length===0?null:le[0]}function n(le){if(le.length===0)return null;var we=le[0],de=le.pop();if(de!==we){le[0]=de;e:for(var $=0,re=le.length,be=re>>>1;$<be;){var De=2*($+1)-1,Ve=le[De],Be=De+1,et=le[Be];if(0>i(Ve,de))Be<re&&0>i(et,Ve)?(le[$]=et,le[Be]=de,$=Be):(le[$]=Ve,le[De]=de,$=De);else if(Be<re&&0>i(et,de))le[$]=et,le[Be]=de,$=Be;else break e}}return we}function i(le,we){var de=le.sortIndex-we.sortIndex;return de!==0?de:le.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();r.unstable_now=function(){return s.now()-l}}var c=[],h=[],p=1,v=null,m=3,_=!1,E=!1,I=!1,S=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(le){for(var we=t(h);we!==null;){if(we.callback===null)n(h);else if(we.startTime<=le)n(h),we.sortIndex=we.expirationTime,e(c,we);else break;we=t(h)}}function z(le){if(I=!1,V(le),!E)if(t(c)!==null)E=!0,bt(G);else{var we=t(h);we!==null&&at(z,we.startTime-le)}}function G(le,we){E=!1,I&&(I=!1,D(N),N=-1),_=!0;var de=m;try{for(V(we),v=t(c);v!==null&&(!(v.expirationTime>we)||le&&!U());){var $=v.callback;if(typeof $=="function"){v.callback=null,m=v.priorityLevel;var re=$(v.expirationTime<=we);we=r.unstable_now(),typeof re=="function"?v.callback=re:v===t(c)&&n(c),V(we)}else n(c);v=t(c)}if(v!==null)var be=!0;else{var De=t(h);De!==null&&at(z,De.startTime-we),be=!1}return be}finally{v=null,m=de,_=!1}}var B=!1,R=null,N=-1,k=5,F=-1;function U(){return!(r.unstable_now()-F<k)}function H(){if(R!==null){var le=r.unstable_now();F=le;var we=!0;try{we=R(!0,le)}finally{we?M():(B=!1,R=null)}}else B=!1}var M;if(typeof O=="function")M=function(){O(H)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ut=ke.port2;ke.port1.onmessage=H,M=function(){ut.postMessage(null)}}else M=function(){S(H,0)};function bt(le){R=le,B||(B=!0,M())}function at(le,we){N=S(function(){le(r.unstable_now())},we)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(le){le.callback=null},r.unstable_continueExecution=function(){E||_||(E=!0,bt(G))},r.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<le?Math.floor(1e3/le):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(le){switch(m){case 1:case 2:case 3:var we=3;break;default:we=m}var de=m;m=we;try{return le()}finally{m=de}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(le,we){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var de=m;m=le;try{return we()}finally{m=de}},r.unstable_scheduleCallback=function(le,we,de){var $=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?$+de:$):de=$,le){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=de+re,le={id:p++,callback:we,priorityLevel:le,startTime:de,expirationTime:re,sortIndex:-1},de>$?(le.sortIndex=de,e(h,le),t(c)===null&&le===t(h)&&(I?(D(N),N=-1):I=!0,at(z,de-$))):(le.sortIndex=re,e(c,le),E||_||(E=!0,bt(G))),le},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(le){var we=m;return function(){var de=m;m=we;try{return le.apply(this,arguments)}finally{m=de}}}})(Yd)),Yd}var Ev;function Yw(){return Ev||(Ev=1,Kd.exports=Kw()),Kd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function Qw(){if(Av)return Fr;Av=1;var r=Xf(),e=Yw();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(a,u){s(a,u),s(a+"Capture",u)}function s(a,u){for(i[a]=u,a=0;a<u.length;a++)n.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function m(a){return c.call(v,a)?!0:c.call(p,a)?!1:h.test(a)?v[a]=!0:(p[a]=!0,!1)}function _(a,u,f,g){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,u,f,g){if(u===null||typeof u>"u"||_(a,u,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function I(a,u,f,g,y,x,C){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=g,this.attributeNamespace=y,this.mustUseProperty=f,this.propertyName=a,this.type=u,this.sanitizeURL=x,this.removeEmptyString=C}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new I(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];S[u]=new I(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new I(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new I(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new I(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new I(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new I(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new I(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new I(a,5,!1,a.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(D,O);S[u]=new I(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(D,O);S[u]=new I(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(D,O);S[u]=new I(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new I(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new I(a,1,!1,a.toLowerCase(),null,!0,!0)});function V(a,u,f,g){var y=S.hasOwnProperty(u)?S[u]:null;(y!==null?y.type!==0:g||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(E(u,f,y,g)&&(f=null),g||y===null?m(u)&&(f===null?a.removeAttribute(u):a.setAttribute(u,""+f)):y.mustUseProperty?a[y.propertyName]=f===null?y.type===3?!1:"":f:(u=y.attributeName,g=y.attributeNamespace,f===null?a.removeAttribute(u):(y=y.type,f=y===3||y===4&&f===!0?"":""+f,g?a.setAttributeNS(g,u,f):a.setAttribute(u,f))))}var z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),B=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),bt=Symbol.for("react.lazy"),at=Symbol.for("react.offscreen"),le=Symbol.iterator;function we(a){return a===null||typeof a!="object"?null:(a=le&&a[le]||a["@@iterator"],typeof a=="function"?a:null)}var de=Object.assign,$;function re(a){if($===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);$=u&&u[1]||""}return`
`+$+a}var be=!1;function De(a,u){if(!a||be)return"";be=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Q){var g=Q}Reflect.construct(a,[],u)}else{try{u.call()}catch(Q){g=Q}a.call(u.prototype)}else{try{throw Error()}catch(Q){g=Q}a()}}catch(Q){if(Q&&g&&typeof Q.stack=="string"){for(var y=Q.stack.split(`
`),x=g.stack.split(`
`),C=y.length-1,L=x.length-1;1<=C&&0<=L&&y[C]!==x[L];)L--;for(;1<=C&&0<=L;C--,L--)if(y[C]!==x[L]){if(C!==1||L!==1)do if(C--,L--,0>L||y[C]!==x[L]){var j=`
`+y[C].replace(" at new "," at ");return a.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",a.displayName)),j}while(1<=C&&0<=L);break}}}finally{be=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?re(a):""}function Ve(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=De(a.type,!1),a;case 11:return a=De(a.type.render,!1),a;case 1:return a=De(a.type,!0),a;default:return""}}function Be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case B:return"Portal";case k:return"Profiler";case N:return"StrictMode";case M:return"Suspense";case ke:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case U:return(a.displayName||"Context")+".Consumer";case F:return(a._context.displayName||"Context")+".Provider";case H:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ut:return u=a.displayName||null,u!==null?u:Be(a.type)||"Memo";case bt:u=a._payload,a=a._init;try{return Be(a(u))}catch{}}return null}function et(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(u);case 8:return u===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function $e(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function lt(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Sr(a){var u=lt(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),g=""+a[u];if(!a.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,x=f.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return y.call(this)},set:function(C){g=""+C,x.call(this,C)}}),Object.defineProperty(a,u,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(C){g=""+C},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Ra(a){a._valueTracker||(a._valueTracker=Sr(a))}function Qs(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return a&&(g=lt(a)?a.checked?"true":"false":a.value),a=g,a!==f?(u.setValue(a),!0):!1}function ki(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Na(a,u){var f=u.checked;return de({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function Fl(a,u){var f=u.defaultValue==null?"":u.defaultValue,g=u.checked!=null?u.checked:u.defaultChecked;f=$e(u.value!=null?u.value:f),a._wrapperState={initialChecked:g,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Pa(a,u){u=u.checked,u!=null&&V(a,"checked",u,!1)}function Vo(a,u){Pa(a,u);var f=$e(u.value),g=u.type;if(f!=null)g==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?Dt(a,u.type,f):u.hasOwnProperty("defaultValue")&&Dt(a,u.type,$e(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function Zs(a,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var g=u.type;if(!(g!=="submit"&&g!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,f||u===a.value||(a.value=u),a.defaultValue=u}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Dt(a,u,f){(u!=="number"||ki(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var Rt=Array.isArray;function pn(a,u,f,g){if(a=a.options,u){u={};for(var y=0;y<f.length;y++)u["$"+f[y]]=!0;for(f=0;f<a.length;f++)y=u.hasOwnProperty("$"+a[f].value),a[f].selected!==y&&(a[f].selected=y),y&&g&&(a[f].defaultSelected=!0)}else{for(f=""+$e(f),u=null,y=0;y<a.length;y++){if(a[y].value===f){a[y].selected=!0,g&&(a[y].defaultSelected=!0);return}u!==null||a[y].disabled||(u=a[y])}u!==null&&(u.selected=!0)}}function Js(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function eu(a,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(t(92));if(Rt(f)){if(1<f.length)throw Error(t(93));f=f[0]}u=f}u==null&&(u=""),f=u}a._wrapperState={initialValue:$e(f)}}function Vl(a,u){var f=$e(u.value),g=$e(u.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),u.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),g!=null&&(a.defaultValue=""+g)}function Mi(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function tu(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?tu(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Li,Bl=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,g,y){MSApp.execUnsafeLocalFunction(function(){return a(u,f,g,y)})}:a})(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(Li=Li||document.createElement("div"),Li.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Li.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function Bo(a,u){if(u){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=u;return}}a.textContent=u}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ul=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(a){Ul.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),Fi[u]=Fi[a]})});function Vi(a,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||Fi.hasOwnProperty(a)&&Fi[a]?(""+u).trim():u+"px"}function ba(a,u){a=a.style;for(var f in u)if(u.hasOwnProperty(f)){var g=f.indexOf("--")===0,y=Vi(f,u[f],g);f==="float"&&(f="cssFloat"),g?a.setProperty(f,y):a[f]=y}}var ru=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gn(a,u){if(u){if(ru[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Da(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function ka(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var oi=null,ai=null,St=null;function nu(a){if(a=Pu(a)){if(typeof oi!="function")throw Error(t(280));var u=a.stateNode;u&&(u=dc(u),oi(a.stateNode,a.type,u))}}function Ui(a){ai?St?St.push(a):St=[a]:ai=a}function ji(){if(ai){var a=ai,u=St;if(St=ai=null,nu(a),u)for(a=0;a<u.length;a++)nu(u[a])}}function jl(a,u){return a(u)}function zl(){}var On=!1;function Hl(a,u,f){if(On)return a(u,f);On=!0;try{return jl(a,u,f)}finally{On=!1,(ai!==null||St!==null)&&(zl(),ji())}}function Uo(a,u){var f=a.stateNode;if(f===null)return null;var g=dc(f);if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,u,typeof f));return f}var zi=!1;if(l)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){zi=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{zi=!1}function Gl(a,u,f,g,y,x,C,L,j){var Q=Array.prototype.slice.call(arguments,3);try{u.apply(f,Q)}catch(ie){this.onError(ie)}}var si=!1,bn=null,Ma=!1,Jr=null,Wl={onError:function(a){si=!0,bn=a}};function $l(a,u,f,g,y,x,C,L,j){si=!1,bn=null,Gl.apply(Wl,arguments)}function iu(a,u,f,g,y,x,C,L,j){if($l.apply(this,arguments),si){if(si){var Q=bn;si=!1,bn=null}else throw Error(t(198));Ma||(Ma=!0,Jr=Q)}}function vn(a){var u=a,f=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(f=u.return),a=u.return;while(a)}return u.tag===3?f:null}function ou(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function ql(a){if(vn(a)!==a)throw Error(t(188))}function Xl(a){var u=a.alternate;if(!u){if(u=vn(a),u===null)throw Error(t(188));return u!==a?null:a}for(var f=a,g=u;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(g=y.return,g!==null){f=g;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return ql(y),a;if(x===g)return ql(y),u;x=x.sibling}throw Error(t(188))}if(f.return!==g.return)f=y,g=x;else{for(var C=!1,L=y.child;L;){if(L===f){C=!0,f=y,g=x;break}if(L===g){C=!0,g=y,f=x;break}L=L.sibling}if(!C){for(L=x.child;L;){if(L===f){C=!0,f=x,g=y;break}if(L===g){C=!0,g=x,f=y;break}L=L.sibling}if(!C)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:u}function Kl(a){return a=Xl(a),a!==null?jo(a):null}function jo(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=jo(a);if(u!==null)return u;a=a.sibling}return null}var au=e.unstable_scheduleCallback,La=e.unstable_cancelCallback,zo=e.unstable_shouldYield,ui=e.unstable_requestPaint,gt=e.unstable_now,Ah=e.unstable_getCurrentPriorityLevel,Fa=e.unstable_ImmediatePriority,su=e.unstable_UserBlockingPriority,Ho=e.unstable_NormalPriority,uu=e.unstable_LowPriority,Va=e.unstable_IdlePriority,Go=null,Hr=null;function Yl(a){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(Go,a,void 0,(a.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Wo,Dn=Math.log,en=Math.LN2;function Wo(a){return a>>>=0,a===0?32:31-(Dn(a)/en|0)|0}var kn=64,Gi=4194304;function Qe(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function li(a,u){var f=a.pendingLanes;if(f===0)return 0;var g=0,y=a.suspendedLanes,x=a.pingedLanes,C=f&268435455;if(C!==0){var L=C&~y;L!==0?g=Qe(L):(x&=C,x!==0&&(g=Qe(x)))}else C=f&~y,C!==0?g=Qe(C):x!==0&&(g=Qe(x));if(g===0)return 0;if(u!==0&&u!==g&&(u&y)===0&&(y=g&-g,x=u&-u,y>=x||y===16&&(x&4194240)!==0))return u;if((g&4)!==0&&(g|=f&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=g;0<u;)f=31-Gr(u),y=1<<f,g|=a[f],u&=~y;return g}function $o(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qo(a,u){for(var f=a.suspendedLanes,g=a.pingedLanes,y=a.expirationTimes,x=a.pendingLanes;0<x;){var C=31-Gr(x),L=1<<C,j=y[C];j===-1?((L&f)===0||(L&g)!==0)&&(y[C]=$o(L,u)):j<=u&&(a.expiredLanes|=L),x&=~L}}function lu(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function cu(){var a=kn;return kn<<=1,(kn&4194240)===0&&(kn=64),a}function fu(a){for(var u=[],f=0;31>f;f++)u.push(a);return u}function Xo(a,u,f){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-Gr(u),a[u]=f}function Ih(a,u){var f=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<f;){var y=31-Gr(f),x=1<<y;u[y]=0,g[y]=-1,a[y]=-1,f&=~x}}function hu(a,u){var f=a.entangledLanes|=u;for(a=a.entanglements;f;){var g=31-Gr(f),y=1<<g;y&u|a[g]&u&&(a[g]|=u),f&=~y}}var He=0;function Mn(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var du,Ba,pu,gu,vu,Ln=!1,Ua=[],Fn=null,Vn=null,ir=null,Ko=new Map,ci=new Map,Wr=[],Ql="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wi(a,u){switch(a){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Ko.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(u.pointerId)}}function mn(a,u,f,g,y,x){return a===null||a.nativeEvent!==x?(a={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:x,targetContainers:[y]},u!==null&&(u=Pu(u),u!==null&&Ba(u)),a):(a.eventSystemFlags|=g,u=a.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),a)}function Zl(a,u,f,g,y){switch(u){case"focusin":return Fn=mn(Fn,a,u,f,g,y),!0;case"dragenter":return Vn=mn(Vn,a,u,f,g,y),!0;case"mouseover":return ir=mn(ir,a,u,f,g,y),!0;case"pointerover":var x=y.pointerId;return Ko.set(x,mn(Ko.get(x)||null,a,u,f,g,y)),!0;case"gotpointercapture":return x=y.pointerId,ci.set(x,mn(ci.get(x)||null,a,u,f,g,y)),!0}return!1}function ja(a){var u=Jo(a.target);if(u!==null){var f=vn(u);if(f!==null){if(u=f.tag,u===13){if(u=ou(f),u!==null){a.blockedOn=u,vu(a.priority,function(){pu(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ct(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var f=za(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);Bi=g,f.target.dispatchEvent(g),Bi=null}else return u=Pu(f),u!==null&&Ba(u),a.blockedOn=f,!1;u.shift()}return!0}function Jl(a,u,f){ct(a)&&f.delete(u)}function Ch(){Ln=!1,Fn!==null&&ct(Fn)&&(Fn=null),Vn!==null&&ct(Vn)&&(Vn=null),ir!==null&&ct(ir)&&(ir=null),Ko.forEach(Jl),ci.forEach(Jl)}function $i(a,u){a.blockedOn===u&&(a.blockedOn=null,Ln||(Ln=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ch)))}function qi(a){function u(y){return $i(y,a)}if(0<Ua.length){$i(Ua[0],a);for(var f=1;f<Ua.length;f++){var g=Ua[f];g.blockedOn===a&&(g.blockedOn=null)}}for(Fn!==null&&$i(Fn,a),Vn!==null&&$i(Vn,a),ir!==null&&$i(ir,a),Ko.forEach(u),ci.forEach(u),f=0;f<Wr.length;f++)g=Wr[f],g.blockedOn===a&&(g.blockedOn=null);for(;0<Wr.length&&(f=Wr[0],f.blockedOn===null);)ja(f),f.blockedOn===null&&Wr.shift()}var fi=z.ReactCurrentBatchConfig,hi=!0;function Bn(a,u,f,g){var y=He,x=fi.transition;fi.transition=null;try{He=1,mu(a,u,f,g)}finally{He=y,fi.transition=x}}function ec(a,u,f,g){var y=He,x=fi.transition;fi.transition=null;try{He=4,mu(a,u,f,g)}finally{He=y,fi.transition=x}}function mu(a,u,f,g){if(hi){var y=za(a,u,f,g);if(y===null)Lh(a,u,g,Un,f),Wi(a,g);else if(Zl(y,a,u,f,g))g.stopPropagation();else if(Wi(a,g),u&4&&-1<Ql.indexOf(a)){for(;y!==null;){var x=Pu(y);if(x!==null&&du(x),x=za(a,u,f,g),x===null&&Lh(a,u,g,Un,f),x===y)break;y=x}y!==null&&g.stopPropagation()}else Lh(a,u,g,null,f)}}var Un=null;function za(a,u,f,g){if(Un=null,a=ka(g),a=Jo(a),a!==null)if(u=vn(a),u===null)a=null;else if(f=u.tag,f===13){if(a=ou(u),a!==null)return a;a=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Un=a,null}function Ha(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ah()){case Fa:return 1;case su:return 4;case Ho:case uu:return 16;case Va:return 536870912;default:return 16}default:return 16}}var $r=null,Ga=null,di=null;function tc(){if(di)return di;var a,u=Ga,f=u.length,g,y="value"in $r?$r.value:$r.textContent,x=y.length;for(a=0;a<f&&u[a]===y[a];a++);var C=f-a;for(g=1;g<=C&&u[f-g]===y[x-g];g++);return di=y.slice(a,1<g?1-g:void 0)}function Yo(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function jn(){return!0}function yu(){return!1}function pr(a){function u(f,g,y,x,C){this._reactName=f,this._targetInst=y,this.type=g,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var L in a)a.hasOwnProperty(L)&&(f=a[L],this[L]=f?f(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?jn:yu,this.isPropagationStopped=yu,this}return de(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),u}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=pr(zn),Xi=de({},zn,{view:0,detail:0}),Wa=pr(Xi),$a,qa,qr,Zo=de({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pe,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==qr&&(qr&&a.type==="mousemove"?($a=a.screenX-qr.screenX,qa=a.screenY-qr.screenY):qa=$a=0,qr=a),$a)},movementY:function(a){return"movementY"in a?a.movementY:qa}}),_u=pr(Zo),rc=de({},Zo,{dataTransfer:0}),nc=pr(rc),Xa=de({},Xi,{relatedTarget:0}),or=pr(Xa),ic=de({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),oc=pr(ic),Ki=de({},zn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),d=pr(Ki),w=de({},zn,{data:0}),A=pr(w),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Z[a])?!!u[a]:!1}function Pe(){return se}var Nt=de({},Xi,{key:function(a){if(a.key){var u=P[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Yo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?X[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pe,charCode:function(a){return a.type==="keypress"?Yo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Yo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),nt=pr(Nt),kt=de({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=pr(kt),pi=de({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pe}),Hn=pr(pi),Gn=de({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ka=pr(Gn),xu=de({},Zo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Bx=pr(xu),Ux=[9,13,27,32],Sh=l&&"CompositionEvent"in window,wu=null;l&&"documentMode"in document&&(wu=document.documentMode);var jx=l&&"TextEvent"in window&&!wu,lp=l&&(!Sh||wu&&8<wu&&11>=wu),cp=" ",fp=!1;function hp(a,u){switch(a){case"keyup":return Ux.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dp(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ya=!1;function zx(a,u){switch(a){case"compositionend":return dp(u);case"keypress":return u.which!==32?null:(fp=!0,cp);case"textInput":return a=u.data,a===cp&&fp?null:a;default:return null}}function Hx(a,u){if(Ya)return a==="compositionend"||!Sh&&hp(a,u)?(a=tc(),di=Ga=$r=null,Ya=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return lp&&u.locale!=="ko"?null:u.data;default:return null}}var Gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Gx[a.type]:u==="textarea"}function gp(a,u,f,g){Ui(g),u=cc(u,"onChange"),0<u.length&&(f=new Qo("onChange","change",null,f,g),a.push({event:f,listeners:u}))}var Eu=null,Au=null;function Wx(a){Dp(a,0)}function ac(a){var u=ts(a);if(Qs(u))return a}function $x(a,u){if(a==="change")return u}var vp=!1;if(l){var Th;if(l){var Rh="oninput"in document;if(!Rh){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),Rh=typeof mp.oninput=="function"}Th=Rh}else Th=!1;vp=Th&&(!document.documentMode||9<document.documentMode)}function yp(){Eu&&(Eu.detachEvent("onpropertychange",_p),Au=Eu=null)}function _p(a){if(a.propertyName==="value"&&ac(Au)){var u=[];gp(u,Au,a,ka(a)),Hl(Wx,u)}}function qx(a,u,f){a==="focusin"?(yp(),Eu=u,Au=f,Eu.attachEvent("onpropertychange",_p)):a==="focusout"&&yp()}function Xx(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ac(Au)}function Kx(a,u){if(a==="click")return ac(u)}function Yx(a,u){if(a==="input"||a==="change")return ac(u)}function Qx(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var yn=typeof Object.is=="function"?Object.is:Qx;function Iu(a,u){if(yn(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var f=Object.keys(a),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var y=f[g];if(!c.call(u,y)||!yn(a[y],u[y]))return!1}return!0}function xp(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function wp(a,u){var f=xp(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=u&&g>=u)return{node:f,offset:u-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=xp(f)}}function Ep(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?Ep(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Ap(){for(var a=window,u=ki();u instanceof a.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)a=u.contentWindow;else break;u=ki(a.document)}return u}function Nh(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function Zx(a){var u=Ap(),f=a.focusedElem,g=a.selectionRange;if(u!==f&&f&&f.ownerDocument&&Ep(f.ownerDocument.documentElement,f)){if(g!==null&&Nh(f)){if(u=g.start,a=g.end,a===void 0&&(a=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(a,f.value.length);else if(a=(u=f.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var y=f.textContent.length,x=Math.min(g.start,y);g=g.end===void 0?x:Math.min(g.end,y),!a.extend&&x>g&&(y=g,g=x,x=y),y=wp(f,x);var C=wp(f,g);y&&C&&(a.rangeCount!==1||a.anchorNode!==y.node||a.anchorOffset!==y.offset||a.focusNode!==C.node||a.focusOffset!==C.offset)&&(u=u.createRange(),u.setStart(y.node,y.offset),a.removeAllRanges(),x>g?(a.addRange(u),a.extend(C.node,C.offset)):(u.setEnd(C.node,C.offset),a.addRange(u)))}}for(u=[],a=f;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)a=u[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Jx=l&&"documentMode"in document&&11>=document.documentMode,Qa=null,Ph=null,Cu=null,Oh=!1;function Ip(a,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Oh||Qa==null||Qa!==ki(g)||(g=Qa,"selectionStart"in g&&Nh(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Cu&&Iu(Cu,g)||(Cu=g,g=cc(Ph,"onSelect"),0<g.length&&(u=new Qo("onSelect","select",null,u,f),a.push({event:u,listeners:g}),u.target=Qa)))}function sc(a,u){var f={};return f[a.toLowerCase()]=u.toLowerCase(),f["Webkit"+a]="webkit"+u,f["Moz"+a]="moz"+u,f}var Za={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},bh={},Cp={};l&&(Cp=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function uc(a){if(bh[a])return bh[a];if(!Za[a])return a;var u=Za[a],f;for(f in u)if(u.hasOwnProperty(f)&&f in Cp)return bh[a]=u[f];return a}var Sp=uc("animationend"),Tp=uc("animationiteration"),Rp=uc("animationstart"),Np=uc("transitionend"),Pp=new Map,Op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(a,u){Pp.set(a,u),o(u,[a])}for(var Dh=0;Dh<Op.length;Dh++){var kh=Op[Dh],ew=kh.toLowerCase(),tw=kh[0].toUpperCase()+kh.slice(1);Yi(ew,"on"+tw)}Yi(Sp,"onAnimationEnd"),Yi(Tp,"onAnimationIteration"),Yi(Rp,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(Np,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function bp(a,u,f){var g=a.type||"unknown-event";a.currentTarget=f,iu(g,u,void 0,a),a.currentTarget=null}function Dp(a,u){u=(u&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],y=g.event;g=g.listeners;e:{var x=void 0;if(u)for(var C=g.length-1;0<=C;C--){var L=g[C],j=L.instance,Q=L.currentTarget;if(L=L.listener,j!==x&&y.isPropagationStopped())break e;bp(y,L,Q),x=j}else for(C=0;C<g.length;C++){if(L=g[C],j=L.instance,Q=L.currentTarget,L=L.listener,j!==x&&y.isPropagationStopped())break e;bp(y,L,Q),x=j}}}if(Ma)throw a=Jr,Ma=!1,Jr=null,a}function vt(a,u){var f=u[zh];f===void 0&&(f=u[zh]=new Set);var g=a+"__bubble";f.has(g)||(kp(u,a,2,!1),f.add(g))}function Mh(a,u,f){var g=0;u&&(g|=4),kp(f,a,g,u)}var lc="_reactListening"+Math.random().toString(36).slice(2);function Tu(a){if(!a[lc]){a[lc]=!0,n.forEach(function(f){f!=="selectionchange"&&(rw.has(f)||Mh(f,!1,a),Mh(f,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[lc]||(u[lc]=!0,Mh("selectionchange",!1,u))}}function kp(a,u,f,g){switch(Ha(u)){case 1:var y=Bn;break;case 4:y=ec;break;default:y=mu}f=y.bind(null,u,f,a),y=void 0,!zi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),g?y!==void 0?a.addEventListener(u,f,{capture:!0,passive:y}):a.addEventListener(u,f,!0):y!==void 0?a.addEventListener(u,f,{passive:y}):a.addEventListener(u,f,!1)}function Lh(a,u,f,g,y){var x=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var C=g.tag;if(C===3||C===4){var L=g.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(C===4)for(C=g.return;C!==null;){var j=C.tag;if((j===3||j===4)&&(j=C.stateNode.containerInfo,j===y||j.nodeType===8&&j.parentNode===y))return;C=C.return}for(;L!==null;){if(C=Jo(L),C===null)return;if(j=C.tag,j===5||j===6){g=x=C;continue e}L=L.parentNode}}g=g.return}Hl(function(){var Q=x,ie=ka(f),oe=[];e:{var ne=Pp.get(a);if(ne!==void 0){var fe=Qo,ge=a;switch(a){case"keypress":if(Yo(f)===0)break e;case"keydown":case"keyup":fe=nt;break;case"focusin":ge="focus",fe=or;break;case"focusout":ge="blur",fe=or;break;case"beforeblur":case"afterblur":fe=or;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Hn;break;case Sp:case Tp:case Rp:fe=oc;break;case Np:fe=Ka;break;case"scroll":fe=Wa;break;case"wheel":fe=Bx;break;case"copy":case"cut":case"paste":fe=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Xr}var ve=(u&4)!==0,Pt=!ve&&a==="scroll",q=ve?ne!==null?ne+"Capture":null:ne;ve=[];for(var W=Q,Y;W!==null;){Y=W;var ae=Y.stateNode;if(Y.tag===5&&ae!==null&&(Y=ae,q!==null&&(ae=Uo(W,q),ae!=null&&ve.push(Ru(W,ae,Y)))),Pt)break;W=W.return}0<ve.length&&(ne=new fe(ne,ge,null,f,ie),oe.push({event:ne,listeners:ve}))}}if((u&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",fe=a==="mouseout"||a==="pointerout",ne&&f!==Bi&&(ge=f.relatedTarget||f.fromElement)&&(Jo(ge)||ge[gi]))break e;if((fe||ne)&&(ne=ie.window===ie?ie:(ne=ie.ownerDocument)?ne.defaultView||ne.parentWindow:window,fe?(ge=f.relatedTarget||f.toElement,fe=Q,ge=ge?Jo(ge):null,ge!==null&&(Pt=vn(ge),ge!==Pt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=Q),fe!==ge)){if(ve=_u,ae="onMouseLeave",q="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(ve=Xr,ae="onPointerLeave",q="onPointerEnter",W="pointer"),Pt=fe==null?ne:ts(fe),Y=ge==null?ne:ts(ge),ne=new ve(ae,W+"leave",fe,f,ie),ne.target=Pt,ne.relatedTarget=Y,ae=null,Jo(ie)===Q&&(ve=new ve(q,W+"enter",ge,f,ie),ve.target=Y,ve.relatedTarget=Pt,ae=ve),Pt=ae,fe&&ge)t:{for(ve=fe,q=ge,W=0,Y=ve;Y;Y=Ja(Y))W++;for(Y=0,ae=q;ae;ae=Ja(ae))Y++;for(;0<W-Y;)ve=Ja(ve),W--;for(;0<Y-W;)q=Ja(q),Y--;for(;W--;){if(ve===q||q!==null&&ve===q.alternate)break t;ve=Ja(ve),q=Ja(q)}ve=null}else ve=null;fe!==null&&Mp(oe,ne,fe,ve,!1),ge!==null&&Pt!==null&&Mp(oe,Pt,ge,ve,!0)}}e:{if(ne=Q?ts(Q):window,fe=ne.nodeName&&ne.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ne.type==="file")var ye=$x;else if(pp(ne))if(vp)ye=Yx;else{ye=Xx;var Ae=qx}else(fe=ne.nodeName)&&fe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(ye=Kx);if(ye&&(ye=ye(a,Q))){gp(oe,ye,f,ie);break e}Ae&&Ae(a,ne,Q),a==="focusout"&&(Ae=ne._wrapperState)&&Ae.controlled&&ne.type==="number"&&Dt(ne,"number",ne.value)}switch(Ae=Q?ts(Q):window,a){case"focusin":(pp(Ae)||Ae.contentEditable==="true")&&(Qa=Ae,Ph=Q,Cu=null);break;case"focusout":Cu=Ph=Qa=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,Ip(oe,f,ie);break;case"selectionchange":if(Jx)break;case"keydown":case"keyup":Ip(oe,f,ie)}var Ie;if(Sh)e:{switch(a){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ya?hp(a,f)&&(Re="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Re="onCompositionStart");Re&&(lp&&f.locale!=="ko"&&(Ya||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ya&&(Ie=tc()):($r=ie,Ga="value"in $r?$r.value:$r.textContent,Ya=!0)),Ae=cc(Q,Re),0<Ae.length&&(Re=new A(Re,a,null,f,ie),oe.push({event:Re,listeners:Ae}),Ie?Re.data=Ie:(Ie=dp(f),Ie!==null&&(Re.data=Ie)))),(Ie=jx?zx(a,f):Hx(a,f))&&(Q=cc(Q,"onBeforeInput"),0<Q.length&&(ie=new A("onBeforeInput","beforeinput",null,f,ie),oe.push({event:ie,listeners:Q}),ie.data=Ie))}Dp(oe,u)})}function Ru(a,u,f){return{instance:a,listener:u,currentTarget:f}}function cc(a,u){for(var f=u+"Capture",g=[];a!==null;){var y=a,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=Uo(a,f),x!=null&&g.unshift(Ru(a,x,y)),x=Uo(a,u),x!=null&&g.push(Ru(a,x,y))),a=a.return}return g}function Ja(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Mp(a,u,f,g,y){for(var x=u._reactName,C=[];f!==null&&f!==g;){var L=f,j=L.alternate,Q=L.stateNode;if(j!==null&&j===g)break;L.tag===5&&Q!==null&&(L=Q,y?(j=Uo(f,x),j!=null&&C.unshift(Ru(f,j,L))):y||(j=Uo(f,x),j!=null&&C.push(Ru(f,j,L)))),f=f.return}C.length!==0&&a.push({event:u,listeners:C})}var nw=/\r\n?/g,iw=/\u0000|\uFFFD/g;function Lp(a){return(typeof a=="string"?a:""+a).replace(nw,`
`).replace(iw,"")}function fc(a,u,f){if(u=Lp(u),Lp(a)!==u&&f)throw Error(t(425))}function hc(){}var Fh=null,Vh=null;function Bh(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Uh=typeof setTimeout=="function"?setTimeout:void 0,ow=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(a){return Fp.resolve(null).then(a).catch(sw)}:Uh;function sw(a){setTimeout(function(){throw a})}function jh(a,u){var f=u,g=0;do{var y=f.nextSibling;if(a.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"){if(g===0){a.removeChild(y),qi(u);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=y}while(f);qi(u)}function Qi(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function Vp(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return a;u--}else f==="/$"&&u++}a=a.previousSibling}return null}var es=Math.random().toString(36).slice(2),Wn="__reactFiber$"+es,Nu="__reactProps$"+es,gi="__reactContainer$"+es,zh="__reactEvents$"+es,uw="__reactListeners$"+es,lw="__reactHandles$"+es;function Jo(a){var u=a[Wn];if(u)return u;for(var f=a.parentNode;f;){if(u=f[gi]||f[Wn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(a=Vp(a);a!==null;){if(f=a[Wn])return f;a=Vp(a)}return u}a=f,f=a.parentNode}return null}function Pu(a){return a=a[Wn]||a[gi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ts(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function dc(a){return a[Nu]||null}var Hh=[],rs=-1;function Zi(a){return{current:a}}function mt(a){0>rs||(a.current=Hh[rs],Hh[rs]=null,rs--)}function ft(a,u){rs++,Hh[rs]=a.current,a.current=u}var Ji={},gr=Zi(Ji),br=Zi(!1),ea=Ji;function ns(a,u){var f=a.type.contextTypes;if(!f)return Ji;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in f)y[x]=u[x];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=y),y}function Dr(a){return a=a.childContextTypes,a!=null}function pc(){mt(br),mt(gr)}function Bp(a,u,f){if(gr.current!==Ji)throw Error(t(168));ft(gr,u),ft(br,f)}function Up(a,u,f){var g=a.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var y in g)if(!(y in u))throw Error(t(108,et(a)||"Unknown",y));return de({},f,g)}function gc(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ji,ea=gr.current,ft(gr,a),ft(br,br.current),!0}function jp(a,u,f){var g=a.stateNode;if(!g)throw Error(t(169));f?(a=Up(a,u,ea),g.__reactInternalMemoizedMergedChildContext=a,mt(br),mt(gr),ft(gr,a)):mt(br),ft(br,f)}var vi=null,vc=!1,Gh=!1;function zp(a){vi===null?vi=[a]:vi.push(a)}function cw(a){vc=!0,zp(a)}function eo(){if(!Gh&&vi!==null){Gh=!0;var a=0,u=He;try{var f=vi;for(He=1;a<f.length;a++){var g=f[a];do g=g(!0);while(g!==null)}vi=null,vc=!1}catch(y){throw vi!==null&&(vi=vi.slice(a+1)),au(Fa,eo),y}finally{He=u,Gh=!1}}return null}var is=[],os=0,mc=null,yc=0,tn=[],rn=0,ta=null,mi=1,yi="";function ra(a,u){is[os++]=yc,is[os++]=mc,mc=a,yc=u}function Hp(a,u,f){tn[rn++]=mi,tn[rn++]=yi,tn[rn++]=ta,ta=a;var g=mi;a=yi;var y=32-Gr(g)-1;g&=~(1<<y),f+=1;var x=32-Gr(u)+y;if(30<x){var C=y-y%5;x=(g&(1<<C)-1).toString(32),g>>=C,y-=C,mi=1<<32-Gr(u)+y|f<<y|g,yi=x+a}else mi=1<<x|f<<y|g,yi=a}function Wh(a){a.return!==null&&(ra(a,1),Hp(a,1,0))}function $h(a){for(;a===mc;)mc=is[--os],is[os]=null,yc=is[--os],is[os]=null;for(;a===ta;)ta=tn[--rn],tn[rn]=null,yi=tn[--rn],tn[rn]=null,mi=tn[--rn],tn[rn]=null}var Kr=null,Yr=null,wt=!1,_n=null;function Gp(a,u){var f=sn(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=a,u=a.deletions,u===null?(a.deletions=[f],a.flags|=16):u.push(f)}function Wp(a,u){switch(a.tag){case 5:var f=a.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,Kr=a,Yr=Qi(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,Kr=a,Yr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=ta!==null?{id:mi,overflow:yi}:null,a.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=sn(18,null,null,0),f.stateNode=u,f.return=a,a.child=f,Kr=a,Yr=null,!0):!1;default:return!1}}function qh(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Xh(a){if(wt){var u=Yr;if(u){var f=u;if(!Wp(a,u)){if(qh(a))throw Error(t(418));u=Qi(f.nextSibling);var g=Kr;u&&Wp(a,u)?Gp(g,f):(a.flags=a.flags&-4097|2,wt=!1,Kr=a)}}else{if(qh(a))throw Error(t(418));a.flags=a.flags&-4097|2,wt=!1,Kr=a}}}function $p(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Kr=a}function _c(a){if(a!==Kr)return!1;if(!wt)return $p(a),wt=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!Bh(a.type,a.memoizedProps)),u&&(u=Yr)){if(qh(a))throw qp(),Error(t(418));for(;u;)Gp(a,u),u=Qi(u.nextSibling)}if($p(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(u===0){Yr=Qi(a.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}a=a.nextSibling}Yr=null}}else Yr=Kr?Qi(a.stateNode.nextSibling):null;return!0}function qp(){for(var a=Yr;a;)a=Qi(a.nextSibling)}function as(){Yr=Kr=null,wt=!1}function Kh(a){_n===null?_n=[a]:_n.push(a)}var fw=z.ReactCurrentBatchConfig;function Ou(a,u,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,a));var y=g,x=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===x?u.ref:(u=function(C){var L=y.refs;C===null?delete L[x]:L[x]=C},u._stringRef=x,u)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function xc(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function Xp(a){var u=a._init;return u(a._payload)}function Kp(a){function u(q,W){if(a){var Y=q.deletions;Y===null?(q.deletions=[W],q.flags|=16):Y.push(W)}}function f(q,W){if(!a)return null;for(;W!==null;)u(q,W),W=W.sibling;return null}function g(q,W){for(q=new Map;W!==null;)W.key!==null?q.set(W.key,W):q.set(W.index,W),W=W.sibling;return q}function y(q,W){return q=uo(q,W),q.index=0,q.sibling=null,q}function x(q,W,Y){return q.index=Y,a?(Y=q.alternate,Y!==null?(Y=Y.index,Y<W?(q.flags|=2,W):Y):(q.flags|=2,W)):(q.flags|=1048576,W)}function C(q){return a&&q.alternate===null&&(q.flags|=2),q}function L(q,W,Y,ae){return W===null||W.tag!==6?(W=Ud(Y,q.mode,ae),W.return=q,W):(W=y(W,Y),W.return=q,W)}function j(q,W,Y,ae){var ye=Y.type;return ye===R?ie(q,W,Y.props.children,ae,Y.key):W!==null&&(W.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===bt&&Xp(ye)===W.type)?(ae=y(W,Y.props),ae.ref=Ou(q,W,Y),ae.return=q,ae):(ae=Gc(Y.type,Y.key,Y.props,null,q.mode,ae),ae.ref=Ou(q,W,Y),ae.return=q,ae)}function Q(q,W,Y,ae){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=jd(Y,q.mode,ae),W.return=q,W):(W=y(W,Y.children||[]),W.return=q,W)}function ie(q,W,Y,ae,ye){return W===null||W.tag!==7?(W=ca(Y,q.mode,ae,ye),W.return=q,W):(W=y(W,Y),W.return=q,W)}function oe(q,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Ud(""+W,q.mode,Y),W.return=q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case G:return Y=Gc(W.type,W.key,W.props,null,q.mode,Y),Y.ref=Ou(q,null,W),Y.return=q,Y;case B:return W=jd(W,q.mode,Y),W.return=q,W;case bt:var ae=W._init;return oe(q,ae(W._payload),Y)}if(Rt(W)||we(W))return W=ca(W,q.mode,Y,null),W.return=q,W;xc(q,W)}return null}function ne(q,W,Y,ae){var ye=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ye!==null?null:L(q,W,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:return Y.key===ye?j(q,W,Y,ae):null;case B:return Y.key===ye?Q(q,W,Y,ae):null;case bt:return ye=Y._init,ne(q,W,ye(Y._payload),ae)}if(Rt(Y)||we(Y))return ye!==null?null:ie(q,W,Y,ae,null);xc(q,Y)}return null}function fe(q,W,Y,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(Y)||null,L(W,q,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case G:return q=q.get(ae.key===null?Y:ae.key)||null,j(W,q,ae,ye);case B:return q=q.get(ae.key===null?Y:ae.key)||null,Q(W,q,ae,ye);case bt:var Ae=ae._init;return fe(q,W,Y,Ae(ae._payload),ye)}if(Rt(ae)||we(ae))return q=q.get(Y)||null,ie(W,q,ae,ye,null);xc(W,ae)}return null}function ge(q,W,Y,ae){for(var ye=null,Ae=null,Ie=W,Re=W=0,Zt=null;Ie!==null&&Re<Y.length;Re++){Ie.index>Re?(Zt=Ie,Ie=null):Zt=Ie.sibling;var Ke=ne(q,Ie,Y[Re],ae);if(Ke===null){Ie===null&&(Ie=Zt);break}a&&Ie&&Ke.alternate===null&&u(q,Ie),W=x(Ke,W,Re),Ae===null?ye=Ke:Ae.sibling=Ke,Ae=Ke,Ie=Zt}if(Re===Y.length)return f(q,Ie),wt&&ra(q,Re),ye;if(Ie===null){for(;Re<Y.length;Re++)Ie=oe(q,Y[Re],ae),Ie!==null&&(W=x(Ie,W,Re),Ae===null?ye=Ie:Ae.sibling=Ie,Ae=Ie);return wt&&ra(q,Re),ye}for(Ie=g(q,Ie);Re<Y.length;Re++)Zt=fe(Ie,q,Re,Y[Re],ae),Zt!==null&&(a&&Zt.alternate!==null&&Ie.delete(Zt.key===null?Re:Zt.key),W=x(Zt,W,Re),Ae===null?ye=Zt:Ae.sibling=Zt,Ae=Zt);return a&&Ie.forEach(function(lo){return u(q,lo)}),wt&&ra(q,Re),ye}function ve(q,W,Y,ae){var ye=we(Y);if(typeof ye!="function")throw Error(t(150));if(Y=ye.call(Y),Y==null)throw Error(t(151));for(var Ae=ye=null,Ie=W,Re=W=0,Zt=null,Ke=Y.next();Ie!==null&&!Ke.done;Re++,Ke=Y.next()){Ie.index>Re?(Zt=Ie,Ie=null):Zt=Ie.sibling;var lo=ne(q,Ie,Ke.value,ae);if(lo===null){Ie===null&&(Ie=Zt);break}a&&Ie&&lo.alternate===null&&u(q,Ie),W=x(lo,W,Re),Ae===null?ye=lo:Ae.sibling=lo,Ae=lo,Ie=Zt}if(Ke.done)return f(q,Ie),wt&&ra(q,Re),ye;if(Ie===null){for(;!Ke.done;Re++,Ke=Y.next())Ke=oe(q,Ke.value,ae),Ke!==null&&(W=x(Ke,W,Re),Ae===null?ye=Ke:Ae.sibling=Ke,Ae=Ke);return wt&&ra(q,Re),ye}for(Ie=g(q,Ie);!Ke.done;Re++,Ke=Y.next())Ke=fe(Ie,q,Re,Ke.value,ae),Ke!==null&&(a&&Ke.alternate!==null&&Ie.delete(Ke.key===null?Re:Ke.key),W=x(Ke,W,Re),Ae===null?ye=Ke:Ae.sibling=Ke,Ae=Ke);return a&&Ie.forEach(function(Gw){return u(q,Gw)}),wt&&ra(q,Re),ye}function Pt(q,W,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:e:{for(var ye=Y.key,Ae=W;Ae!==null;){if(Ae.key===ye){if(ye=Y.type,ye===R){if(Ae.tag===7){f(q,Ae.sibling),W=y(Ae,Y.props.children),W.return=q,q=W;break e}}else if(Ae.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===bt&&Xp(ye)===Ae.type){f(q,Ae.sibling),W=y(Ae,Y.props),W.ref=Ou(q,Ae,Y),W.return=q,q=W;break e}f(q,Ae);break}else u(q,Ae);Ae=Ae.sibling}Y.type===R?(W=ca(Y.props.children,q.mode,ae,Y.key),W.return=q,q=W):(ae=Gc(Y.type,Y.key,Y.props,null,q.mode,ae),ae.ref=Ou(q,W,Y),ae.return=q,q=ae)}return C(q);case B:e:{for(Ae=Y.key;W!==null;){if(W.key===Ae)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){f(q,W.sibling),W=y(W,Y.children||[]),W.return=q,q=W;break e}else{f(q,W);break}else u(q,W);W=W.sibling}W=jd(Y,q.mode,ae),W.return=q,q=W}return C(q);case bt:return Ae=Y._init,Pt(q,W,Ae(Y._payload),ae)}if(Rt(Y))return ge(q,W,Y,ae);if(we(Y))return ve(q,W,Y,ae);xc(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(f(q,W.sibling),W=y(W,Y),W.return=q,q=W):(f(q,W),W=Ud(Y,q.mode,ae),W.return=q,q=W),C(q)):f(q,W)}return Pt}var ss=Kp(!0),Yp=Kp(!1),wc=Zi(null),Ec=null,us=null,Yh=null;function Qh(){Yh=us=Ec=null}function Zh(a){var u=wc.current;mt(wc),a._currentValue=u}function Jh(a,u,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),a===f)break;a=a.return}}function ls(a,u){Ec=a,Yh=us=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(kr=!0),a.firstContext=null)}function nn(a){var u=a._currentValue;if(Yh!==a)if(a={context:a,memoizedValue:u,next:null},us===null){if(Ec===null)throw Error(t(308));us=a,Ec.dependencies={lanes:0,firstContext:a}}else us=us.next=a;return u}var na=null;function ed(a){na===null?na=[a]:na.push(a)}function Qp(a,u,f,g){var y=u.interleaved;return y===null?(f.next=f,ed(u)):(f.next=y.next,y.next=f),u.interleaved=f,_i(a,g)}function _i(a,u){a.lanes|=u;var f=a.alternate;for(f!==null&&(f.lanes|=u),f=a,a=a.return;a!==null;)a.childLanes|=u,f=a.alternate,f!==null&&(f.childLanes|=u),f=a,a=a.return;return f.tag===3?f.stateNode:null}var to=!1;function td(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zp(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function xi(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function ro(a,u,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(qe&2)!==0){var y=g.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),g.pending=u,_i(a,f)}return y=g.interleaved,y===null?(u.next=u,ed(g)):(u.next=y.next,y.next=u),g.interleaved=u,_i(a,f)}function Ac(a,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var g=u.lanes;g&=a.pendingLanes,f|=g,u.lanes=f,hu(a,f)}}function Jp(a,u){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var C={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};x===null?y=x=C:x=x.next=C,f=f.next}while(f!==null);x===null?y=x=u:x=x.next=u}else y=x=u;f={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:g.shared,effects:g.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=u}function Ic(a,u,f,g){var y=a.updateQueue;to=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var j=L,Q=j.next;j.next=null,C===null?x=Q:C.next=Q,C=j;var ie=a.alternate;ie!==null&&(ie=ie.updateQueue,L=ie.lastBaseUpdate,L!==C&&(L===null?ie.firstBaseUpdate=Q:L.next=Q,ie.lastBaseUpdate=j))}if(x!==null){var oe=y.baseState;C=0,ie=Q=j=null,L=x;do{var ne=L.lane,fe=L.eventTime;if((g&ne)===ne){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var ge=a,ve=L;switch(ne=u,fe=f,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){oe=ge.call(fe,oe,ne);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,ne=typeof ge=="function"?ge.call(fe,oe,ne):ge,ne==null)break e;oe=de({},oe,ne);break e;case 2:to=!0}}L.callback!==null&&L.lane!==0&&(a.flags|=64,ne=y.effects,ne===null?y.effects=[L]:ne.push(L))}else fe={eventTime:fe,lane:ne,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ie===null?(Q=ie=fe,j=oe):ie=ie.next=fe,C|=ne;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;ne=L,L=ne.next,ne.next=null,y.lastBaseUpdate=ne,y.shared.pending=null}}while(!0);if(ie===null&&(j=oe),y.baseState=j,y.firstBaseUpdate=Q,y.lastBaseUpdate=ie,u=y.shared.interleaved,u!==null){y=u;do C|=y.lane,y=y.next;while(y!==u)}else x===null&&(y.shared.lanes=0);aa|=C,a.lanes=C,a.memoizedState=oe}}function eg(a,u,f){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var g=a[u],y=g.callback;if(y!==null){if(g.callback=null,g=f,typeof y!="function")throw Error(t(191,y));y.call(g)}}}var bu={},$n=Zi(bu),Du=Zi(bu),ku=Zi(bu);function ia(a){if(a===bu)throw Error(t(174));return a}function rd(a,u){switch(ft(ku,u),ft(Du,a),ft($n,bu),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Oa(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=Oa(u,a)}mt($n),ft($n,u)}function cs(){mt($n),mt(Du),mt(ku)}function tg(a){ia(ku.current);var u=ia($n.current),f=Oa(u,a.type);u!==f&&(ft(Du,a),ft($n,f))}function nd(a){Du.current===a&&(mt($n),mt(Du))}var At=Zi(0);function Cc(a){for(var u=a;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var id=[];function od(){for(var a=0;a<id.length;a++)id[a]._workInProgressVersionPrimary=null;id.length=0}var Sc=z.ReactCurrentDispatcher,ad=z.ReactCurrentBatchConfig,oa=0,It=null,Ut=null,Yt=null,Tc=!1,Mu=!1,Lu=0,hw=0;function vr(){throw Error(t(321))}function sd(a,u){if(u===null)return!1;for(var f=0;f<u.length&&f<a.length;f++)if(!yn(a[f],u[f]))return!1;return!0}function ud(a,u,f,g,y,x){if(oa=x,It=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Sc.current=a===null||a.memoizedState===null?vw:mw,a=f(g,y),Mu){x=0;do{if(Mu=!1,Lu=0,25<=x)throw Error(t(301));x+=1,Yt=Ut=null,u.updateQueue=null,Sc.current=yw,a=f(g,y)}while(Mu)}if(Sc.current=Pc,u=Ut!==null&&Ut.next!==null,oa=0,Yt=Ut=It=null,Tc=!1,u)throw Error(t(300));return a}function ld(){var a=Lu!==0;return Lu=0,a}function qn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?It.memoizedState=Yt=a:Yt=Yt.next=a,Yt}function on(){if(Ut===null){var a=It.alternate;a=a!==null?a.memoizedState:null}else a=Ut.next;var u=Yt===null?It.memoizedState:Yt.next;if(u!==null)Yt=u,Ut=a;else{if(a===null)throw Error(t(310));Ut=a,a={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Yt===null?It.memoizedState=Yt=a:Yt=Yt.next=a}return Yt}function Fu(a,u){return typeof u=="function"?u(a):u}function cd(a){var u=on(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=Ut,y=g.baseQueue,x=f.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}g.baseQueue=y=x,f.pending=null}if(y!==null){x=y.next,g=g.baseState;var L=C=null,j=null,Q=x;do{var ie=Q.lane;if((oa&ie)===ie)j!==null&&(j=j.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),g=Q.hasEagerState?Q.eagerState:a(g,Q.action);else{var oe={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};j===null?(L=j=oe,C=g):j=j.next=oe,It.lanes|=ie,aa|=ie}Q=Q.next}while(Q!==null&&Q!==x);j===null?C=g:j.next=L,yn(g,u.memoizedState)||(kr=!0),u.memoizedState=g,u.baseState=C,u.baseQueue=j,f.lastRenderedState=g}if(a=f.interleaved,a!==null){y=a;do x=y.lane,It.lanes|=x,aa|=x,y=y.next;while(y!==a)}else y===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function fd(a){var u=on(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=f.dispatch,y=f.pending,x=u.memoizedState;if(y!==null){f.pending=null;var C=y=y.next;do x=a(x,C.action),C=C.next;while(C!==y);yn(x,u.memoizedState)||(kr=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),f.lastRenderedState=x}return[x,g]}function rg(){}function ng(a,u){var f=It,g=on(),y=u(),x=!yn(g.memoizedState,y);if(x&&(g.memoizedState=y,kr=!0),g=g.queue,hd(ag.bind(null,f,g,a),[a]),g.getSnapshot!==u||x||Yt!==null&&Yt.memoizedState.tag&1){if(f.flags|=2048,Vu(9,og.bind(null,f,g,y,u),void 0,null),Qt===null)throw Error(t(349));(oa&30)!==0||ig(f,u,y)}return y}function ig(a,u,f){a.flags|=16384,a={getSnapshot:u,value:f},u=It.updateQueue,u===null?(u={lastEffect:null,stores:null},It.updateQueue=u,u.stores=[a]):(f=u.stores,f===null?u.stores=[a]:f.push(a))}function og(a,u,f,g){u.value=f,u.getSnapshot=g,sg(u)&&ug(a)}function ag(a,u,f){return f(function(){sg(u)&&ug(a)})}function sg(a){var u=a.getSnapshot;a=a.value;try{var f=u();return!yn(a,f)}catch{return!0}}function ug(a){var u=_i(a,1);u!==null&&An(u,a,1,-1)}function lg(a){var u=qn();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:a},u.queue=a,a=a.dispatch=gw.bind(null,It,a),[u.memoizedState,a]}function Vu(a,u,f,g){return a={tag:a,create:u,destroy:f,deps:g,next:null},u=It.updateQueue,u===null?(u={lastEffect:null,stores:null},It.updateQueue=u,u.lastEffect=a.next=a):(f=u.lastEffect,f===null?u.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,u.lastEffect=a)),a}function cg(){return on().memoizedState}function Rc(a,u,f,g){var y=qn();It.flags|=a,y.memoizedState=Vu(1|u,f,void 0,g===void 0?null:g)}function Nc(a,u,f,g){var y=on();g=g===void 0?null:g;var x=void 0;if(Ut!==null){var C=Ut.memoizedState;if(x=C.destroy,g!==null&&sd(g,C.deps)){y.memoizedState=Vu(u,f,x,g);return}}It.flags|=a,y.memoizedState=Vu(1|u,f,x,g)}function fg(a,u){return Rc(8390656,8,a,u)}function hd(a,u){return Nc(2048,8,a,u)}function hg(a,u){return Nc(4,2,a,u)}function dg(a,u){return Nc(4,4,a,u)}function pg(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function gg(a,u,f){return f=f!=null?f.concat([a]):null,Nc(4,4,pg.bind(null,u,a),f)}function dd(){}function vg(a,u){var f=on();u=u===void 0?null:u;var g=f.memoizedState;return g!==null&&u!==null&&sd(u,g[1])?g[0]:(f.memoizedState=[a,u],a)}function mg(a,u){var f=on();u=u===void 0?null:u;var g=f.memoizedState;return g!==null&&u!==null&&sd(u,g[1])?g[0]:(a=a(),f.memoizedState=[a,u],a)}function yg(a,u,f){return(oa&21)===0?(a.baseState&&(a.baseState=!1,kr=!0),a.memoizedState=f):(yn(f,u)||(f=cu(),It.lanes|=f,aa|=f,a.baseState=!0),u)}function dw(a,u){var f=He;He=f!==0&&4>f?f:4,a(!0);var g=ad.transition;ad.transition={};try{a(!1),u()}finally{He=f,ad.transition=g}}function _g(){return on().memoizedState}function pw(a,u,f){var g=ao(a);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},xg(a))wg(u,f);else if(f=Qp(a,u,f,g),f!==null){var y=Rr();An(f,a,g,y),Eg(f,u,g)}}function gw(a,u,f){var g=ao(a),y={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(xg(a))wg(u,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var C=u.lastRenderedState,L=x(C,f);if(y.hasEagerState=!0,y.eagerState=L,yn(L,C)){var j=u.interleaved;j===null?(y.next=y,ed(u)):(y.next=j.next,j.next=y),u.interleaved=y;return}}catch{}finally{}f=Qp(a,u,y,g),f!==null&&(y=Rr(),An(f,a,g,y),Eg(f,u,g))}}function xg(a){var u=a.alternate;return a===It||u!==null&&u===It}function wg(a,u){Mu=Tc=!0;var f=a.pending;f===null?u.next=u:(u.next=f.next,f.next=u),a.pending=u}function Eg(a,u,f){if((f&4194240)!==0){var g=u.lanes;g&=a.pendingLanes,f|=g,u.lanes=f,hu(a,f)}}var Pc={readContext:nn,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},vw={readContext:nn,useCallback:function(a,u){return qn().memoizedState=[a,u===void 0?null:u],a},useContext:nn,useEffect:fg,useImperativeHandle:function(a,u,f){return f=f!=null?f.concat([a]):null,Rc(4194308,4,pg.bind(null,u,a),f)},useLayoutEffect:function(a,u){return Rc(4194308,4,a,u)},useInsertionEffect:function(a,u){return Rc(4,2,a,u)},useMemo:function(a,u){var f=qn();return u=u===void 0?null:u,a=a(),f.memoizedState=[a,u],a},useReducer:function(a,u,f){var g=qn();return u=f!==void 0?f(u):u,g.memoizedState=g.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},g.queue=a,a=a.dispatch=pw.bind(null,It,a),[g.memoizedState,a]},useRef:function(a){var u=qn();return a={current:a},u.memoizedState=a},useState:lg,useDebugValue:dd,useDeferredValue:function(a){return qn().memoizedState=a},useTransition:function(){var a=lg(!1),u=a[0];return a=dw.bind(null,a[1]),qn().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,f){var g=It,y=qn();if(wt){if(f===void 0)throw Error(t(407));f=f()}else{if(f=u(),Qt===null)throw Error(t(349));(oa&30)!==0||ig(g,u,f)}y.memoizedState=f;var x={value:f,getSnapshot:u};return y.queue=x,fg(ag.bind(null,g,x,a),[a]),g.flags|=2048,Vu(9,og.bind(null,g,x,f,u),void 0,null),f},useId:function(){var a=qn(),u=Qt.identifierPrefix;if(wt){var f=yi,g=mi;f=(g&~(1<<32-Gr(g)-1)).toString(32)+f,u=":"+u+"R"+f,f=Lu++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=hw++,u=":"+u+"r"+f.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},mw={readContext:nn,useCallback:vg,useContext:nn,useEffect:hd,useImperativeHandle:gg,useInsertionEffect:hg,useLayoutEffect:dg,useMemo:mg,useReducer:cd,useRef:cg,useState:function(){return cd(Fu)},useDebugValue:dd,useDeferredValue:function(a){var u=on();return yg(u,Ut.memoizedState,a)},useTransition:function(){var a=cd(Fu)[0],u=on().memoizedState;return[a,u]},useMutableSource:rg,useSyncExternalStore:ng,useId:_g,unstable_isNewReconciler:!1},yw={readContext:nn,useCallback:vg,useContext:nn,useEffect:hd,useImperativeHandle:gg,useInsertionEffect:hg,useLayoutEffect:dg,useMemo:mg,useReducer:fd,useRef:cg,useState:function(){return fd(Fu)},useDebugValue:dd,useDeferredValue:function(a){var u=on();return Ut===null?u.memoizedState=a:yg(u,Ut.memoizedState,a)},useTransition:function(){var a=fd(Fu)[0],u=on().memoizedState;return[a,u]},useMutableSource:rg,useSyncExternalStore:ng,useId:_g,unstable_isNewReconciler:!1};function xn(a,u){if(a&&a.defaultProps){u=de({},u),a=a.defaultProps;for(var f in a)u[f]===void 0&&(u[f]=a[f]);return u}return u}function pd(a,u,f,g){u=a.memoizedState,f=f(g,u),f=f==null?u:de({},u,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Oc={isMounted:function(a){return(a=a._reactInternals)?vn(a)===a:!1},enqueueSetState:function(a,u,f){a=a._reactInternals;var g=Rr(),y=ao(a),x=xi(g,y);x.payload=u,f!=null&&(x.callback=f),u=ro(a,x,y),u!==null&&(An(u,a,y,g),Ac(u,a,y))},enqueueReplaceState:function(a,u,f){a=a._reactInternals;var g=Rr(),y=ao(a),x=xi(g,y);x.tag=1,x.payload=u,f!=null&&(x.callback=f),u=ro(a,x,y),u!==null&&(An(u,a,y,g),Ac(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var f=Rr(),g=ao(a),y=xi(f,g);y.tag=2,u!=null&&(y.callback=u),u=ro(a,y,g),u!==null&&(An(u,a,g,f),Ac(u,a,g))}};function Ag(a,u,f,g,y,x,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,x,C):u.prototype&&u.prototype.isPureReactComponent?!Iu(f,g)||!Iu(y,x):!0}function Ig(a,u,f){var g=!1,y=Ji,x=u.contextType;return typeof x=="object"&&x!==null?x=nn(x):(y=Dr(u)?ea:gr.current,g=u.contextTypes,x=(g=g!=null)?ns(a,y):Ji),u=new u(f,x),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Oc,a.stateNode=u,u._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=y,a.__reactInternalMemoizedMaskedChildContext=x),u}function Cg(a,u,f,g){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==a&&Oc.enqueueReplaceState(u,u.state,null)}function gd(a,u,f,g){var y=a.stateNode;y.props=f,y.state=a.memoizedState,y.refs={},td(a);var x=u.contextType;typeof x=="object"&&x!==null?y.context=nn(x):(x=Dr(u)?ea:gr.current,y.context=ns(a,x)),y.state=a.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(pd(a,u,x,f),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(u=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),u!==y.state&&Oc.enqueueReplaceState(y,y.state,null),Ic(a,f,y,g),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308)}function fs(a,u){try{var f="",g=u;do f+=Ve(g),g=g.return;while(g);var y=f}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:u,stack:y,digest:null}}function vd(a,u,f){return{value:a,source:null,stack:f??null,digest:u??null}}function md(a,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var _w=typeof WeakMap=="function"?WeakMap:Map;function Sg(a,u,f){f=xi(-1,f),f.tag=3,f.payload={element:null};var g=u.value;return f.callback=function(){Vc||(Vc=!0,bd=g),md(a,u)},f}function Tg(a,u,f){f=xi(-1,f),f.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;f.payload=function(){return g(y)},f.callback=function(){md(a,u)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(f.callback=function(){md(a,u),typeof g!="function"&&(io===null?io=new Set([this]):io.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})}),f}function Rg(a,u,f){var g=a.pingCache;if(g===null){g=a.pingCache=new _w;var y=new Set;g.set(u,y)}else y=g.get(u),y===void 0&&(y=new Set,g.set(u,y));y.has(f)||(y.add(f),a=Dw.bind(null,a,u,f),u.then(a,a))}function Ng(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Pg(a,u,f,g,y){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=xi(-1,1),u.tag=2,ro(f,u,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=y,a)}var xw=z.ReactCurrentOwner,kr=!1;function Tr(a,u,f,g){u.child=a===null?Yp(u,null,f,g):ss(u,a.child,f,g)}function Og(a,u,f,g,y){f=f.render;var x=u.ref;return ls(u,y),g=ud(a,u,f,g,x,y),f=ld(),a!==null&&!kr?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,wi(a,u,y)):(wt&&f&&Wh(u),u.flags|=1,Tr(a,u,g,y),u.child)}function bg(a,u,f,g,y){if(a===null){var x=f.type;return typeof x=="function"&&!Bd(x)&&x.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=x,Dg(a,u,x,g,y)):(a=Gc(f.type,null,g,u,u.mode,y),a.ref=u.ref,a.return=u,u.child=a)}if(x=a.child,(a.lanes&y)===0){var C=x.memoizedProps;if(f=f.compare,f=f!==null?f:Iu,f(C,g)&&a.ref===u.ref)return wi(a,u,y)}return u.flags|=1,a=uo(x,g),a.ref=u.ref,a.return=u,u.child=a}function Dg(a,u,f,g,y){if(a!==null){var x=a.memoizedProps;if(Iu(x,g)&&a.ref===u.ref)if(kr=!1,u.pendingProps=g=x,(a.lanes&y)!==0)(a.flags&131072)!==0&&(kr=!0);else return u.lanes=a.lanes,wi(a,u,y)}return yd(a,u,f,g,y)}function kg(a,u,f){var g=u.pendingProps,y=g.children,x=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ds,Qr),Qr|=f;else{if((f&1073741824)===0)return a=x!==null?x.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,ft(ds,Qr),Qr|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:f,ft(ds,Qr),Qr|=g}else x!==null?(g=x.baseLanes|f,u.memoizedState=null):g=f,ft(ds,Qr),Qr|=g;return Tr(a,u,y,f),u.child}function Mg(a,u){var f=u.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function yd(a,u,f,g,y){var x=Dr(f)?ea:gr.current;return x=ns(u,x),ls(u,y),f=ud(a,u,f,g,x,y),g=ld(),a!==null&&!kr?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,wi(a,u,y)):(wt&&g&&Wh(u),u.flags|=1,Tr(a,u,f,y),u.child)}function Lg(a,u,f,g,y){if(Dr(f)){var x=!0;gc(u)}else x=!1;if(ls(u,y),u.stateNode===null)Dc(a,u),Ig(u,f,g),gd(u,f,g,y),g=!0;else if(a===null){var C=u.stateNode,L=u.memoizedProps;C.props=L;var j=C.context,Q=f.contextType;typeof Q=="object"&&Q!==null?Q=nn(Q):(Q=Dr(f)?ea:gr.current,Q=ns(u,Q));var ie=f.getDerivedStateFromProps,oe=typeof ie=="function"||typeof C.getSnapshotBeforeUpdate=="function";oe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==g||j!==Q)&&Cg(u,C,g,Q),to=!1;var ne=u.memoizedState;C.state=ne,Ic(u,g,C,y),j=u.memoizedState,L!==g||ne!==j||br.current||to?(typeof ie=="function"&&(pd(u,f,ie,g),j=u.memoizedState),(L=to||Ag(u,f,L,g,ne,j,Q))?(oe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=j),C.props=g,C.state=j,C.context=Q,g=L):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{C=u.stateNode,Zp(a,u),L=u.memoizedProps,Q=u.type===u.elementType?L:xn(u.type,L),C.props=Q,oe=u.pendingProps,ne=C.context,j=f.contextType,typeof j=="object"&&j!==null?j=nn(j):(j=Dr(f)?ea:gr.current,j=ns(u,j));var fe=f.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==oe||ne!==j)&&Cg(u,C,g,j),to=!1,ne=u.memoizedState,C.state=ne,Ic(u,g,C,y);var ge=u.memoizedState;L!==oe||ne!==ge||br.current||to?(typeof fe=="function"&&(pd(u,f,fe,g),ge=u.memoizedState),(Q=to||Ag(u,f,Q,g,ne,ge,j)||!1)?(ie||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,ge,j),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,ge,j)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=ge),C.props=g,C.state=ge,C.context=j,g=Q):(typeof C.componentDidUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),g=!1)}return _d(a,u,f,g,x,y)}function _d(a,u,f,g,y,x){Mg(a,u);var C=(u.flags&128)!==0;if(!g&&!C)return y&&jp(u,f,!1),wi(a,u,x);g=u.stateNode,xw.current=u;var L=C&&typeof f.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,a!==null&&C?(u.child=ss(u,a.child,null,x),u.child=ss(u,null,L,x)):Tr(a,u,L,x),u.memoizedState=g.state,y&&jp(u,f,!0),u.child}function Fg(a){var u=a.stateNode;u.pendingContext?Bp(a,u.pendingContext,u.pendingContext!==u.context):u.context&&Bp(a,u.context,!1),rd(a,u.containerInfo)}function Vg(a,u,f,g,y){return as(),Kh(y),u.flags|=256,Tr(a,u,f,g),u.child}var xd={dehydrated:null,treeContext:null,retryLane:0};function wd(a){return{baseLanes:a,cachePool:null,transitions:null}}function Bg(a,u,f){var g=u.pendingProps,y=At.current,x=!1,C=(u.flags&128)!==0,L;if((L=C)||(L=a!==null&&a.memoizedState===null?!1:(y&2)!==0),L?(x=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(y|=1),ft(At,y&1),a===null)return Xh(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(C=g.children,a=g.fallback,x?(g=u.mode,x=u.child,C={mode:"hidden",children:C},(g&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=C):x=Wc(C,g,0,null),a=ca(a,g,f,null),x.return=u,a.return=u,x.sibling=a,u.child=x,u.child.memoizedState=wd(f),u.memoizedState=xd,a):Ed(u,C));if(y=a.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return ww(a,u,C,g,L,y,f);if(x){x=g.fallback,C=u.mode,y=a.child,L=y.sibling;var j={mode:"hidden",children:g.children};return(C&1)===0&&u.child!==y?(g=u.child,g.childLanes=0,g.pendingProps=j,u.deletions=null):(g=uo(y,j),g.subtreeFlags=y.subtreeFlags&14680064),L!==null?x=uo(L,x):(x=ca(x,C,f,null),x.flags|=2),x.return=u,g.return=u,g.sibling=x,u.child=g,g=x,x=u.child,C=a.child.memoizedState,C=C===null?wd(f):{baseLanes:C.baseLanes|f,cachePool:null,transitions:C.transitions},x.memoizedState=C,x.childLanes=a.childLanes&~f,u.memoizedState=xd,g}return x=a.child,a=x.sibling,g=uo(x,{mode:"visible",children:g.children}),(u.mode&1)===0&&(g.lanes=f),g.return=u,g.sibling=null,a!==null&&(f=u.deletions,f===null?(u.deletions=[a],u.flags|=16):f.push(a)),u.child=g,u.memoizedState=null,g}function Ed(a,u){return u=Wc({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function bc(a,u,f,g){return g!==null&&Kh(g),ss(u,a.child,null,f),a=Ed(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function ww(a,u,f,g,y,x,C){if(f)return u.flags&256?(u.flags&=-257,g=vd(Error(t(422))),bc(a,u,C,g)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(x=g.fallback,y=u.mode,g=Wc({mode:"visible",children:g.children},y,0,null),x=ca(x,y,C,null),x.flags|=2,g.return=u,x.return=u,g.sibling=x,u.child=g,(u.mode&1)!==0&&ss(u,a.child,null,C),u.child.memoizedState=wd(C),u.memoizedState=xd,x);if((u.mode&1)===0)return bc(a,u,C,null);if(y.data==="$!"){if(g=y.nextSibling&&y.nextSibling.dataset,g)var L=g.dgst;return g=L,x=Error(t(419)),g=vd(x,g,void 0),bc(a,u,C,g)}if(L=(C&a.childLanes)!==0,kr||L){if(g=Qt,g!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(g.suspendedLanes|C))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,_i(a,y),An(g,a,y,-1))}return Vd(),g=vd(Error(t(421))),bc(a,u,C,g)}return y.data==="$?"?(u.flags|=128,u.child=a.child,u=kw.bind(null,a),y._reactRetry=u,null):(a=x.treeContext,Yr=Qi(y.nextSibling),Kr=u,wt=!0,_n=null,a!==null&&(tn[rn++]=mi,tn[rn++]=yi,tn[rn++]=ta,mi=a.id,yi=a.overflow,ta=u),u=Ed(u,g.children),u.flags|=4096,u)}function Ug(a,u,f){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u),Jh(a.return,u,f)}function Ad(a,u,f,g,y){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:y}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=f,x.tailMode=y)}function jg(a,u,f){var g=u.pendingProps,y=g.revealOrder,x=g.tail;if(Tr(a,u,g.children,f),g=At.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ug(a,f,u);else if(a.tag===19)Ug(a,f,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(ft(At,g),(u.mode&1)===0)u.memoizedState=null;else switch(y){case"forwards":for(f=u.child,y=null;f!==null;)a=f.alternate,a!==null&&Cc(a)===null&&(y=f),f=f.sibling;f=y,f===null?(y=u.child,u.child=null):(y=f.sibling,f.sibling=null),Ad(u,!1,y,f,x);break;case"backwards":for(f=null,y=u.child,u.child=null;y!==null;){if(a=y.alternate,a!==null&&Cc(a)===null){u.child=y;break}a=y.sibling,y.sibling=f,f=y,y=a}Ad(u,!0,f,null,x);break;case"together":Ad(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Dc(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function wi(a,u,f){if(a!==null&&(u.dependencies=a.dependencies),aa|=u.lanes,(f&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,f=uo(a,a.pendingProps),u.child=f,f.return=u;a.sibling!==null;)a=a.sibling,f=f.sibling=uo(a,a.pendingProps),f.return=u;f.sibling=null}return u.child}function Ew(a,u,f){switch(u.tag){case 3:Fg(u),as();break;case 5:tg(u);break;case 1:Dr(u.type)&&gc(u);break;case 4:rd(u,u.stateNode.containerInfo);break;case 10:var g=u.type._context,y=u.memoizedProps.value;ft(wc,g._currentValue),g._currentValue=y;break;case 13:if(g=u.memoizedState,g!==null)return g.dehydrated!==null?(ft(At,At.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?Bg(a,u,f):(ft(At,At.current&1),a=wi(a,u,f),a!==null?a.sibling:null);ft(At,At.current&1);break;case 19:if(g=(f&u.childLanes)!==0,(a.flags&128)!==0){if(g)return jg(a,u,f);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ft(At,At.current),g)break;return null;case 22:case 23:return u.lanes=0,kg(a,u,f)}return wi(a,u,f)}var zg,Id,Hg,Gg;zg=function(a,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Id=function(){},Hg=function(a,u,f,g){var y=a.memoizedProps;if(y!==g){a=u.stateNode,ia($n.current);var x=null;switch(f){case"input":y=Na(a,y),g=Na(a,g),x=[];break;case"select":y=de({},y,{value:void 0}),g=de({},g,{value:void 0}),x=[];break;case"textarea":y=Js(a,y),g=Js(a,g),x=[];break;default:typeof y.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=hc)}gn(f,g);var C;f=null;for(Q in y)if(!g.hasOwnProperty(Q)&&y.hasOwnProperty(Q)&&y[Q]!=null)if(Q==="style"){var L=y[Q];for(C in L)L.hasOwnProperty(C)&&(f||(f={}),f[C]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?x||(x=[]):(x=x||[]).push(Q,null));for(Q in g){var j=g[Q];if(L=y?.[Q],g.hasOwnProperty(Q)&&j!==L&&(j!=null||L!=null))if(Q==="style")if(L){for(C in L)!L.hasOwnProperty(C)||j&&j.hasOwnProperty(C)||(f||(f={}),f[C]="");for(C in j)j.hasOwnProperty(C)&&L[C]!==j[C]&&(f||(f={}),f[C]=j[C])}else f||(x||(x=[]),x.push(Q,f)),f=j;else Q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,L=L?L.__html:void 0,j!=null&&L!==j&&(x=x||[]).push(Q,j)):Q==="children"?typeof j!="string"&&typeof j!="number"||(x=x||[]).push(Q,""+j):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(j!=null&&Q==="onScroll"&&vt("scroll",a),x||L===j||(x=[])):(x=x||[]).push(Q,j))}f&&(x=x||[]).push("style",f);var Q=x;(u.updateQueue=Q)&&(u.flags|=4)}},Gg=function(a,u,f,g){f!==g&&(u.flags|=4)};function Bu(a,u){if(!wt)switch(a.tailMode){case"hidden":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function mr(a){var u=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(u)for(var y=a.child;y!==null;)f|=y.lanes|y.childLanes,g|=y.subtreeFlags&14680064,g|=y.flags&14680064,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)f|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=g,a.childLanes=f,u}function Aw(a,u,f){var g=u.pendingProps;switch($h(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(u),null;case 1:return Dr(u.type)&&pc(),mr(u),null;case 3:return g=u.stateNode,cs(),mt(br),mt(gr),od(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(_c(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,_n!==null&&(Md(_n),_n=null))),Id(a,u),mr(u),null;case 5:nd(u);var y=ia(ku.current);if(f=u.type,a!==null&&u.stateNode!=null)Hg(a,u,f,g,y),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(t(166));return mr(u),null}if(a=ia($n.current),_c(u)){g=u.stateNode,f=u.type;var x=u.memoizedProps;switch(g[Wn]=u,g[Nu]=x,a=(u.mode&1)!==0,f){case"dialog":vt("cancel",g),vt("close",g);break;case"iframe":case"object":case"embed":vt("load",g);break;case"video":case"audio":for(y=0;y<Su.length;y++)vt(Su[y],g);break;case"source":vt("error",g);break;case"img":case"image":case"link":vt("error",g),vt("load",g);break;case"details":vt("toggle",g);break;case"input":Fl(g,x),vt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!x.multiple},vt("invalid",g);break;case"textarea":eu(g,x),vt("invalid",g)}gn(f,x),y=null;for(var C in x)if(x.hasOwnProperty(C)){var L=x[C];C==="children"?typeof L=="string"?g.textContent!==L&&(x.suppressHydrationWarning!==!0&&fc(g.textContent,L,a),y=["children",L]):typeof L=="number"&&g.textContent!==""+L&&(x.suppressHydrationWarning!==!0&&fc(g.textContent,L,a),y=["children",""+L]):i.hasOwnProperty(C)&&L!=null&&C==="onScroll"&&vt("scroll",g)}switch(f){case"input":Ra(g),Zs(g,x,!0);break;case"textarea":Ra(g),Mi(g);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(g.onclick=hc)}g=y,u.updateQueue=g,g!==null&&(u.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=tu(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=C.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=C.createElement(f,{is:g.is}):(a=C.createElement(f),f==="select"&&(C=a,g.multiple?C.multiple=!0:g.size&&(C.size=g.size))):a=C.createElementNS(a,f),a[Wn]=u,a[Nu]=g,zg(a,u,!1,!1),u.stateNode=a;e:{switch(C=Da(f,g),f){case"dialog":vt("cancel",a),vt("close",a),y=g;break;case"iframe":case"object":case"embed":vt("load",a),y=g;break;case"video":case"audio":for(y=0;y<Su.length;y++)vt(Su[y],a);y=g;break;case"source":vt("error",a),y=g;break;case"img":case"image":case"link":vt("error",a),vt("load",a),y=g;break;case"details":vt("toggle",a),y=g;break;case"input":Fl(a,g),y=Na(a,g),vt("invalid",a);break;case"option":y=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},y=de({},g,{value:void 0}),vt("invalid",a);break;case"textarea":eu(a,g),y=Js(a,g),vt("invalid",a);break;default:y=g}gn(f,y),L=y;for(x in L)if(L.hasOwnProperty(x)){var j=L[x];x==="style"?ba(a,j):x==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Bl(a,j)):x==="children"?typeof j=="string"?(f!=="textarea"||j!=="")&&Bo(a,j):typeof j=="number"&&Bo(a,""+j):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?j!=null&&x==="onScroll"&&vt("scroll",a):j!=null&&V(a,x,j,C))}switch(f){case"input":Ra(a),Zs(a,g,!1);break;case"textarea":Ra(a),Mi(a);break;case"option":g.value!=null&&a.setAttribute("value",""+$e(g.value));break;case"select":a.multiple=!!g.multiple,x=g.value,x!=null?pn(a,!!g.multiple,x,!1):g.defaultValue!=null&&pn(a,!!g.multiple,g.defaultValue,!0);break;default:typeof y.onClick=="function"&&(a.onclick=hc)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return mr(u),null;case 6:if(a&&u.stateNode!=null)Gg(a,u,a.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(t(166));if(f=ia(ku.current),ia($n.current),_c(u)){if(g=u.stateNode,f=u.memoizedProps,g[Wn]=u,(x=g.nodeValue!==f)&&(a=Kr,a!==null))switch(a.tag){case 3:fc(g.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&fc(g.nodeValue,f,(a.mode&1)!==0)}x&&(u.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Wn]=u,u.stateNode=g}return mr(u),null;case 13:if(mt(At),g=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(wt&&Yr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)qp(),as(),u.flags|=98560,x=!1;else if(x=_c(u),g!==null&&g.dehydrated!==null){if(a===null){if(!x)throw Error(t(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Wn]=u}else as(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;mr(u),x=!1}else _n!==null&&(Md(_n),_n=null),x=!0;if(!x)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(At.current&1)!==0?jt===0&&(jt=3):Vd())),u.updateQueue!==null&&(u.flags|=4),mr(u),null);case 4:return cs(),Id(a,u),a===null&&Tu(u.stateNode.containerInfo),mr(u),null;case 10:return Zh(u.type._context),mr(u),null;case 17:return Dr(u.type)&&pc(),mr(u),null;case 19:if(mt(At),x=u.memoizedState,x===null)return mr(u),null;if(g=(u.flags&128)!==0,C=x.rendering,C===null)if(g)Bu(x,!1);else{if(jt!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(C=Cc(a),C!==null){for(u.flags|=128,Bu(x,!1),g=C.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),u.subtreeFlags=0,g=f,f=u.child;f!==null;)x=f,a=g,x.flags&=14680066,C=x.alternate,C===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=C.childLanes,x.lanes=C.lanes,x.child=C.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=C.memoizedProps,x.memoizedState=C.memoizedState,x.updateQueue=C.updateQueue,x.type=C.type,a=C.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return ft(At,At.current&1|2),u.child}a=a.sibling}x.tail!==null&&gt()>ps&&(u.flags|=128,g=!0,Bu(x,!1),u.lanes=4194304)}else{if(!g)if(a=Cc(C),a!==null){if(u.flags|=128,g=!0,f=a.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),Bu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!C.alternate&&!wt)return mr(u),null}else 2*gt()-x.renderingStartTime>ps&&f!==1073741824&&(u.flags|=128,g=!0,Bu(x,!1),u.lanes=4194304);x.isBackwards?(C.sibling=u.child,u.child=C):(f=x.last,f!==null?f.sibling=C:u.child=C,x.last=C)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=gt(),u.sibling=null,f=At.current,ft(At,g?f&1|2:f&1),u):(mr(u),null);case 22:case 23:return Fd(),g=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(u.flags|=8192),g&&(u.mode&1)!==0?(Qr&1073741824)!==0&&(mr(u),u.subtreeFlags&6&&(u.flags|=8192)):mr(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function Iw(a,u){switch($h(u),u.tag){case 1:return Dr(u.type)&&pc(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return cs(),mt(br),mt(gr),od(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return nd(u),null;case 13:if(mt(At),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));as()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return mt(At),null;case 4:return cs(),null;case 10:return Zh(u.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var kc=!1,yr=!1,Cw=typeof WeakSet=="function"?WeakSet:Set,pe=null;function hs(a,u){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Tt(a,u,g)}else f.current=null}function Cd(a,u,f){try{f()}catch(g){Tt(a,u,g)}}var Wg=!1;function Sw(a,u){if(Fh=hi,a=Ap(),Nh(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var y=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var C=0,L=-1,j=-1,Q=0,ie=0,oe=a,ne=null;t:for(;;){for(var fe;oe!==f||y!==0&&oe.nodeType!==3||(L=C+y),oe!==x||g!==0&&oe.nodeType!==3||(j=C+g),oe.nodeType===3&&(C+=oe.nodeValue.length),(fe=oe.firstChild)!==null;)ne=oe,oe=fe;for(;;){if(oe===a)break t;if(ne===f&&++Q===y&&(L=C),ne===x&&++ie===g&&(j=C),(fe=oe.nextSibling)!==null)break;oe=ne,ne=oe.parentNode}oe=fe}f=L===-1||j===-1?null:{start:L,end:j}}else f=null}f=f||{start:0,end:0}}else f=null;for(Vh={focusedElem:a,selectionRange:f},hi=!1,pe=u;pe!==null;)if(u=pe,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,pe=a;else for(;pe!==null;){u=pe;try{var ge=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,Pt=ge.memoizedState,q=u.stateNode,W=q.getSnapshotBeforeUpdate(u.elementType===u.type?ve:xn(u.type,ve),Pt);q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=u.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){Tt(u,u.return,ae)}if(a=u.sibling,a!==null){a.return=u.return,pe=a;break}pe=u.return}return ge=Wg,Wg=!1,ge}function Uu(a,u,f){var g=u.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var y=g=g.next;do{if((y.tag&a)===a){var x=y.destroy;y.destroy=void 0,x!==void 0&&Cd(u,f,x)}y=y.next}while(y!==g)}}function Mc(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&a)===a){var g=f.create;f.destroy=g()}f=f.next}while(f!==u)}}function Sd(a){var u=a.ref;if(u!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof u=="function"?u(a):u.current=a}}function $g(a){var u=a.alternate;u!==null&&(a.alternate=null,$g(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[Wn],delete u[Nu],delete u[zh],delete u[uw],delete u[lw])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function qg(a){return a.tag===5||a.tag===3||a.tag===4}function Xg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||qg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Td(a,u,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(a,u):f.insertBefore(a,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(a,f)):(u=f,u.appendChild(a)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=hc));else if(g!==4&&(a=a.child,a!==null))for(Td(a,u,f),a=a.sibling;a!==null;)Td(a,u,f),a=a.sibling}function Rd(a,u,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?f.insertBefore(a,u):f.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Rd(a,u,f),a=a.sibling;a!==null;)Rd(a,u,f),a=a.sibling}var ar=null,wn=!1;function no(a,u,f){for(f=f.child;f!==null;)Kg(a,u,f),f=f.sibling}function Kg(a,u,f){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(Go,f)}catch{}switch(f.tag){case 5:yr||hs(f,u);case 6:var g=ar,y=wn;ar=null,no(a,u,f),ar=g,wn=y,ar!==null&&(wn?(a=ar,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):ar.removeChild(f.stateNode));break;case 18:ar!==null&&(wn?(a=ar,f=f.stateNode,a.nodeType===8?jh(a.parentNode,f):a.nodeType===1&&jh(a,f),qi(a)):jh(ar,f.stateNode));break;case 4:g=ar,y=wn,ar=f.stateNode.containerInfo,wn=!0,no(a,u,f),ar=g,wn=y;break;case 0:case 11:case 14:case 15:if(!yr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){y=g=g.next;do{var x=y,C=x.destroy;x=x.tag,C!==void 0&&((x&2)!==0||(x&4)!==0)&&Cd(f,u,C),y=y.next}while(y!==g)}no(a,u,f);break;case 1:if(!yr&&(hs(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(L){Tt(f,u,L)}no(a,u,f);break;case 21:no(a,u,f);break;case 22:f.mode&1?(yr=(g=yr)||f.memoizedState!==null,no(a,u,f),yr=g):no(a,u,f);break;default:no(a,u,f)}}function Yg(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new Cw),u.forEach(function(g){var y=Mw.bind(null,a,g);f.has(g)||(f.add(g),g.then(y,y))})}}function En(a,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var y=f[g];try{var x=a,C=u,L=C;e:for(;L!==null;){switch(L.tag){case 5:ar=L.stateNode,wn=!1;break e;case 3:ar=L.stateNode.containerInfo,wn=!0;break e;case 4:ar=L.stateNode.containerInfo,wn=!0;break e}L=L.return}if(ar===null)throw Error(t(160));Kg(x,C,y),ar=null,wn=!1;var j=y.alternate;j!==null&&(j.return=null),y.return=null}catch(Q){Tt(y,u,Q)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Qg(u,a),u=u.sibling}function Qg(a,u){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(En(u,a),Xn(a),g&4){try{Uu(3,a,a.return),Mc(3,a)}catch(ve){Tt(a,a.return,ve)}try{Uu(5,a,a.return)}catch(ve){Tt(a,a.return,ve)}}break;case 1:En(u,a),Xn(a),g&512&&f!==null&&hs(f,f.return);break;case 5:if(En(u,a),Xn(a),g&512&&f!==null&&hs(f,f.return),a.flags&32){var y=a.stateNode;try{Bo(y,"")}catch(ve){Tt(a,a.return,ve)}}if(g&4&&(y=a.stateNode,y!=null)){var x=a.memoizedProps,C=f!==null?f.memoizedProps:x,L=a.type,j=a.updateQueue;if(a.updateQueue=null,j!==null)try{L==="input"&&x.type==="radio"&&x.name!=null&&Pa(y,x),Da(L,C);var Q=Da(L,x);for(C=0;C<j.length;C+=2){var ie=j[C],oe=j[C+1];ie==="style"?ba(y,oe):ie==="dangerouslySetInnerHTML"?Bl(y,oe):ie==="children"?Bo(y,oe):V(y,ie,oe,Q)}switch(L){case"input":Vo(y,x);break;case"textarea":Vl(y,x);break;case"select":var ne=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var fe=x.value;fe!=null?pn(y,!!x.multiple,fe,!1):ne!==!!x.multiple&&(x.defaultValue!=null?pn(y,!!x.multiple,x.defaultValue,!0):pn(y,!!x.multiple,x.multiple?[]:"",!1))}y[Nu]=x}catch(ve){Tt(a,a.return,ve)}}break;case 6:if(En(u,a),Xn(a),g&4){if(a.stateNode===null)throw Error(t(162));y=a.stateNode,x=a.memoizedProps;try{y.nodeValue=x}catch(ve){Tt(a,a.return,ve)}}break;case 3:if(En(u,a),Xn(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{qi(u.containerInfo)}catch(ve){Tt(a,a.return,ve)}break;case 4:En(u,a),Xn(a);break;case 13:En(u,a),Xn(a),y=a.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(Od=gt())),g&4&&Yg(a);break;case 22:if(ie=f!==null&&f.memoizedState!==null,a.mode&1?(yr=(Q=yr)||ie,En(u,a),yr=Q):En(u,a),Xn(a),g&8192){if(Q=a.memoizedState!==null,(a.stateNode.isHidden=Q)&&!ie&&(a.mode&1)!==0)for(pe=a,ie=a.child;ie!==null;){for(oe=pe=ie;pe!==null;){switch(ne=pe,fe=ne.child,ne.tag){case 0:case 11:case 14:case 15:Uu(4,ne,ne.return);break;case 1:hs(ne,ne.return);var ge=ne.stateNode;if(typeof ge.componentWillUnmount=="function"){g=ne,f=ne.return;try{u=g,ge.props=u.memoizedProps,ge.state=u.memoizedState,ge.componentWillUnmount()}catch(ve){Tt(g,f,ve)}}break;case 5:hs(ne,ne.return);break;case 22:if(ne.memoizedState!==null){ev(oe);continue}}fe!==null?(fe.return=ne,pe=fe):ev(oe)}ie=ie.sibling}e:for(ie=null,oe=a;;){if(oe.tag===5){if(ie===null){ie=oe;try{y=oe.stateNode,Q?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(L=oe.stateNode,j=oe.memoizedProps.style,C=j!=null&&j.hasOwnProperty("display")?j.display:null,L.style.display=Vi("display",C))}catch(ve){Tt(a,a.return,ve)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=Q?"":oe.memoizedProps}catch(ve){Tt(a,a.return,ve)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===a)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===a)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===a)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:En(u,a),Xn(a),g&4&&Yg(a);break;case 21:break;default:En(u,a),Xn(a)}}function Xn(a){var u=a.flags;if(u&2){try{e:{for(var f=a.return;f!==null;){if(qg(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var y=g.stateNode;g.flags&32&&(Bo(y,""),g.flags&=-33);var x=Xg(a);Rd(a,x,y);break;case 3:case 4:var C=g.stateNode.containerInfo,L=Xg(a);Td(a,L,C);break;default:throw Error(t(161))}}catch(j){Tt(a,a.return,j)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function Tw(a,u,f){pe=a,Zg(a)}function Zg(a,u,f){for(var g=(a.mode&1)!==0;pe!==null;){var y=pe,x=y.child;if(y.tag===22&&g){var C=y.memoizedState!==null||kc;if(!C){var L=y.alternate,j=L!==null&&L.memoizedState!==null||yr;L=kc;var Q=yr;if(kc=C,(yr=j)&&!Q)for(pe=y;pe!==null;)C=pe,j=C.child,C.tag===22&&C.memoizedState!==null?tv(y):j!==null?(j.return=C,pe=j):tv(y);for(;x!==null;)pe=x,Zg(x),x=x.sibling;pe=y,kc=L,yr=Q}Jg(a)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,pe=x):Jg(a)}}function Jg(a){for(;pe!==null;){var u=pe;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:yr||Mc(5,u);break;case 1:var g=u.stateNode;if(u.flags&4&&!yr)if(f===null)g.componentDidMount();else{var y=u.elementType===u.type?f.memoizedProps:xn(u.type,f.memoizedProps);g.componentDidUpdate(y,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=u.updateQueue;x!==null&&eg(u,x,g);break;case 3:var C=u.updateQueue;if(C!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}eg(u,C,f)}break;case 5:var L=u.stateNode;if(f===null&&u.flags&4){f=L;var j=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&f.focus();break;case"img":j.src&&(f.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Q=u.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&qi(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yr||u.flags&512&&Sd(u)}catch(ne){Tt(u,u.return,ne)}}if(u===a){pe=null;break}if(f=u.sibling,f!==null){f.return=u.return,pe=f;break}pe=u.return}}function ev(a){for(;pe!==null;){var u=pe;if(u===a){pe=null;break}var f=u.sibling;if(f!==null){f.return=u.return,pe=f;break}pe=u.return}}function tv(a){for(;pe!==null;){var u=pe;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{Mc(4,u)}catch(j){Tt(u,f,j)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var y=u.return;try{g.componentDidMount()}catch(j){Tt(u,y,j)}}var x=u.return;try{Sd(u)}catch(j){Tt(u,x,j)}break;case 5:var C=u.return;try{Sd(u)}catch(j){Tt(u,C,j)}}}catch(j){Tt(u,u.return,j)}if(u===a){pe=null;break}var L=u.sibling;if(L!==null){L.return=u.return,pe=L;break}pe=u.return}}var Rw=Math.ceil,Lc=z.ReactCurrentDispatcher,Nd=z.ReactCurrentOwner,an=z.ReactCurrentBatchConfig,qe=0,Qt=null,Mt=null,sr=0,Qr=0,ds=Zi(0),jt=0,ju=null,aa=0,Fc=0,Pd=0,zu=null,Mr=null,Od=0,ps=1/0,Ei=null,Vc=!1,bd=null,io=null,Bc=!1,oo=null,Uc=0,Hu=0,Dd=null,jc=-1,zc=0;function Rr(){return(qe&6)!==0?gt():jc!==-1?jc:jc=gt()}function ao(a){return(a.mode&1)===0?1:(qe&2)!==0&&sr!==0?sr&-sr:fw.transition!==null?(zc===0&&(zc=cu()),zc):(a=He,a!==0||(a=window.event,a=a===void 0?16:Ha(a.type)),a)}function An(a,u,f,g){if(50<Hu)throw Hu=0,Dd=null,Error(t(185));Xo(a,f,g),((qe&2)===0||a!==Qt)&&(a===Qt&&((qe&2)===0&&(Fc|=f),jt===4&&so(a,sr)),Lr(a,g),f===1&&qe===0&&(u.mode&1)===0&&(ps=gt()+500,vc&&eo()))}function Lr(a,u){var f=a.callbackNode;qo(a,u);var g=li(a,a===Qt?sr:0);if(g===0)f!==null&&La(f),a.callbackNode=null,a.callbackPriority=0;else if(u=g&-g,a.callbackPriority!==u){if(f!=null&&La(f),u===1)a.tag===0?cw(nv.bind(null,a)):zp(nv.bind(null,a)),aw(function(){(qe&6)===0&&eo()}),f=null;else{switch(Mn(g)){case 1:f=Fa;break;case 4:f=su;break;case 16:f=Ho;break;case 536870912:f=Va;break;default:f=Ho}f=fv(f,rv.bind(null,a))}a.callbackPriority=u,a.callbackNode=f}}function rv(a,u){if(jc=-1,zc=0,(qe&6)!==0)throw Error(t(327));var f=a.callbackNode;if(gs()&&a.callbackNode!==f)return null;var g=li(a,a===Qt?sr:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||u)u=Hc(a,g);else{u=g;var y=qe;qe|=2;var x=ov();(Qt!==a||sr!==u)&&(Ei=null,ps=gt()+500,ua(a,u));do try{Ow();break}catch(L){iv(a,L)}while(!0);Qh(),Lc.current=x,qe=y,Mt!==null?u=0:(Qt=null,sr=0,u=jt)}if(u!==0){if(u===2&&(y=lu(a),y!==0&&(g=y,u=kd(a,y))),u===1)throw f=ju,ua(a,0),so(a,g),Lr(a,gt()),f;if(u===6)so(a,g);else{if(y=a.current.alternate,(g&30)===0&&!Nw(y)&&(u=Hc(a,g),u===2&&(x=lu(a),x!==0&&(g=x,u=kd(a,x))),u===1))throw f=ju,ua(a,0),so(a,g),Lr(a,gt()),f;switch(a.finishedWork=y,a.finishedLanes=g,u){case 0:case 1:throw Error(t(345));case 2:la(a,Mr,Ei);break;case 3:if(so(a,g),(g&130023424)===g&&(u=Od+500-gt(),10<u)){if(li(a,0)!==0)break;if(y=a.suspendedLanes,(y&g)!==g){Rr(),a.pingedLanes|=a.suspendedLanes&y;break}a.timeoutHandle=Uh(la.bind(null,a,Mr,Ei),u);break}la(a,Mr,Ei);break;case 4:if(so(a,g),(g&4194240)===g)break;for(u=a.eventTimes,y=-1;0<g;){var C=31-Gr(g);x=1<<C,C=u[C],C>y&&(y=C),g&=~x}if(g=y,g=gt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Rw(g/1960))-g,10<g){a.timeoutHandle=Uh(la.bind(null,a,Mr,Ei),g);break}la(a,Mr,Ei);break;case 5:la(a,Mr,Ei);break;default:throw Error(t(329))}}}return Lr(a,gt()),a.callbackNode===f?rv.bind(null,a):null}function kd(a,u){var f=zu;return a.current.memoizedState.isDehydrated&&(ua(a,u).flags|=256),a=Hc(a,u),a!==2&&(u=Mr,Mr=f,u!==null&&Md(u)),a}function Md(a){Mr===null?Mr=a:Mr.push.apply(Mr,a)}function Nw(a){for(var u=a;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var y=f[g],x=y.getSnapshot;y=y.value;try{if(!yn(x(),y))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function so(a,u){for(u&=~Pd,u&=~Fc,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var f=31-Gr(u),g=1<<f;a[f]=-1,u&=~g}}function nv(a){if((qe&6)!==0)throw Error(t(327));gs();var u=li(a,0);if((u&1)===0)return Lr(a,gt()),null;var f=Hc(a,u);if(a.tag!==0&&f===2){var g=lu(a);g!==0&&(u=g,f=kd(a,g))}if(f===1)throw f=ju,ua(a,0),so(a,u),Lr(a,gt()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,la(a,Mr,Ei),Lr(a,gt()),null}function Ld(a,u){var f=qe;qe|=1;try{return a(u)}finally{qe=f,qe===0&&(ps=gt()+500,vc&&eo())}}function sa(a){oo!==null&&oo.tag===0&&(qe&6)===0&&gs();var u=qe;qe|=1;var f=an.transition,g=He;try{if(an.transition=null,He=1,a)return a()}finally{He=g,an.transition=f,qe=u,(qe&6)===0&&eo()}}function Fd(){Qr=ds.current,mt(ds)}function ua(a,u){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,ow(f)),Mt!==null)for(f=Mt.return;f!==null;){var g=f;switch($h(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pc();break;case 3:cs(),mt(br),mt(gr),od();break;case 5:nd(g);break;case 4:cs();break;case 13:mt(At);break;case 19:mt(At);break;case 10:Zh(g.type._context);break;case 22:case 23:Fd()}f=f.return}if(Qt=a,Mt=a=uo(a.current,null),sr=Qr=u,jt=0,ju=null,Pd=Fc=aa=0,Mr=zu=null,na!==null){for(u=0;u<na.length;u++)if(f=na[u],g=f.interleaved,g!==null){f.interleaved=null;var y=g.next,x=f.pending;if(x!==null){var C=x.next;x.next=y,g.next=C}f.pending=g}na=null}return a}function iv(a,u){do{var f=Mt;try{if(Qh(),Sc.current=Pc,Tc){for(var g=It.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}Tc=!1}if(oa=0,Yt=Ut=It=null,Mu=!1,Lu=0,Nd.current=null,f===null||f.return===null){jt=1,ju=u,Mt=null;break}e:{var x=a,C=f.return,L=f,j=u;if(u=sr,L.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Q=j,ie=L,oe=ie.tag;if((ie.mode&1)===0&&(oe===0||oe===11||oe===15)){var ne=ie.alternate;ne?(ie.updateQueue=ne.updateQueue,ie.memoizedState=ne.memoizedState,ie.lanes=ne.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=Ng(C);if(fe!==null){fe.flags&=-257,Pg(fe,C,L,x,u),fe.mode&1&&Rg(x,Q,u),u=fe,j=Q;var ge=u.updateQueue;if(ge===null){var ve=new Set;ve.add(j),u.updateQueue=ve}else ge.add(j);break e}else{if((u&1)===0){Rg(x,Q,u),Vd();break e}j=Error(t(426))}}else if(wt&&L.mode&1){var Pt=Ng(C);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Pg(Pt,C,L,x,u),Kh(fs(j,L));break e}}x=j=fs(j,L),jt!==4&&(jt=2),zu===null?zu=[x]:zu.push(x),x=C;do{switch(x.tag){case 3:x.flags|=65536,u&=-u,x.lanes|=u;var q=Sg(x,j,u);Jp(x,q);break e;case 1:L=j;var W=x.type,Y=x.stateNode;if((x.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(io===null||!io.has(Y)))){x.flags|=65536,u&=-u,x.lanes|=u;var ae=Tg(x,L,u);Jp(x,ae);break e}}x=x.return}while(x!==null)}sv(f)}catch(ye){u=ye,Mt===f&&f!==null&&(Mt=f=f.return);continue}break}while(!0)}function ov(){var a=Lc.current;return Lc.current=Pc,a===null?Pc:a}function Vd(){(jt===0||jt===3||jt===2)&&(jt=4),Qt===null||(aa&268435455)===0&&(Fc&268435455)===0||so(Qt,sr)}function Hc(a,u){var f=qe;qe|=2;var g=ov();(Qt!==a||sr!==u)&&(Ei=null,ua(a,u));do try{Pw();break}catch(y){iv(a,y)}while(!0);if(Qh(),qe=f,Lc.current=g,Mt!==null)throw Error(t(261));return Qt=null,sr=0,jt}function Pw(){for(;Mt!==null;)av(Mt)}function Ow(){for(;Mt!==null&&!zo();)av(Mt)}function av(a){var u=cv(a.alternate,a,Qr);a.memoizedProps=a.pendingProps,u===null?sv(a):Mt=u,Nd.current=null}function sv(a){var u=a;do{var f=u.alternate;if(a=u.return,(u.flags&32768)===0){if(f=Aw(f,u,Qr),f!==null){Mt=f;return}}else{if(f=Iw(f,u),f!==null){f.flags&=32767,Mt=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{jt=6,Mt=null;return}}if(u=u.sibling,u!==null){Mt=u;return}Mt=u=a}while(u!==null);jt===0&&(jt=5)}function la(a,u,f){var g=He,y=an.transition;try{an.transition=null,He=1,bw(a,u,f,g)}finally{an.transition=y,He=g}return null}function bw(a,u,f,g){do gs();while(oo!==null);if((qe&6)!==0)throw Error(t(327));f=a.finishedWork;var y=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var x=f.lanes|f.childLanes;if(Ih(a,x),a===Qt&&(Mt=Qt=null,sr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Bc||(Bc=!0,fv(Ho,function(){return gs(),null})),x=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||x){x=an.transition,an.transition=null;var C=He;He=1;var L=qe;qe|=4,Nd.current=null,Sw(a,f),Qg(f,a),Zx(Vh),hi=!!Fh,Vh=Fh=null,a.current=f,Tw(f),ui(),qe=L,He=C,an.transition=x}else a.current=f;if(Bc&&(Bc=!1,oo=a,Uc=y),x=a.pendingLanes,x===0&&(io=null),Yl(f.stateNode),Lr(a,gt()),u!==null)for(g=a.onRecoverableError,f=0;f<u.length;f++)y=u[f],g(y.value,{componentStack:y.stack,digest:y.digest});if(Vc)throw Vc=!1,a=bd,bd=null,a;return(Uc&1)!==0&&a.tag!==0&&gs(),x=a.pendingLanes,(x&1)!==0?a===Dd?Hu++:(Hu=0,Dd=a):Hu=0,eo(),null}function gs(){if(oo!==null){var a=Mn(Uc),u=an.transition,f=He;try{if(an.transition=null,He=16>a?16:a,oo===null)var g=!1;else{if(a=oo,oo=null,Uc=0,(qe&6)!==0)throw Error(t(331));var y=qe;for(qe|=4,pe=a.current;pe!==null;){var x=pe,C=x.child;if((pe.flags&16)!==0){var L=x.deletions;if(L!==null){for(var j=0;j<L.length;j++){var Q=L[j];for(pe=Q;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:Uu(8,ie,x)}var oe=ie.child;if(oe!==null)oe.return=ie,pe=oe;else for(;pe!==null;){ie=pe;var ne=ie.sibling,fe=ie.return;if($g(ie),ie===Q){pe=null;break}if(ne!==null){ne.return=fe,pe=ne;break}pe=fe}}}var ge=x.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var Pt=ve.sibling;ve.sibling=null,ve=Pt}while(ve!==null)}}pe=x}}if((x.subtreeFlags&2064)!==0&&C!==null)C.return=x,pe=C;else e:for(;pe!==null;){if(x=pe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Uu(9,x,x.return)}var q=x.sibling;if(q!==null){q.return=x.return,pe=q;break e}pe=x.return}}var W=a.current;for(pe=W;pe!==null;){C=pe;var Y=C.child;if((C.subtreeFlags&2064)!==0&&Y!==null)Y.return=C,pe=Y;else e:for(C=W;pe!==null;){if(L=pe,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Mc(9,L)}}catch(ye){Tt(L,L.return,ye)}if(L===C){pe=null;break e}var ae=L.sibling;if(ae!==null){ae.return=L.return,pe=ae;break e}pe=L.return}}if(qe=y,eo(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(Go,a)}catch{}g=!0}return g}finally{He=f,an.transition=u}}return!1}function uv(a,u,f){u=fs(f,u),u=Sg(a,u,1),a=ro(a,u,1),u=Rr(),a!==null&&(Xo(a,1,u),Lr(a,u))}function Tt(a,u,f){if(a.tag===3)uv(a,a,f);else for(;u!==null;){if(u.tag===3){uv(u,a,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(io===null||!io.has(g))){a=fs(f,a),a=Tg(u,a,1),u=ro(u,a,1),a=Rr(),u!==null&&(Xo(u,1,a),Lr(u,a));break}}u=u.return}}function Dw(a,u,f){var g=a.pingCache;g!==null&&g.delete(u),u=Rr(),a.pingedLanes|=a.suspendedLanes&f,Qt===a&&(sr&f)===f&&(jt===4||jt===3&&(sr&130023424)===sr&&500>gt()-Od?ua(a,0):Pd|=f),Lr(a,u)}function lv(a,u){u===0&&((a.mode&1)===0?u=1:(u=Gi,Gi<<=1,(Gi&130023424)===0&&(Gi=4194304)));var f=Rr();a=_i(a,u),a!==null&&(Xo(a,u,f),Lr(a,f))}function kw(a){var u=a.memoizedState,f=0;u!==null&&(f=u.retryLane),lv(a,f)}function Mw(a,u){var f=0;switch(a.tag){case 13:var g=a.stateNode,y=a.memoizedState;y!==null&&(f=y.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(u),lv(a,f)}var cv;cv=function(a,u,f){if(a!==null)if(a.memoizedProps!==u.pendingProps||br.current)kr=!0;else{if((a.lanes&f)===0&&(u.flags&128)===0)return kr=!1,Ew(a,u,f);kr=(a.flags&131072)!==0}else kr=!1,wt&&(u.flags&1048576)!==0&&Hp(u,yc,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;Dc(a,u),a=u.pendingProps;var y=ns(u,gr.current);ls(u,f),y=ud(null,u,g,a,y,f);var x=ld();return u.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Dr(g)?(x=!0,gc(u)):x=!1,u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,td(u),y.updater=Oc,u.stateNode=y,y._reactInternals=u,gd(u,g,a,f),u=_d(null,u,g,!0,x,f)):(u.tag=0,wt&&x&&Wh(u),Tr(null,u,y,f),u=u.child),u;case 16:g=u.elementType;e:{switch(Dc(a,u),a=u.pendingProps,y=g._init,g=y(g._payload),u.type=g,y=u.tag=Fw(g),a=xn(g,a),y){case 0:u=yd(null,u,g,a,f);break e;case 1:u=Lg(null,u,g,a,f);break e;case 11:u=Og(null,u,g,a,f);break e;case 14:u=bg(null,u,g,xn(g.type,a),f);break e}throw Error(t(306,g,""))}return u;case 0:return g=u.type,y=u.pendingProps,y=u.elementType===g?y:xn(g,y),yd(a,u,g,y,f);case 1:return g=u.type,y=u.pendingProps,y=u.elementType===g?y:xn(g,y),Lg(a,u,g,y,f);case 3:e:{if(Fg(u),a===null)throw Error(t(387));g=u.pendingProps,x=u.memoizedState,y=x.element,Zp(a,u),Ic(u,g,null,f);var C=u.memoizedState;if(g=C.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){y=fs(Error(t(423)),u),u=Vg(a,u,g,f,y);break e}else if(g!==y){y=fs(Error(t(424)),u),u=Vg(a,u,g,f,y);break e}else for(Yr=Qi(u.stateNode.containerInfo.firstChild),Kr=u,wt=!0,_n=null,f=Yp(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(as(),g===y){u=wi(a,u,f);break e}Tr(a,u,g,f)}u=u.child}return u;case 5:return tg(u),a===null&&Xh(u),g=u.type,y=u.pendingProps,x=a!==null?a.memoizedProps:null,C=y.children,Bh(g,y)?C=null:x!==null&&Bh(g,x)&&(u.flags|=32),Mg(a,u),Tr(a,u,C,f),u.child;case 6:return a===null&&Xh(u),null;case 13:return Bg(a,u,f);case 4:return rd(u,u.stateNode.containerInfo),g=u.pendingProps,a===null?u.child=ss(u,null,g,f):Tr(a,u,g,f),u.child;case 11:return g=u.type,y=u.pendingProps,y=u.elementType===g?y:xn(g,y),Og(a,u,g,y,f);case 7:return Tr(a,u,u.pendingProps,f),u.child;case 8:return Tr(a,u,u.pendingProps.children,f),u.child;case 12:return Tr(a,u,u.pendingProps.children,f),u.child;case 10:e:{if(g=u.type._context,y=u.pendingProps,x=u.memoizedProps,C=y.value,ft(wc,g._currentValue),g._currentValue=C,x!==null)if(yn(x.value,C)){if(x.children===y.children&&!br.current){u=wi(a,u,f);break e}}else for(x=u.child,x!==null&&(x.return=u);x!==null;){var L=x.dependencies;if(L!==null){C=x.child;for(var j=L.firstContext;j!==null;){if(j.context===g){if(x.tag===1){j=xi(-1,f&-f),j.tag=2;var Q=x.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?j.next=j:(j.next=ie.next,ie.next=j),Q.pending=j}}x.lanes|=f,j=x.alternate,j!==null&&(j.lanes|=f),Jh(x.return,f,u),L.lanes|=f;break}j=j.next}}else if(x.tag===10)C=x.type===u.type?null:x.child;else if(x.tag===18){if(C=x.return,C===null)throw Error(t(341));C.lanes|=f,L=C.alternate,L!==null&&(L.lanes|=f),Jh(C,f,u),C=x.sibling}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===u){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}Tr(a,u,y.children,f),u=u.child}return u;case 9:return y=u.type,g=u.pendingProps.children,ls(u,f),y=nn(y),g=g(y),u.flags|=1,Tr(a,u,g,f),u.child;case 14:return g=u.type,y=xn(g,u.pendingProps),y=xn(g.type,y),bg(a,u,g,y,f);case 15:return Dg(a,u,u.type,u.pendingProps,f);case 17:return g=u.type,y=u.pendingProps,y=u.elementType===g?y:xn(g,y),Dc(a,u),u.tag=1,Dr(g)?(a=!0,gc(u)):a=!1,ls(u,f),Ig(u,g,y),gd(u,g,y,f),_d(null,u,g,!0,a,f);case 19:return jg(a,u,f);case 22:return kg(a,u,f)}throw Error(t(156,u.tag))};function fv(a,u){return au(a,u)}function Lw(a,u,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(a,u,f,g){return new Lw(a,u,f,g)}function Bd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Fw(a){if(typeof a=="function")return Bd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===H)return 11;if(a===ut)return 14}return 2}function uo(a,u){var f=a.alternate;return f===null?(f=sn(a.tag,u,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=u,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,u=a.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Gc(a,u,f,g,y,x){var C=2;if(g=a,typeof a=="function")Bd(a)&&(C=1);else if(typeof a=="string")C=5;else e:switch(a){case R:return ca(f.children,y,x,u);case N:C=8,y|=8;break;case k:return a=sn(12,f,u,y|2),a.elementType=k,a.lanes=x,a;case M:return a=sn(13,f,u,y),a.elementType=M,a.lanes=x,a;case ke:return a=sn(19,f,u,y),a.elementType=ke,a.lanes=x,a;case at:return Wc(f,y,x,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case F:C=10;break e;case U:C=9;break e;case H:C=11;break e;case ut:C=14;break e;case bt:C=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=sn(C,f,u,y),u.elementType=a,u.type=g,u.lanes=x,u}function ca(a,u,f,g){return a=sn(7,a,g,u),a.lanes=f,a}function Wc(a,u,f,g){return a=sn(22,a,g,u),a.elementType=at,a.lanes=f,a.stateNode={isHidden:!1},a}function Ud(a,u,f){return a=sn(6,a,null,u),a.lanes=f,a}function jd(a,u,f){return u=sn(4,a.children!==null?a.children:[],a.key,u),u.lanes=f,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function Vw(a,u,f,g,y){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=g,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function zd(a,u,f,g,y,x,C,L,j){return a=new Vw(a,u,f,L,j),u===1?(u=1,x===!0&&(u|=8)):u=0,x=sn(3,null,null,u),a.current=x,x.stateNode=a,x.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},td(x),a}function Bw(a,u,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:g==null?null:""+g,children:a,containerInfo:u,implementation:f}}function hv(a){if(!a)return Ji;a=a._reactInternals;e:{if(vn(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Dr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(Dr(f))return Up(a,f,u)}return u}function dv(a,u,f,g,y,x,C,L,j){return a=zd(f,g,!0,a,y,x,C,L,j),a.context=hv(null),f=a.current,g=Rr(),y=ao(f),x=xi(g,y),x.callback=u??null,ro(f,x,y),a.current.lanes=y,Xo(a,y,g),Lr(a,g),a}function $c(a,u,f,g){var y=u.current,x=Rr(),C=ao(y);return f=hv(f),u.context===null?u.context=f:u.pendingContext=f,u=xi(x,C),u.payload={element:a},g=g===void 0?null:g,g!==null&&(u.callback=g),a=ro(y,u,C),a!==null&&(An(a,y,C,x),Ac(a,y,C)),C}function qc(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function pv(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<u?f:u}}function Hd(a,u){pv(a,u),(a=a.alternate)&&pv(a,u)}function Uw(){return null}var gv=typeof reportError=="function"?reportError:function(a){console.error(a)};function Gd(a){this._internalRoot=a}Xc.prototype.render=Gd.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));$c(a,u,null,null)},Xc.prototype.unmount=Gd.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;sa(function(){$c(null,a,null,null)}),u[gi]=null}};function Xc(a){this._internalRoot=a}Xc.prototype.unstable_scheduleHydration=function(a){if(a){var u=gu();a={blockedOn:null,target:a,priority:u};for(var f=0;f<Wr.length&&u!==0&&u<Wr[f].priority;f++);Wr.splice(f,0,a),f===0&&ja(a)}};function Wd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Kc(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function vv(){}function jw(a,u,f,g,y){if(y){if(typeof g=="function"){var x=g;g=function(){var Q=qc(C);x.call(Q)}}var C=dv(u,g,a,0,null,!1,!1,"",vv);return a._reactRootContainer=C,a[gi]=C.current,Tu(a.nodeType===8?a.parentNode:a),sa(),C}for(;y=a.lastChild;)a.removeChild(y);if(typeof g=="function"){var L=g;g=function(){var Q=qc(j);L.call(Q)}}var j=zd(a,0,!1,null,null,!1,!1,"",vv);return a._reactRootContainer=j,a[gi]=j.current,Tu(a.nodeType===8?a.parentNode:a),sa(function(){$c(u,j,f,g)}),j}function Yc(a,u,f,g,y){var x=f._reactRootContainer;if(x){var C=x;if(typeof y=="function"){var L=y;y=function(){var j=qc(C);L.call(j)}}$c(u,C,a,y)}else C=jw(f,u,a,y,g);return qc(C)}du=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var f=Qe(u.pendingLanes);f!==0&&(hu(u,f|1),Lr(u,gt()),(qe&6)===0&&(ps=gt()+500,eo()))}break;case 13:sa(function(){var g=_i(a,1);if(g!==null){var y=Rr();An(g,a,1,y)}}),Hd(a,1)}},Ba=function(a){if(a.tag===13){var u=_i(a,134217728);if(u!==null){var f=Rr();An(u,a,134217728,f)}Hd(a,134217728)}},pu=function(a){if(a.tag===13){var u=ao(a),f=_i(a,u);if(f!==null){var g=Rr();An(f,a,u,g)}Hd(a,u)}},gu=function(){return He},vu=function(a,u){var f=He;try{return He=a,u()}finally{He=f}},oi=function(a,u,f){switch(u){case"input":if(Vo(a,f),u=f.name,f.type==="radio"&&u!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==a&&g.form===a.form){var y=dc(g);if(!y)throw Error(t(90));Qs(g),Vo(g,y)}}}break;case"textarea":Vl(a,f);break;case"select":u=f.value,u!=null&&pn(a,!!f.multiple,u,!1)}},jl=Ld,zl=sa;var zw={usingClientEntryPoint:!1,Events:[Pu,ts,dc,Ui,ji,Ld]},Gu={findFiberByHostInstance:Jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hw={bundleType:Gu.bundleType,version:Gu.version,rendererPackageName:Gu.rendererPackageName,rendererConfig:Gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Kl(a),a===null?null:a.stateNode},findFiberByHostInstance:Gu.findFiberByHostInstance||Uw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Go=Qc.inject(Hw),Hr=Qc}catch{}}return Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zw,Fr.createPortal=function(a,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wd(u))throw Error(t(200));return Bw(a,u,null,f)},Fr.createRoot=function(a,u){if(!Wd(a))throw Error(t(299));var f=!1,g="",y=gv;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(y=u.onRecoverableError)),u=zd(a,1,!1,null,null,f,!1,g,y),a[gi]=u.current,Tu(a.nodeType===8?a.parentNode:a),new Gd(u)},Fr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Kl(u),a=a===null?null:a.stateNode,a},Fr.flushSync=function(a){return sa(a)},Fr.hydrate=function(a,u,f){if(!Kc(u))throw Error(t(200));return Yc(null,a,u,!0,f)},Fr.hydrateRoot=function(a,u,f){if(!Wd(a))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,y=!1,x="",C=gv;if(f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onRecoverableError!==void 0&&(C=f.onRecoverableError)),u=dv(u,null,a,1,f??null,y,!1,x,C),a[gi]=u.current,Tu(a),g)for(a=0;a<g.length;a++)f=g[a],y=f._getVersion,y=y(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,y]:u.mutableSourceEagerHydrationData.push(f,y);return new Xc(u)},Fr.render=function(a,u,f){if(!Kc(u))throw Error(t(200));return Yc(null,a,u,!1,f)},Fr.unmountComponentAtNode=function(a){if(!Kc(a))throw Error(t(40));return a._reactRootContainer?(sa(function(){Yc(null,null,a,!1,function(){a._reactRootContainer=null,a[gi]=null})}),!0):!1},Fr.unstable_batchedUpdates=Ld,Fr.unstable_renderSubtreeIntoContainer=function(a,u,f,g){if(!Kc(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Yc(a,u,f,!1,g)},Fr.version="18.3.1-next-f1338f8080-20240426",Fr}var Iv;function Zw(){if(Iv)return Xd.exports;Iv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xd.exports=Qw(),Xd.exports}var Cv;function Jw(){if(Cv)return Zc;Cv=1;var r=Zw();return Zc.createRoot=r.createRoot,Zc.hydrateRoot=r.hydrateRoot,Zc}var eE=Jw(),_e=Xf();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Sv=r=>{const e=rE(r);return e.charAt(0).toUpperCase()+e.slice(1)},zy=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=_e.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:s,...l},c)=>_e.createElement("svg",{ref:c,...nE,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:zy("lucide",i),...l},[...s.map(([h,p])=>_e.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(r,e)=>{const t=_e.forwardRef(({className:n,...i},o)=>_e.createElement(iE,{ref:o,iconNode:e,className:zy(`lucide-${tE(Sv(r))}`,`lucide-${r}`,n),...i}));return t.displayName=Sv(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Tv=Et("bell",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sE=Et("check",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Sf=Et("chef-hat",uE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cE=Et("circle-alert",lE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hE=Et("circle-help",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],pE=Et("house",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vE=Et("info",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tf=Et("loader-circle",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],y0=Et("lock",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],xE=Et("log-out",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Hy=Et("mail",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],AE=Et("moon",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],CE=Et("phone",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Gy=Et("plus",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Wy=Et("scan",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],_0=Et("search",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PE=Et("settings",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],bE=Et("shopping-cart",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],kE=Et("sparkles",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],LE=Et("sun",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],s1=Et("trash-2",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],BE=Et("trending-up",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],u1=Et("user",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$y=Et("x",jE),zE=()=>{};var Rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},HE=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=r[t++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=r[t++],s=r[t++],l=r[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const o=r[t++],s=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Xy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const o=r[i],s=i+1<r.length,l=s?r[i+1]:0,c=i+2<r.length,h=c?r[i+2]:0,p=o>>2,v=(o&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;c||(_=64,s||(m=64)),n.push(t[p],t[v],t[m],t[_])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(qy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const o=t[r.charAt(i++)],l=i<r.length?t[r.charAt(i)]:0;++i;const h=i<r.length?t[r.charAt(i)]:64;++i;const v=i<r.length?t[r.charAt(i)]:64;if(++i,o==null||l==null||h==null||v==null)throw new GE;const m=o<<2|l>>4;if(n.push(m),h!==64){const _=l<<4&240|h>>2;if(n.push(_),v!==64){const E=h<<6&192|v;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WE=function(r){const e=qy(r);return Xy.encodeByteArray(e,!0)},Rf=function(r){return WE(r).replace(/\./g,"")},Ky=function(r){try{return Xy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=()=>$E().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof Rv>"u")return;const r=Rv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},KE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ky(r[1]);return e&&JSON.parse(e)},Kf=()=>{try{return zE()||qE()||XE()||KE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Yy=r=>Kf()?.emulatorHosts?.[r],YE=r=>{const e=Yy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Qy=()=>Kf()?.config,Zy=r=>Kf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jy(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Rf(JSON.stringify(t)),Rf(JSON.stringify(s)),""].join(".")}const il={};function JE(){const r={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?r.emulator.push(e):r.prod.push(e);return r}function eA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Nv=!1;function e2(r,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||il[r]===e||il[r]||Nv)return;il[r]=e;function t(m){return`__firebase__banner__${m}`}const n="__firebase__banner",o=JE().prod.length>0;function s(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Nv=!0,s()},m}function p(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function v(){const m=eA(n),_=t("text"),E=document.getElementById(_)||document.createElement("span"),I=t("learnmore"),S=document.getElementById(I)||document.createElement("a"),D=t("preprendIcon"),O=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const V=m.element;l(V),p(S,I);const z=h();c(O,D),V.append(O,E,S,z),document.body.appendChild(V)}o?(E.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function rA(){const r=Kf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function oA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aA(){const r=Ir();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uA(){try{return typeof indexedDB=="object"}catch{return!1}}function lA(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="FirebaseError";class bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=cA,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?fA(o,n):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new bi(i,l,n)}}function fA(r,e){return r.replace(hA,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const hA=/\{\$([^}]+)}/g;function dA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ya(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const o=r[i],s=e[i];if(Pv(o)&&Pv(s)){if(!ya(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Pv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ku(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Yu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function pA(r,e){const t=new gA(r,e);return t.subscribe.bind(t)}class gA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");vA(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Qd),i.error===void 0&&(i.error=Qd),i.complete===void 0&&(i.complete=Qd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vA(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r){return r&&r._delegate?r._delegate:r}class _a{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new QE;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_A(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);n===l&&s.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(r){return r===da?void 0:r}function _A(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const wA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},EA=Ue.INFO,AA={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},IA=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=AA[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class l1{constructor(e){this.name=e,this._logLevel=EA,this._logHandler=IA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const CA=(r,e)=>e.some(t=>r instanceof t);let Ov,bv;function SA(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t2=new WeakMap,x0=new WeakMap,r2=new WeakMap,Zd=new WeakMap,c1=new WeakMap;function RA(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",o),r.removeEventListener("error",s)},o=()=>{t(xo(r.result)),i()},s=()=>{n(r.error),i()};r.addEventListener("success",o),r.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&t2.set(t,r)}).catch(()=>{}),c1.set(e,r),e}function NA(r){if(x0.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",s),r.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",o),r.addEventListener("error",s),r.addEventListener("abort",s)});x0.set(r,e)}let w0={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return x0.get(r);if(e==="objectStoreNames")return r.objectStoreNames||r2.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function PA(r){w0=r(w0)}function OA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Jd(this),e,...t);return r2.set(n,e.sort?e.sort():[e]),xo(n)}:TA().includes(r)?function(...e){return r.apply(Jd(this),e),xo(t2.get(this))}:function(...e){return xo(r.apply(Jd(this),e))}}function bA(r){return typeof r=="function"?OA(r):(r instanceof IDBTransaction&&NA(r),CA(r,SA())?new Proxy(r,w0):r)}function xo(r){if(r instanceof IDBRequest)return RA(r);if(Zd.has(r))return Zd.get(r);const e=bA(r);return e!==r&&(Zd.set(r,e),c1.set(e,r)),e}const Jd=r=>c1.get(r);function DA(r,e,{blocked:t,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(r,e),l=xo(s);return n&&s.addEventListener("upgradeneeded",c=>{n(xo(s.result),c.oldVersion,c.newVersion,xo(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const kA=["get","getKey","getAll","getAllKeys","count"],MA=["put","add","delete","clear"],e0=new Map;function Dv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(e0.get(e))return e0.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=MA.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||kA.includes(t)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let h=c.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&c.done]))[0]};return e0.set(e,o),o}PA(r=>({...r,get:(e,t,n)=>Dv(e,t)||r.get(e,t,n),has:(e,t)=>!!Dv(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FA(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function FA(r){return r.getComponent()?.type==="VERSION"}const E0="@firebase/app",kv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new l1("@firebase/app"),VA="@firebase/app-compat",BA="@firebase/analytics-compat",UA="@firebase/analytics",jA="@firebase/app-check-compat",zA="@firebase/app-check",HA="@firebase/auth",GA="@firebase/auth-compat",WA="@firebase/database",$A="@firebase/data-connect",qA="@firebase/database-compat",XA="@firebase/functions",KA="@firebase/functions-compat",YA="@firebase/installations",QA="@firebase/installations-compat",ZA="@firebase/messaging",JA="@firebase/messaging-compat",eI="@firebase/performance",tI="@firebase/performance-compat",rI="@firebase/remote-config",nI="@firebase/remote-config-compat",iI="@firebase/storage",oI="@firebase/storage-compat",aI="@firebase/firestore",sI="@firebase/ai",uI="@firebase/firestore-compat",lI="firebase",cI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="[DEFAULT]",fI={[E0]:"fire-core",[VA]:"fire-core-compat",[UA]:"fire-analytics",[BA]:"fire-analytics-compat",[zA]:"fire-app-check",[jA]:"fire-app-check-compat",[HA]:"fire-auth",[GA]:"fire-auth-compat",[WA]:"fire-rtdb",[$A]:"fire-data-connect",[qA]:"fire-rtdb-compat",[XA]:"fire-fn",[KA]:"fire-fn-compat",[YA]:"fire-iid",[QA]:"fire-iid-compat",[ZA]:"fire-fcm",[JA]:"fire-fcm-compat",[eI]:"fire-perf",[tI]:"fire-perf-compat",[rI]:"fire-rc",[nI]:"fire-rc-compat",[iI]:"fire-gcs",[oI]:"fire-gcs-compat",[aI]:"fire-fst",[uI]:"fire-fst-compat",[sI]:"fire-vertex","fire-js":"fire-js",[lI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Map,hI=new Map,I0=new Map;function Mv(r,e){try{r.container.addComponent(e)}catch(t){Ti.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Os(r){const e=r.name;if(I0.has(e))return Ti.debug(`There were multiple attempts to register component ${e}.`),!1;I0.set(e,r);for(const t of Nf.values())Mv(t,r);for(const t of hI.values())Mv(t,r);return!0}function f1(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ln(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wo=new Al("app","Firebase",dI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=cI;function n2(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:A0,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw wo.create("bad-app-name",{appName:String(i)});if(t||(t=Qy()),!t)throw wo.create("no-options");const o=Nf.get(i);if(o){if(ya(t,o.options)&&ya(n,o.config))return o;throw wo.create("duplicate-app",{appName:i})}const s=new xA(i);for(const c of I0.values())s.addComponent(c);const l=new pI(t,n,s);return Nf.set(i,l),l}function i2(r=A0){const e=Nf.get(r);if(!e&&r===A0&&Qy())return n2();if(!e)throw wo.create("no-app",{appName:r});return e}function Eo(r,e,t){let n=fI[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ti.warn(s.join(" "));return}Os(new _a(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebase-heartbeat-database",vI=1,dl="firebase-heartbeat-store";let t0=null;function o2(){return t0||(t0=DA(gI,vI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(r=>{throw wo.create("idb-open",{originalErrorMessage:r.message})})),t0}async function mI(r){try{const t=(await o2()).transaction(dl),n=await t.objectStore(dl).get(a2(r));return await t.done,n}catch(e){if(e instanceof bi)Ti.warn(e.message);else{const t=wo.create("idb-get",{originalErrorMessage:e?.message});Ti.warn(t.message)}}}async function Lv(r,e){try{const n=(await o2()).transaction(dl,"readwrite");await n.objectStore(dl).put(e,a2(r)),await n.done}catch(t){if(t instanceof bi)Ti.warn(t.message);else{const n=wo.create("idb-set",{originalErrorMessage:t?.message});Ti.warn(n.message)}}}function a2(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1024,_I=30;class xI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EI(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Fv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>_I){const i=AI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ti.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fv(),{heartbeatsToSend:t,unsentEntries:n}=wI(this._heartbeatsCache.heartbeats),i=Rf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ti.warn(e),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function wI(r,e=yI){const t=[];let n=r.slice();for(const i of r){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Vv(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Vv(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class EI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uA()?lA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Lv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Lv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Vv(r){return Rf(JSON.stringify({version:2,heartbeats:r})).length}function AI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(r){Os(new _a("platform-logger",e=>new LA(e),"PRIVATE")),Os(new _a("heartbeat",e=>new xI(e),"PRIVATE")),Eo(E0,kv,r),Eo(E0,kv,"esm2020"),Eo("fire-js","")}II("");function s2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CI=s2,u2=new Al("auth","Firebase",s2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new l1("@firebase/auth");function SI(r,...e){Pf.logLevel<=Ue.WARN&&Pf.warn(`Auth (${zs}): ${r}`,...e)}function hf(r,...e){Pf.logLevel<=Ue.ERROR&&Pf.error(`Auth (${zs}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(r,...e){throw h1(r,...e)}function Qn(r,...e){return h1(r,...e)}function l2(r,e,t){const n={...CI(),[e]:t};return new Al("auth","Firebase",n).create(e,{appName:r.name})}function Ci(r){return l2(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h1(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return u2.create(r,...e)}function Se(r,e,...t){if(!r)throw h1(e,...t)}function Ai(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hf(e),new Error(e)}function Ri(r,e){r||Ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){return typeof self<"u"&&self.location?.href||""}function TI(){return Bv()==="http:"||Bv()==="https:"}function Bv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TI()||iA()||"connection"in navigator)?navigator.onLine:!0}function NI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=tA()||oA()}get(){return RI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(r,e){Ri(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bI=new Cl(3e4,6e4);function Mo(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Di(r,e,t,n,i={}){return f2(r,i,async()=>{let o={},s={};n&&(e==="GET"?s=n:o={body:JSON.stringify(n)});const l=Il({key:r.config.apiKey,...s}).slice(1),c=await r._getAdditionalHeaders();c["Content-Type"]="application/json",r.languageCode&&(c["X-Firebase-Locale"]=r.languageCode);const h={method:e,headers:c,...o};return nA()||(h.referrerPolicy="no-referrer"),r.emulatorConfig&&js(r.emulatorConfig.host)&&(h.credentials="include"),c2.fetch()(await h2(r,r.config.apiHost,t,l),h)})}async function f2(r,e,t){r._canInitEmulator=!1;const n={...PI,...e};try{const i=new kI(r),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Jc(r,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(r,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Jc(r,"email-already-in-use",s);if(c==="USER_DISABLED")throw Jc(r,"user-disabled",s);const p=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw l2(r,p,h);Nn(r,p)}}catch(i){if(i instanceof bi)throw i;Nn(r,"network-request-failed",{message:String(i)})}}async function Sl(r,e,t,n,i={}){const o=await Di(r,e,t,n,i);return"mfaPendingCredential"in o&&Nn(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function h2(r,e,t,n){const i=`${e}${t}?${n}`,o=r,s=o.config.emulator?d1(r.config,i):`${r.config.apiScheme}://${i}`;return OI.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function DI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Qn(this.auth,"network-request-failed")),bI.get())})}}function Jc(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Qn(r,e,n);return i.customData._tokenResponse=t,i}function Uv(r){return r!==void 0&&r.enterprise!==void 0}class MI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return DI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function LI(r,e){return Di(r,"GET","/v2/recaptchaConfig",Mo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(r,e){return Di(r,"POST","/v1/accounts:delete",e)}async function Of(r,e){return Di(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VI(r,e=!1){const t=Kt(r),n=await t.getIdToken(e),i=p1(n);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:n,authTime:ol(r0(i.auth_time)),issuedAtTime:ol(r0(i.iat)),expirationTime:ol(r0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function r0(r){return Number(r)*1e3}function p1(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ky(t);return i?JSON.parse(i):(hf("Failed to decode base64 JWT payload"),null)}catch(i){return hf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jv(r){const e=p1(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof bi&&BI(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function BI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(r){const e=r.auth,t=await r.getIdToken(),n=await bs(r,Of(e,{idToken:t}));Se(n?.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const o=i.providerUserInfo?.length?d2(i.providerUserInfo):[],s=zI(r.providerData,o),l=r.isAnonymous,c=!(r.email&&i.passwordHash)&&!s?.length,h=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new S0(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(r,p)}async function jI(r){const e=Kt(r);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zI(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function d2(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(r,e){const t=await f2(r,{},async()=>{const n=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=r.config,s=await h2(r,i,"/v1/token",`key=${o}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return r.emulatorConfig&&js(r.emulatorConfig.host)&&(c.credentials="include"),c2.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GI(r,e){return Di(r,"POST","/v2/accounts:revokeToken",Mo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=jv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await HI(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:o}=t,s=new Is;return n&&(Se(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Se(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Se(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Is,this.toJSON())}_performRefresh(){return Ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Rn{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new UI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new S0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bs(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VI(this,e)}reload(){return jI(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await bs(this,FI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:v,emailVerified:m,isAnonymous:_,providerData:E,stsTokenManager:I}=t;Se(v&&I,e,"internal-error");const S=Is.fromJSON(this.name,I);Se(typeof v=="string",e,"internal-error"),co(n,e.name),co(i,e.name),Se(typeof m=="boolean",e,"internal-error"),Se(typeof _=="boolean",e,"internal-error"),co(o,e.name),co(s,e.name),co(l,e.name),co(c,e.name),co(h,e.name),co(p,e.name);const D=new Rn({uid:v,auth:e,email:i,emailVerified:m,displayName:n,isAnonymous:_,photoURL:s,phoneNumber:o,tenantId:l,stsTokenManager:S,createdAt:h,lastLoginAt:p});return E&&Array.isArray(E)&&(D.providerData=E.map(O=>({...O}))),c&&(D._redirectEventId=c),D}static async _fromIdTokenResponse(e,t,n=!1){const i=new Is;i.updateFromServerResponse(t);const o=new Rn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await bf(o),o}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Se(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?d2(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,l=new Is;l.updateFromIdToken(n);const c=new Rn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new S0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function Ii(r){Ri(r instanceof Function,"Expected a class definition");let e=zv.get(r);return e?(Ri(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}p2.type="NONE";const Hv=p2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(r,e,t){return`firebase:${r}:${e}:${t}`}class Cs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=df(this.userKey,i.apiKey,o),this.fullPersistenceKey=df("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Of(this.auth,{idToken:e}).catch(()=>{});return t?Rn._fromGetAccountInfoResponse(this.auth,t,e):null}return Rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Cs(Ii(Hv),e,n);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=i[0]||Ii(Hv);const s=df(n,e.config.apiKey,e.name);let l=null;for(const h of t)try{const p=await h._get(s);if(p){let v;if(typeof p=="string"){const m=await Of(e,{idToken:p}).catch(()=>{});if(!m)break;v=await Rn._fromGetAccountInfoResponse(e,m,p)}else v=Rn._fromJSON(e,p);h!==o&&(l=v),o=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Cs(o,e,n):(o=c[0],l&&await o._set(s,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==o)try{await h._remove(s)}catch{}})),new Cs(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x2(e))return"Blackberry";if(w2(e))return"Webos";if(v2(e))return"Safari";if((e.includes("chrome/")||m2(e))&&!e.includes("edge/"))return"Chrome";if(_2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function g2(r=Ir()){return/firefox\//i.test(r)}function v2(r=Ir()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m2(r=Ir()){return/crios\//i.test(r)}function y2(r=Ir()){return/iemobile/i.test(r)}function _2(r=Ir()){return/android/i.test(r)}function x2(r=Ir()){return/blackberry/i.test(r)}function w2(r=Ir()){return/webos/i.test(r)}function g1(r=Ir()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function WI(r=Ir()){return g1(r)&&!!window.navigator?.standalone}function $I(){return aA()&&document.documentMode===10}function E2(r=Ir()){return g1(r)||_2(r)||w2(r)||x2(r)||/windows phone/i.test(r)||y2(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(r,e=[]){let t;switch(r){case"Browser":t=Gv(Ir());break;case"Worker":t=`${Gv(Ir())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zs}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((s,l)=>{try{const c=e(o);s(c)}catch(c){l(c)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(r,e={}){return Di(r,"GET","/v2/passwordPolicy",Mo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=6;class YI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wv(this),this.idTokenSubscription=new Wv(this),this.beforeStateQueue=new qI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ii(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Cs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Of(this,{idToken:e}),n=await Rn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=n?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===s)&&l?.user&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(Ci(this));const t=e?Kt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XI(this),t=new YI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await GI(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ii(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Cs.create(this,[Ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,n,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ia(r){return Kt(r)}class Wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=pA(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZI(r){Yf=r}function I2(r){return Yf.loadJS(r)}function JI(){return Yf.recaptchaEnterpriseScript}function e3(){return Yf.gapiScript}function t3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class r3{constructor(){this.enterprise=new n3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class n3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const i3="recaptcha-enterprise",C2="NO_RECAPTCHA";class o3{constructor(e){this.type=i3,this.auth=Ia(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,l)=>{LI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new MI(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,s(h.siteKey)}}).catch(c=>{l(c)})})}function i(o,s,l){const c=window.grecaptcha;Uv(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{s(h)}).catch(()=>{s(C2)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r3().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{n(this.auth).then(l=>{if(!t&&Uv(window.grecaptcha))i(l,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=JI();c.length!==0&&(c+=l),I2(c).then(()=>{i(l,o,s)}).catch(h=>{s(h)})}}).catch(l=>{s(l)})})}}async function $v(r,e,t,n=!1,i=!1){const o=new o3(r);let s;if(i)s=C2;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function T0(r,e,t,n,i){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $v(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await $v(r,e,t,t==="getOobCode");return n(r,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(r,e){const t=f1(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(ya(o,e??{}))return i;Nn(i,"already-initialized")}return t.initialize({options:e})}function s3(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(Ii);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function u3(r,e,t){const n=Ia(r);Se(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=S2(e),{host:s,port:l}=l3(e),c=l===null?"":`:${l}`,h={url:`${o}//${s}${c}/`},p=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Se(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Se(ya(h,n.config.emulator)&&ya(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,js(s)?(Jy(`${o}//${s}${c}`),e2("Auth",!0)):c3()}function S2(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function l3(r){const e=S2(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:qv(n.substr(o.length+1))}}else{const[o,s]=n.split(":");return{host:o,port:qv(s)}}}function qv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function c3(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ai("not implemented")}_getIdTokenResponse(e){return Ai("not implemented")}_linkToIdToken(e,t){return Ai("not implemented")}_getReauthenticationResolver(e){return Ai("not implemented")}}async function f3(r,e){return Di(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(r,e){return Sl(r,"POST","/v1/accounts:signInWithPassword",Mo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(r,e){return Sl(r,"POST","/v1/accounts:signInWithEmailLink",Mo(r,e))}async function p3(r,e){return Sl(r,"POST","/v1/accounts:signInWithEmailLink",Mo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends v1{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new pl(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new pl(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return T0(e,t,"signInWithPassword",h3);case"emailLink":return d3(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return T0(e,n,"signUpPassword",f3);case"emailLink":return p3(e,{idToken:t,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(r,e){return Sl(r,"POST","/v1/accounts:signInWithIdp",Mo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="http://localhost";class xa extends v1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...o}=t;if(!n||!i)return null;const s=new xa(n,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Ss(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ss(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ss(e,t)}buildRequest(){const e={requestUri:g3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Il(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m3(r){const e=Ku(Yu(r)).link,t=e?Ku(Yu(e)).deep_link_id:null,n=Ku(Yu(r)).deep_link_id;return(n?Ku(Yu(n)).link:null)||n||t||e||r}class m1{constructor(e){const t=Ku(Yu(e)),n=t.apiKey??null,i=t.oobCode??null,o=v3(t.mode??null);Se(n&&i&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=m3(e);try{return new m1(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.providerId=Hs.PROVIDER_ID}static credential(e,t){return pl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=m1.parseLink(t);return Se(n,"argument-error"),pl._fromEmailAndCode(e,n.code,n.tenantId)}}Hs.PROVIDER_ID="password";Hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends T2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Tl{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return vo.credential(t,n)}catch{return null}}}vo.GOOGLE_SIGN_IN_METHOD="google.com";vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Tl{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.GITHUB_SIGN_IN_METHOD="github.com";mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Tl{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return yo.credential(t,n)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(r,e){return Sl(r,"POST","/v1/accounts:signUp",Mo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const o=await Rn._fromIdTokenResponse(e,n,i),s=Xv(n);return new wa({user:o,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Xv(n);return new wa({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Xv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends bi{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Df(e,t,n,i)}}function R2(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(r,o,e,n):o})}async function _3(r,e,t=!1){const n=await bs(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return wa._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(r,e,t=!1){const{auth:n}=r;if(ln(n.app))return Promise.reject(Ci(n));const i="reauthenticate";try{const o=await bs(r,R2(n,i,e,r),t);Se(o.idToken,n,"internal-error");const s=p1(o.idToken);Se(s,n,"internal-error");const{sub:l}=s;return Se(r.uid===l,n,"user-mismatch"),wa._forOperation(r,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nn(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(r,e,t=!1){if(ln(r.app))return Promise.reject(Ci(r));const n="signIn",i=await R2(r,n,e),o=await wa._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(o.user),o}async function w3(r,e){return N2(Ia(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(r){const e=Ia(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E3(r,e,t){if(ln(r.app))return Promise.reject(Ci(r));const n=Ia(r),s=await T0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y3).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&P2(r),c}),l=await wa._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(l.user),l}function A3(r,e,t){return ln(r.app)?Promise.reject(Ci(r)):w3(Kt(r),Hs.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&P2(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(r,e){return Di(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Kt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},s=await bs(n,I3(n.auth,o));n.displayName=s.displayName||null,n.photoURL=s.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(s)}function S3(r,e,t,n){return Kt(r).onIdTokenChanged(e,t,n)}function T3(r,e,t){return Kt(r).beforeAuthStateChanged(e,t)}function R3(r,e,t,n){return Kt(r).onAuthStateChanged(e,t,n)}function N3(r){return Kt(r).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=1e3,O3=10;class b2 extends O2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!t&&this.localCache[n]===s||this.notifyListeners(n,s)},o=this.storage.getItem(n);$I()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,O3):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},P3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}b2.type="LOCAL";const b3=b2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2 extends O2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}D2.type="SESSION";const k2=D2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Qf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(s).map(async h=>h(t.origin,o)),c=await D3(l);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,c)=>{const h=y1("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(v){const m=v;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(p),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function M3(r){Zn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function L3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F3(){return navigator?.serviceWorker?.controller||null}function V3(){return M2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="firebaseLocalStorageDb",B3=1,Mf="firebaseLocalStorage",F2="fbase_key";class Rl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zf(r,e){return r.transaction([Mf],e?"readwrite":"readonly").objectStore(Mf)}function U3(){const r=indexedDB.deleteDatabase(L2);return new Rl(r).toPromise()}function R0(){const r=indexedDB.open(L2,B3);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Mf,{keyPath:F2})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Mf)?e(n):(n.close(),await U3(),e(await R0()))})})}async function Kv(r,e,t){const n=Zf(r,!0).put({[F2]:e,value:t});return new Rl(n).toPromise()}async function j3(r,e){const t=Zf(r,!1).get(e),n=await new Rl(t).toPromise();return n===void 0?null:n.value}function Yv(r,e){const t=Zf(r,!0).delete(e);return new Rl(t).toPromise()}const z3=800,H3=3;class V2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>H3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(V3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await L3(),!this.activeServiceWorker)return;this.sender=new k3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R0();return await Kv(e,kf,"1"),await Yv(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kv(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>j3(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Yv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Zf(i,!1).getAll();return new Rl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V2.type="LOCAL";const G3=V2;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(r,e){return e?Ii(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends v1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ss(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $3(r){return N2(r.auth,new _1(r),r.bypassAuthState)}function q3(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),x3(t,new _1(r),r.bypassAuthState)}async function X3(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),_3(t,new _1(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $3;case"linkViaPopup":case"linkViaRedirect":return X3;case"reauthViaPopup":case"reauthViaRedirect":return q3;default:Nn(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=new Cl(2e3,1e4);class ws extends B2{constructor(e,t,n,i,o){super(e,t,i,o),this.provider=n,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=y1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K3.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="pendingRedirect",pf=new Map;class Q3 extends B2{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const n=await Z3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z3(r,e){const t=tC(e),n=eC(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function J3(r,e){pf.set(r._key(),e)}function eC(r){return Ii(r._redirectPersistence)}function tC(r){return df(Y3,r.config.apiKey,r.name)}async function rC(r,e,t=!1){if(ln(r.app))return Promise.reject(Ci(r));const n=Ia(r),i=W3(n,e),s=await new Q3(n,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=600*1e3;class iC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!U2(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Qn(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qv(e))}saveEventToCache(e){this.cachedEventUids.add(Qv(e)),this.lastProcessedEventTime=Date.now()}}function Qv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function U2({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function oC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U2(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(r,e={}){return Di(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uC=/^https?/;async function lC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await aC(r);for(const t of e)try{if(cC(t))return}catch{}Nn(r,"unauthorized-domain")}function cC(r){const e=C0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const s=new URL(r);return s.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===n}if(!uC.test(t))return!1;if(sC.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Cl(3e4,6e4);function Zv(){const r=Zn().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function hC(r){return new Promise((e,t)=>{function n(){Zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zv(),t(Qn(r,"network-request-failed"))},timeout:fC.get()})}if(Zn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zn().gapi?.load)n();else{const i=t3("iframefcb");return Zn()[i]=()=>{gapi.load?n():t(Qn(r,"network-request-failed"))},I2(`${e3()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw gf=null,e})}let gf=null;function dC(r){return gf=gf||hC(r),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Cl(5e3,15e3),gC="__/auth/iframe",vC="emulator/auth/iframe",mC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _C(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?d1(e,vC):`https://${r.config.authDomain}/${gC}`,n={apiKey:e.apiKey,appName:r.name,v:zs},i=yC.get(r.config.apiHost);i&&(n.eid=i);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Il(n).slice(1)}`}async function xC(r){const e=await dC(r),t=Zn().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:_C(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mC,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const s=Qn(r,"network-request-failed"),l=Zn().setTimeout(()=>{o(s)},pC.get());function c(){Zn().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EC=500,AC=600,IC="_blank",CC="http://localhost";class Jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SC(r,e,t,n=EC,i=AC){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...wC,width:n.toString(),height:i.toString(),top:o,left:s},h=Ir().toLowerCase();t&&(l=m2(h)?IC:t),g2(h)&&(e=e||CC,c.scrollbars="yes");const p=Object.entries(c).reduce((m,[_,E])=>`${m}${_}=${E},`,"");if(WI(h)&&l!=="_self")return TC(e||"",l),new Jv(null);const v=window.open(e||"",l,p);Se(v,r,"popup-blocked");try{v.focus()}catch{}return new Jv(v)}function TC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="__/auth/handler",NC="emulator/auth/handler",PC=encodeURIComponent("fac");async function em(r,e,t,n,i,o){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const s={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:zs,eventId:i};if(e instanceof T2){e.setDefaultLanguage(r.languageCode),s.providerId=e.providerId||"",dA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))s[p]=v}if(e instanceof Tl){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(s.scopes=p.join(","))}r.tenantId&&(s.tid=r.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await r._getAppCheckToken(),h=c?`#${PC}=${encodeURIComponent(c)}`:"";return`${OC(r)}?${Il(l).slice(1)}${h}`}function OC({config:r}){return r.emulator?d1(r,NC):`https://${r.authDomain}/${RC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="webStorageSupport";class bC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k2,this._completeRedirectFn=rC,this._overrideRedirectResult=J3}async _openPopup(e,t,n,i){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await em(e,t,n,C0(),i);return SC(e,o,y1())}async _openRedirect(e,t,n,i){await this._originValidation(e);const o=await em(e,t,n,C0(),i);return M3(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ri(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await xC(e),n=new iC(e);return t.register("authEvent",i=>(Se(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(n0,{type:n0},i=>{const o=i?.[0]?.[n0];o!==void 0&&t(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return E2()||v2()||g1()}}const DC=bC;var tm="@firebase/auth",rm="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LC(r){Os(new _a("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=n.options;Se(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:s,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A2(r)},h=new QI(n,i,o,c);return s3(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Os(new _a("auth-internal",e=>{const t=Ia(e.getProvider("auth").getImmediate());return(n=>new kC(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Eo(tm,rm,MC(r)),Eo(tm,rm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=300,VC=Zy("authIdTokenMaxAge")||FC;let nm=null;const BC=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>VC)return;const i=t?.token;nm!==i&&(nm=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UC(r=i2()){const e=f1(r,"auth");if(e.isInitialized())return e.getImmediate();const t=a3(r,{popupRedirectResolver:DC,persistence:[G3,b3,k2]}),n=Zy("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const s=BC(o.toString());T3(t,s,()=>s(t.currentUser)),S3(t,l=>s(l))}}const i=Yy("auth");return i&&u3(t,`http://${i}`),t}function jC(){return document.getElementsByTagName("head")?.[0]??document}ZI({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const o=Qn("internal-error");o.customData=i,t(o)},n.type="text/javascript",n.charset="UTF-8",jC().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LC("Browser");var zC="firebase",HC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eo(zC,HC,"app");var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,j2;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function k(){}k.prototype=N.prototype,R.F=N.prototype,R.prototype=new k,R.prototype.constructor=R,R.D=function(F,U,H){for(var M=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];return N.prototype[U].apply(F,M)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,N,k){k||(k=0);const F=Array(16);if(typeof N=="string")for(var U=0;U<16;++U)F[U]=N.charCodeAt(k++)|N.charCodeAt(k++)<<8|N.charCodeAt(k++)<<16|N.charCodeAt(k++)<<24;else for(U=0;U<16;++U)F[U]=N[k++]|N[k++]<<8|N[k++]<<16|N[k++]<<24;N=R.g[0],k=R.g[1],U=R.g[2];let H=R.g[3],M;M=N+(H^k&(U^H))+F[0]+3614090360&4294967295,N=k+(M<<7&4294967295|M>>>25),M=H+(U^N&(k^U))+F[1]+3905402710&4294967295,H=N+(M<<12&4294967295|M>>>20),M=U+(k^H&(N^k))+F[2]+606105819&4294967295,U=H+(M<<17&4294967295|M>>>15),M=k+(N^U&(H^N))+F[3]+3250441966&4294967295,k=U+(M<<22&4294967295|M>>>10),M=N+(H^k&(U^H))+F[4]+4118548399&4294967295,N=k+(M<<7&4294967295|M>>>25),M=H+(U^N&(k^U))+F[5]+1200080426&4294967295,H=N+(M<<12&4294967295|M>>>20),M=U+(k^H&(N^k))+F[6]+2821735955&4294967295,U=H+(M<<17&4294967295|M>>>15),M=k+(N^U&(H^N))+F[7]+4249261313&4294967295,k=U+(M<<22&4294967295|M>>>10),M=N+(H^k&(U^H))+F[8]+1770035416&4294967295,N=k+(M<<7&4294967295|M>>>25),M=H+(U^N&(k^U))+F[9]+2336552879&4294967295,H=N+(M<<12&4294967295|M>>>20),M=U+(k^H&(N^k))+F[10]+4294925233&4294967295,U=H+(M<<17&4294967295|M>>>15),M=k+(N^U&(H^N))+F[11]+2304563134&4294967295,k=U+(M<<22&4294967295|M>>>10),M=N+(H^k&(U^H))+F[12]+1804603682&4294967295,N=k+(M<<7&4294967295|M>>>25),M=H+(U^N&(k^U))+F[13]+4254626195&4294967295,H=N+(M<<12&4294967295|M>>>20),M=U+(k^H&(N^k))+F[14]+2792965006&4294967295,U=H+(M<<17&4294967295|M>>>15),M=k+(N^U&(H^N))+F[15]+1236535329&4294967295,k=U+(M<<22&4294967295|M>>>10),M=N+(U^H&(k^U))+F[1]+4129170786&4294967295,N=k+(M<<5&4294967295|M>>>27),M=H+(k^U&(N^k))+F[6]+3225465664&4294967295,H=N+(M<<9&4294967295|M>>>23),M=U+(N^k&(H^N))+F[11]+643717713&4294967295,U=H+(M<<14&4294967295|M>>>18),M=k+(H^N&(U^H))+F[0]+3921069994&4294967295,k=U+(M<<20&4294967295|M>>>12),M=N+(U^H&(k^U))+F[5]+3593408605&4294967295,N=k+(M<<5&4294967295|M>>>27),M=H+(k^U&(N^k))+F[10]+38016083&4294967295,H=N+(M<<9&4294967295|M>>>23),M=U+(N^k&(H^N))+F[15]+3634488961&4294967295,U=H+(M<<14&4294967295|M>>>18),M=k+(H^N&(U^H))+F[4]+3889429448&4294967295,k=U+(M<<20&4294967295|M>>>12),M=N+(U^H&(k^U))+F[9]+568446438&4294967295,N=k+(M<<5&4294967295|M>>>27),M=H+(k^U&(N^k))+F[14]+3275163606&4294967295,H=N+(M<<9&4294967295|M>>>23),M=U+(N^k&(H^N))+F[3]+4107603335&4294967295,U=H+(M<<14&4294967295|M>>>18),M=k+(H^N&(U^H))+F[8]+1163531501&4294967295,k=U+(M<<20&4294967295|M>>>12),M=N+(U^H&(k^U))+F[13]+2850285829&4294967295,N=k+(M<<5&4294967295|M>>>27),M=H+(k^U&(N^k))+F[2]+4243563512&4294967295,H=N+(M<<9&4294967295|M>>>23),M=U+(N^k&(H^N))+F[7]+1735328473&4294967295,U=H+(M<<14&4294967295|M>>>18),M=k+(H^N&(U^H))+F[12]+2368359562&4294967295,k=U+(M<<20&4294967295|M>>>12),M=N+(k^U^H)+F[5]+4294588738&4294967295,N=k+(M<<4&4294967295|M>>>28),M=H+(N^k^U)+F[8]+2272392833&4294967295,H=N+(M<<11&4294967295|M>>>21),M=U+(H^N^k)+F[11]+1839030562&4294967295,U=H+(M<<16&4294967295|M>>>16),M=k+(U^H^N)+F[14]+4259657740&4294967295,k=U+(M<<23&4294967295|M>>>9),M=N+(k^U^H)+F[1]+2763975236&4294967295,N=k+(M<<4&4294967295|M>>>28),M=H+(N^k^U)+F[4]+1272893353&4294967295,H=N+(M<<11&4294967295|M>>>21),M=U+(H^N^k)+F[7]+4139469664&4294967295,U=H+(M<<16&4294967295|M>>>16),M=k+(U^H^N)+F[10]+3200236656&4294967295,k=U+(M<<23&4294967295|M>>>9),M=N+(k^U^H)+F[13]+681279174&4294967295,N=k+(M<<4&4294967295|M>>>28),M=H+(N^k^U)+F[0]+3936430074&4294967295,H=N+(M<<11&4294967295|M>>>21),M=U+(H^N^k)+F[3]+3572445317&4294967295,U=H+(M<<16&4294967295|M>>>16),M=k+(U^H^N)+F[6]+76029189&4294967295,k=U+(M<<23&4294967295|M>>>9),M=N+(k^U^H)+F[9]+3654602809&4294967295,N=k+(M<<4&4294967295|M>>>28),M=H+(N^k^U)+F[12]+3873151461&4294967295,H=N+(M<<11&4294967295|M>>>21),M=U+(H^N^k)+F[15]+530742520&4294967295,U=H+(M<<16&4294967295|M>>>16),M=k+(U^H^N)+F[2]+3299628645&4294967295,k=U+(M<<23&4294967295|M>>>9),M=N+(U^(k|~H))+F[0]+4096336452&4294967295,N=k+(M<<6&4294967295|M>>>26),M=H+(k^(N|~U))+F[7]+1126891415&4294967295,H=N+(M<<10&4294967295|M>>>22),M=U+(N^(H|~k))+F[14]+2878612391&4294967295,U=H+(M<<15&4294967295|M>>>17),M=k+(H^(U|~N))+F[5]+4237533241&4294967295,k=U+(M<<21&4294967295|M>>>11),M=N+(U^(k|~H))+F[12]+1700485571&4294967295,N=k+(M<<6&4294967295|M>>>26),M=H+(k^(N|~U))+F[3]+2399980690&4294967295,H=N+(M<<10&4294967295|M>>>22),M=U+(N^(H|~k))+F[10]+4293915773&4294967295,U=H+(M<<15&4294967295|M>>>17),M=k+(H^(U|~N))+F[1]+2240044497&4294967295,k=U+(M<<21&4294967295|M>>>11),M=N+(U^(k|~H))+F[8]+1873313359&4294967295,N=k+(M<<6&4294967295|M>>>26),M=H+(k^(N|~U))+F[15]+4264355552&4294967295,H=N+(M<<10&4294967295|M>>>22),M=U+(N^(H|~k))+F[6]+2734768916&4294967295,U=H+(M<<15&4294967295|M>>>17),M=k+(H^(U|~N))+F[13]+1309151649&4294967295,k=U+(M<<21&4294967295|M>>>11),M=N+(U^(k|~H))+F[4]+4149444226&4294967295,N=k+(M<<6&4294967295|M>>>26),M=H+(k^(N|~U))+F[11]+3174756917&4294967295,H=N+(M<<10&4294967295|M>>>22),M=U+(N^(H|~k))+F[2]+718787259&4294967295,U=H+(M<<15&4294967295|M>>>17),M=k+(H^(U|~N))+F[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(U+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+H&4294967295}n.prototype.v=function(R,N){N===void 0&&(N=R.length);const k=N-this.blockSize,F=this.C;let U=this.h,H=0;for(;H<N;){if(U==0)for(;H<=k;)i(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<N;)if(F[U++]=R.charCodeAt(H++),U==this.blockSize){i(this,F),U=0;break}}else for(;H<N;)if(F[U++]=R[H++],U==this.blockSize){i(this,F),U=0;break}}this.h=U,this.o+=N},n.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;N=this.o*8;for(var k=R.length-8;k<R.length;++k)R[k]=N&255,N/=256;for(this.v(R),R=Array(16),N=0,k=0;k<4;++k)for(let F=0;F<32;F+=8)R[N++]=this.g[k]>>>F&255;return R};function o(R,N){var k=l;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=N(R)}function s(R,N){this.h=N;const k=[];let F=!0;for(let U=R.length-1;U>=0;U--){const H=R[U]|0;F&&H==N||(k[U]=H,F=!1)}this.g=k}var l={};function c(R){return-128<=R&&R<128?o(R,function(N){return new s([N|0],N<0?-1:0)}):new s([R|0],R<0?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return v;if(R<0)return S(h(-R));const N=[];let k=1;for(let F=0;R>=k;F++)N[F]=R/k|0,k*=4294967296;return new s(N,0)}function p(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return S(p(R.substring(1),N));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(N,8));let F=v;for(let H=0;H<R.length;H+=8){var U=Math.min(8,R.length-H);const M=parseInt(R.substring(H,H+U),N);U<8?(U=h(Math.pow(N,U)),F=F.j(U).add(h(M))):(F=F.j(k),F=F.add(h(M)))}return F}var v=c(0),m=c(1),_=c(16777216);r=s.prototype,r.m=function(){if(I(this))return-S(this).m();let R=0,N=1;for(let k=0;k<this.g.length;k++){const F=this.i(k);R+=(F>=0?F:4294967296+F)*N,N*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(I(this))return"-"+S(this).toString(R);const N=h(Math.pow(R,6));var k=this;let F="";for(;;){const U=z(k,N).g;k=D(k,U.j(N));let H=((k.g.length>0?k.g[0]:k.h)>>>0).toString(R);if(k=U,E(k))return H+F;for(;H.length<6;)H="0"+H;F=H+F}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(let N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function I(R){return R.h==-1}r.l=function(R){return R=D(this,R),I(R)?-1:E(R)?0:1};function S(R){const N=R.g.length,k=[];for(let F=0;F<N;F++)k[F]=~R.g[F];return new s(k,~R.h).add(m)}r.abs=function(){return I(this)?S(this):this},r.add=function(R){const N=Math.max(this.g.length,R.g.length),k=[];let F=0;for(let U=0;U<=N;U++){let H=F+(this.i(U)&65535)+(R.i(U)&65535),M=(H>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);F=M>>>16,H&=65535,M&=65535,k[U]=M<<16|H}return new s(k,k[k.length-1]&-2147483648?-1:0)};function D(R,N){return R.add(S(N))}r.j=function(R){if(E(this)||E(R))return v;if(I(this))return I(R)?S(this).j(S(R)):S(S(this).j(R));if(I(R))return S(this.j(S(R)));if(this.l(_)<0&&R.l(_)<0)return h(this.m()*R.m());const N=this.g.length+R.g.length,k=[];for(var F=0;F<2*N;F++)k[F]=0;for(F=0;F<this.g.length;F++)for(let U=0;U<R.g.length;U++){const H=this.i(F)>>>16,M=this.i(F)&65535,ke=R.i(U)>>>16,ut=R.i(U)&65535;k[2*F+2*U]+=M*ut,O(k,2*F+2*U),k[2*F+2*U+1]+=H*ut,O(k,2*F+2*U+1),k[2*F+2*U+1]+=M*ke,O(k,2*F+2*U+1),k[2*F+2*U+2]+=H*ke,O(k,2*F+2*U+2)}for(R=0;R<N;R++)k[R]=k[2*R+1]<<16|k[2*R];for(R=N;R<2*N;R++)k[R]=0;return new s(k,0)};function O(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function V(R,N){this.g=R,this.h=N}function z(R,N){if(E(N))throw Error("division by zero");if(E(R))return new V(v,v);if(I(R))return N=z(S(R),N),new V(S(N.g),S(N.h));if(I(N))return N=z(R,S(N)),new V(S(N.g),N.h);if(R.g.length>30){if(I(R)||I(N))throw Error("slowDivide_ only works with positive integers.");for(var k=m,F=N;F.l(R)<=0;)k=G(k),F=G(F);var U=B(k,1),H=B(F,1);for(F=B(F,2),k=B(k,2);!E(F);){var M=H.add(F);M.l(R)<=0&&(U=U.add(k),H=M),F=B(F,1),k=B(k,1)}return N=D(R,U.j(N)),new V(U,N)}for(U=v;R.l(N)>=0;){for(k=Math.max(1,Math.floor(R.m()/N.m())),F=Math.ceil(Math.log(k)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),H=h(k),M=H.j(N);I(M)||M.l(R)>0;)k-=F,H=h(k),M=H.j(N);E(H)&&(H=m),U=U.add(H),R=D(R,M)}return new V(U,R)}r.B=function(R){return z(this,R).h},r.and=function(R){const N=Math.max(this.g.length,R.g.length),k=[];for(let F=0;F<N;F++)k[F]=this.i(F)&R.i(F);return new s(k,this.h&R.h)},r.or=function(R){const N=Math.max(this.g.length,R.g.length),k=[];for(let F=0;F<N;F++)k[F]=this.i(F)|R.i(F);return new s(k,this.h|R.h)},r.xor=function(R){const N=Math.max(this.g.length,R.g.length),k=[];for(let F=0;F<N;F++)k[F]=this.i(F)^R.i(F);return new s(k,this.h^R.h)};function G(R){const N=R.g.length+1,k=[];for(let F=0;F<N;F++)k[F]=R.i(F)<<1|R.i(F-1)>>>31;return new s(k,R.h)}function B(R,N){const k=N>>5;N%=32;const F=R.g.length-k,U=[];for(let H=0;H<F;H++)U[H]=N>0?R.i(H+k)>>>N|R.i(H+k+1)<<32-N:R.i(H+k);return new s(U,R.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,j2=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Ao=s}).apply(typeof im<"u"?im:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z2,Qu,H2,vf,N0,G2,W2,$2;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var w=0;w<d.length;++w){var A=d[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=t(this);function i(d,w){if(w)e:{var A=n;d=d.split(".");for(var P=0;P<d.length-1;P++){var X=d[P];if(!(X in A))break e;A=A[X]}d=d[d.length-1],P=A[d],w=w(P),w!=P&&w!=null&&e(A,d,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(w){var A=[],P;for(P in w)Object.prototype.hasOwnProperty.call(w,P)&&A.push([P,w[P]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function c(d,w,A){return d.call.apply(d.bind,arguments)}function h(d,w,A){return h=c,h.apply(null,arguments)}function p(d,w){var A=Array.prototype.slice.call(arguments,1);return function(){var P=A.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function v(d,w){function A(){}A.prototype=w.prototype,d.Z=w.prototype,d.prototype=new A,d.prototype.constructor=d,d.Ob=function(P,X,Z){for(var se=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)se[Pe-2]=arguments[Pe];return w.prototype[X].apply(P,se)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const w=d.length;if(w>0){const A=Array(w);for(let P=0;P<w;P++)A[P]=d[P];return A}return[]}function E(d,w){for(let P=1;P<arguments.length;P++){const X=arguments[P];var A=typeof X;if(A=A!="object"?A:X?Array.isArray(X)?"array":A:"null",A=="array"||A=="object"&&typeof X.length=="number"){A=d.length||0;const Z=X.length||0;d.length=A+Z;for(let se=0;se<Z;se++)d[A+se]=X[se]}else d.push(X)}}class I{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function S(d){s.setTimeout(()=>{throw d},0)}function D(){var d=R;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class O{constructor(){this.h=this.g=null}add(w,A){const P=V.get();P.set(w,A),this.h?this.h.next=P:this.g=P,this.h=P}}var V=new I(()=>new z,d=>d.reset());class z{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let G,B=!1,R=new O,N=()=>{const d=Promise.resolve(void 0);G=()=>{d.then(k)}};function k(){for(var d;d=D();){try{d.h.call(d.g)}catch(A){S(A)}var w=V;w.j(d),w.h<100&&(w.h++,d.next=w.g,w.g=d)}B=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const A=()=>{};s.addEventListener("test",A,w),s.removeEventListener("test",A,w)}catch{}return d})();function M(d){return/^[\s\xa0]*$/.test(d)}function ke(d,w){U.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,w)}v(ke,U),ke.prototype.init=function(d,w){const A=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget,w||(A=="mouseover"?w=d.fromElement:A=="mouseout"&&(w=d.toElement)),this.relatedTarget=w,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),bt=0;function at(d,w,A,P,X){this.listener=d,this.proxy=null,this.src=w,this.type=A,this.capture=!!P,this.ha=X,this.key=++bt,this.da=this.fa=!1}function le(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function we(d,w,A){for(const P in d)w.call(A,d[P],P,d)}function de(d,w){for(const A in d)w.call(void 0,d[A],A,d)}function $(d){const w={};for(const A in d)w[A]=d[A];return w}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(d,w){let A,P;for(let X=1;X<arguments.length;X++){P=arguments[X];for(A in P)d[A]=P[A];for(let Z=0;Z<re.length;Z++)A=re[Z],Object.prototype.hasOwnProperty.call(P,A)&&(d[A]=P[A])}}function De(d){this.src=d,this.g={},this.h=0}De.prototype.add=function(d,w,A,P,X){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const se=Be(d,w,P,X);return se>-1?(w=d[se],A||(w.fa=!1)):(w=new at(w,this.src,Z,!!P,X),w.fa=A,d.push(w)),w};function Ve(d,w){const A=w.type;if(A in d.g){var P=d.g[A],X=Array.prototype.indexOf.call(P,w,void 0),Z;(Z=X>=0)&&Array.prototype.splice.call(P,X,1),Z&&(le(w),d.g[A].length==0&&(delete d.g[A],d.h--))}}function Be(d,w,A,P){for(let X=0;X<d.length;++X){const Z=d[X];if(!Z.da&&Z.listener==w&&Z.capture==!!A&&Z.ha==P)return X}return-1}var et="closure_lm_"+(Math.random()*1e6|0),$e={};function lt(d,w,A,P,X){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)lt(d,w[Z],A,P,X);return null}return A=Zs(A),d&&d[ut]?d.J(w,A,l(P)?!!P.capture:!1,X):Sr(d,w,A,!1,P,X)}function Sr(d,w,A,P,X,Z){if(!w)throw Error("Invalid event type");const se=l(X)?!!X.capture:!!X;let Pe=Pa(d);if(Pe||(d[et]=Pe=new De(d)),A=Pe.add(w,A,P,se,Z),A.proxy)return A;if(P=Ra(),A.proxy=P,P.src=d,P.listener=A,d.addEventListener)H||(X=se),X===void 0&&(X=!1),d.addEventListener(w.toString(),P,X);else if(d.attachEvent)d.attachEvent(Na(w.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Ra(){function d(A){return w.call(d.src,d.listener,A)}const w=Fl;return d}function Qs(d,w,A,P,X){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)Qs(d,w[Z],A,P,X);else P=l(P)?!!P.capture:!!P,A=Zs(A),d&&d[ut]?(d=d.i,Z=String(w).toString(),Z in d.g&&(w=d.g[Z],A=Be(w,A,P,X),A>-1&&(le(w[A]),Array.prototype.splice.call(w,A,1),w.length==0&&(delete d.g[Z],d.h--)))):d&&(d=Pa(d))&&(w=d.g[w.toString()],d=-1,w&&(d=Be(w,A,P,X)),(A=d>-1?w[d]:null)&&ki(A))}function ki(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[ut])Ve(w.i,d);else{var A=d.type,P=d.proxy;w.removeEventListener?w.removeEventListener(A,P,d.capture):w.detachEvent?w.detachEvent(Na(A),P):w.addListener&&w.removeListener&&w.removeListener(P),(A=Pa(w))?(Ve(A,d),A.h==0&&(A.src=null,w[et]=null)):le(d)}}}function Na(d){return d in $e?$e[d]:$e[d]="on"+d}function Fl(d,w){if(d.da)d=!0;else{w=new ke(w,this);const A=d.listener,P=d.ha||d.src;d.fa&&ki(d),d=A.call(P,w)}return d}function Pa(d){return d=d[et],d instanceof De?d:null}var Vo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zs(d){return typeof d=="function"?d:(d[Vo]||(d[Vo]=function(w){return d.handleEvent(w)}),d[Vo])}function Dt(){F.call(this),this.i=new De(this),this.M=this,this.G=null}v(Dt,F),Dt.prototype[ut]=!0,Dt.prototype.removeEventListener=function(d,w,A,P){Qs(this,d,w,A,P)};function Rt(d,w){var A,P=d.G;if(P)for(A=[];P;P=P.G)A.push(P);if(d=d.M,P=w.type||w,typeof w=="string")w=new U(w,d);else if(w instanceof U)w.target=w.target||d;else{var X=w;w=new U(P,d),be(w,X)}X=!0;let Z,se;if(A)for(se=A.length-1;se>=0;se--)Z=w.g=A[se],X=pn(Z,P,!0,w)&&X;if(Z=w.g=d,X=pn(Z,P,!0,w)&&X,X=pn(Z,P,!1,w)&&X,A)for(se=0;se<A.length;se++)Z=w.g=A[se],X=pn(Z,P,!1,w)&&X}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var d=this.i;for(const w in d.g){const A=d.g[w];for(let P=0;P<A.length;P++)le(A[P]);delete d.g[w],d.h--}}this.G=null},Dt.prototype.J=function(d,w,A,P){return this.i.add(String(d),w,!1,A,P)},Dt.prototype.K=function(d,w,A,P){return this.i.add(String(d),w,!0,A,P)};function pn(d,w,A,P){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();let X=!0;for(let Z=0;Z<w.length;++Z){const se=w[Z];if(se&&!se.da&&se.capture==A){const Pe=se.listener,Nt=se.ha||se.src;se.fa&&Ve(d.i,se),X=Pe.call(Nt,P)!==!1&&X}}return X&&!P.defaultPrevented}function Js(d,w){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=h(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:s.setTimeout(d,w||0)}function eu(d){d.g=Js(()=>{d.g=null,d.i&&(d.i=!1,eu(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class Vl extends F{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:eu(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(d){F.call(this),this.h=d,this.g={}}v(Mi,F);var tu=[];function Oa(d){we(d.g,function(w,A){this.g.hasOwnProperty(A)&&ki(w)},d),d.g={}}Mi.prototype.N=function(){Mi.Z.N.call(this),Oa(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Li=s.JSON.stringify,Bl=s.JSON.parse,Bo=class{stringify(d){return s.JSON.stringify(d,void 0)}parse(d){return s.JSON.parse(d,void 0)}};function Fi(){}function Ul(){}var Vi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ba(){U.call(this,"d")}v(ba,U);function ru(){U.call(this,"c")}v(ru,U);var gn={},Da=null;function Bi(){return Da=Da||new Dt}gn.Ia="serverreachability";function ka(d){U.call(this,gn.Ia,d)}v(ka,U);function oi(d){const w=Bi();Rt(w,new ka(w))}gn.STAT_EVENT="statevent";function ai(d,w){U.call(this,gn.STAT_EVENT,d),this.stat=w}v(ai,U);function St(d){const w=Bi();Rt(w,new ai(w,d))}gn.Ja="timingevent";function nu(d,w){U.call(this,gn.Ja,d),this.size=w}v(nu,U);function Ui(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){d()},w)}function ji(){this.g=!0}ji.prototype.ua=function(){this.g=!1};function jl(d,w,A,P,X,Z){d.info(function(){if(d.g)if(Z){var se="",Pe=Z.split("&");for(let nt=0;nt<Pe.length;nt++){var Nt=Pe[nt].split("=");if(Nt.length>1){const kt=Nt[0];Nt=Nt[1];const Xr=kt.split("_");se=Xr.length>=2&&Xr[1]=="type"?se+(kt+"="+Nt+"&"):se+(kt+"=redacted&")}}}else se=null;else se=Z;return"XMLHTTP REQ ("+P+") [attempt "+X+"]: "+w+`
`+A+`
`+se})}function zl(d,w,A,P,X,Z,se){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+X+"]: "+w+`
`+A+`
`+Z+" "+se})}function On(d,w,A,P){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+Uo(d,A)+(P?" "+P:"")})}function Hl(d,w){d.info(function(){return"TIMEOUT: "+w})}ji.prototype.info=function(){};function Uo(d,w){if(!d.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var A=Z[d];if(!(A.length<2)){var P=A[1];if(Array.isArray(P)&&!(P.length<1)){var X=P[0];if(X!="noop"&&X!="stop"&&X!="close")for(let se=1;se<P.length;se++)P[se]=""}}}}return Li(Z)}catch{return w}}var zi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gl;function si(){}v(si,Fi),si.prototype.g=function(){return new XMLHttpRequest},Gl=new si;function bn(d){return encodeURIComponent(String(d))}function Ma(d){var w=1;d=d.split(":");const A=[];for(;w>0&&d.length;)A.push(d.shift()),w--;return d.length&&A.push(d.join(":")),A}function Jr(d,w,A,P){this.j=d,this.i=w,this.l=A,this.S=P||1,this.V=new Mi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wl}function Wl(){this.i=null,this.g="",this.h=!1}var $l={},iu={};function vn(d,w,A){d.M=1,d.A=li(en(w)),d.u=A,d.R=!0,ou(d,null)}function ou(d,w){d.F=Date.now(),jo(d),d.B=en(d.A);var A=d.B,P=d.S;Array.isArray(P)||(P=[String(P)]),gu(A.i,"t",P),d.C=0,A=d.j.L,d.h=new Wl,d.g=rc(d.j,A?w:null,!d.u),d.P>0&&(d.O=new Vl(h(d.Y,d,d.g),d.P)),w=d.V,A=d.g,P=d.ba;var X="readystatechange";Array.isArray(X)||(X&&(tu[0]=X.toString()),X=tu);for(let Z=0;Z<X.length;Z++){const se=lt(A,X[Z],P||w.handleEvent,!1,w.h||w);if(!se)break;w.g[se.key]=se}w=d.J?$(d.J):{},d.u?(d.v||(d.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,w)):(d.v="GET",d.g.ea(d.B,d.v,null,w)),oi(),jl(d.i,d.v,d.B,d.l,d.S,d.u)}Jr.prototype.ba=function(d){d=d.target;const w=this.O;w&&Bn(d)==3?w.j():this.Y(d)},Jr.prototype.Y=function(d){try{if(d==this.g)e:{const Pe=Bn(this.g),Nt=this.g.ya(),nt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||ec(this.g)))){this.K||Pe!=4||Nt==7||(Nt==8||nt<=0?oi(3):oi(2)),La(this);var w=this.g.ca();this.X=w;var A=ql(this);if(this.o=w==200,zl(this.i,this.v,this.B,this.l,this.S,Pe,w),this.o){if(this.U&&!this.L){t:{if(this.g){var P,X=this.g;if((P=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(P)){var Z=P;break t}}Z=null}if(d=Z)On(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gt(this,d);else{this.o=!1,this.m=3,St(12),ui(this),zo(this);break e}}if(this.R){d=!0;let kt;for(;!this.K&&this.C<A.length;)if(kt=Kl(this,A),kt==iu){Pe==4&&(this.m=4,St(14),d=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==$l){this.m=4,St(15),On(this.i,this.l,A,"[Invalid Chunk]"),d=!1;break}else On(this.i,this.l,kt,null),gt(this,kt);if(Xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||A.length!=0||this.h.h||(this.m=1,St(16),d=!1),this.o=this.o&&d,!d)On(this.i,this.l,A,"[Invalid Chunked Response]"),ui(this),zo(this);else if(A.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),Qo(se),se.P=!0,St(11))}}else On(this.i,this.l,A,null),gt(this,A);Pe==4&&ui(this),this.o&&!this.K&&(Pe==4?$a(this.j,this):(this.o=!1,jo(this)))}else mu(this.g),w==400&&A.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),ui(this),zo(this)}}}catch{}finally{}};function ql(d){if(!Xl(d))return d.g.la();const w=ec(d.g);if(w==="")return"";let A="";const P=w.length,X=Bn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ui(d),zo(d),"";d.h.i=new s.TextDecoder}for(let Z=0;Z<P;Z++)d.h.h=!0,A+=d.h.i.decode(w[Z],{stream:!(X&&Z==P-1)});return w.length=0,d.h.g+=A,d.C=0,d.h.g}function Xl(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Kl(d,w){var A=d.C,P=w.indexOf(`
`,A);return P==-1?iu:(A=Number(w.substring(A,P)),isNaN(A)?$l:(P+=1,P+A>w.length?iu:(w=w.slice(P,P+A),d.C=P+A,w)))}Jr.prototype.cancel=function(){this.K=!0,ui(this)};function jo(d){d.T=Date.now()+d.H,au(d,d.H)}function au(d,w){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ui(h(d.aa,d),w)}function La(d){d.D&&(s.clearTimeout(d.D),d.D=null)}Jr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Hl(this.i,this.B),this.M!=2&&(oi(),St(17)),ui(this),this.m=2,zo(this)):au(this,this.T-d)};function zo(d){d.j.I==0||d.K||$a(d.j,d)}function ui(d){La(d);var w=d.O;w&&typeof w.dispose=="function"&&w.dispose(),d.O=null,Oa(d.V),d.g&&(w=d.g,d.g=null,w.abort(),w.dispose())}function gt(d,w){try{var A=d.j;if(A.I!=0&&(A.g==d||uu(A.h,d))){if(!d.L&&uu(A.h,d)&&A.I==3){try{var P=A.Ba.g.parse(w)}catch{P=null}if(Array.isArray(P)&&P.length==3){var X=P;if(X[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<d.F)Wa(A),$r(A);else break e;zn(A),St(18)}}else A.xa=X[1],0<A.xa-A.K&&X[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Ui(h(A.Va,A),6e3));Ho(A.h)<=1&&A.ta&&(A.ta=void 0)}else qr(A,11)}else if((d.L||A.g==d)&&Wa(A),!M(w))for(X=A.Ba.g.parse(w),w=0;w<X.length;w++){let nt=X[w];const kt=nt[0];if(!(kt<=A.K))if(A.K=kt,nt=nt[1],A.I==2)if(nt[0]=="c"){A.M=nt[1],A.ba=nt[2];const Xr=nt[3];Xr!=null&&(A.ka=Xr,A.j.info("VER="+A.ka));const pi=nt[4];pi!=null&&(A.za=pi,A.j.info("SVER="+A.za));const Hn=nt[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(P=1.5*Hn,A.O=P,A.j.info("backChannelRequestTimeoutMs_="+P)),P=A;const Gn=d.g;if(Gn){const Ka=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var Z=P.h;Z.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Va(Z,Z.h),Z.h=null))}if(P.G){const xu=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;xu&&(P.wa=xu,Qe(P.J,P.G,xu))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-d.F,A.j.info("Handshake RTT: "+A.T+"ms")),P=A;var se=d;if(P.na=_u(P,P.L?P.ba:null,P.W),se.L){Go(P.h,se);var Pe=se,Nt=P.O;Nt&&(Pe.H=Nt),Pe.D&&(La(Pe),jo(Pe)),P.g=se}else pr(P);A.i.length>0&&di(A)}else nt[0]!="stop"&&nt[0]!="close"||qr(A,7);else A.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?qr(A,7):Ha(A):nt[0]!="noop"&&A.l&&A.l.qa(nt),A.A=0)}}oi(4)}catch{}}var Ah=class{constructor(d,w){this.g=d,this.map=w}};function Fa(d){this.l=d||10,s.PerformanceNavigationTiming?(d=s.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function su(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ho(d){return d.h?1:d.g?d.g.size:0}function uu(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function Va(d,w){d.g?d.g.add(w):d.h=w}function Go(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}Fa.prototype.cancel=function(){if(this.i=Hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Hr(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const A of d.g.values())w=w.concat(A.G);return w}return _(d.i)}var Yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gr(d,w){if(d){d=d.split("&");for(let A=0;A<d.length;A++){const P=d[A].indexOf("=");let X,Z=null;P>=0?(X=d[A].substring(0,P),Z=d[A].substring(P+1)):X=d[A],w(X,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Dn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;d instanceof Dn?(this.l=d.l,Wo(this,d.j),this.o=d.o,this.g=d.g,kn(this,d.u),this.h=d.h,Gi(this,vu(d.i)),this.m=d.m):d&&(w=String(d).match(Yl))?(this.l=!1,Wo(this,w[1]||"",!0),this.o=$o(w[2]||""),this.g=$o(w[3]||"",!0),kn(this,w[4]),this.h=$o(w[5]||"",!0),Gi(this,w[6]||"",!0),this.m=$o(w[7]||"")):(this.l=!1,this.i=new He(null,this.l))}Dn.prototype.toString=function(){const d=[];var w=this.j;w&&d.push(qo(w,cu,!0),":");var A=this.g;return(A||w=="file")&&(d.push("//"),(w=this.o)&&d.push(qo(w,cu,!0),"@"),d.push(bn(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&d.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&d.push("/"),d.push(qo(A,A.charAt(0)=="/"?Xo:fu,!0))),(A=this.i.toString())&&d.push("?",A),(A=this.m)&&d.push("#",qo(A,hu)),d.join("")},Dn.prototype.resolve=function(d){const w=en(this);let A=!!d.j;A?Wo(w,d.j):A=!!d.o,A?w.o=d.o:A=!!d.g,A?w.g=d.g:A=d.u!=null;var P=d.h;if(A)kn(w,d.u);else if(A=!!d.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var X=w.h.lastIndexOf("/");X!=-1&&(P=w.h.slice(0,X+1)+P)}if(X=P,X==".."||X==".")P="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){P=X.lastIndexOf("/",0)==0,X=X.split("/");const Z=[];for(let se=0;se<X.length;){const Pe=X[se++];Pe=="."?P&&se==X.length&&Z.push(""):Pe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),P&&se==X.length&&Z.push("")):(Z.push(Pe),P=!0)}P=Z.join("/")}else P=X}return A?w.h=P:A=d.i.toString()!=="",A?Gi(w,vu(d.i)):A=!!d.m,A&&(w.m=d.m),w};function en(d){return new Dn(d)}function Wo(d,w,A){d.j=A?$o(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function kn(d,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);d.u=w}else d.u=null}function Gi(d,w,A){w instanceof He?(d.i=w,Ua(d.i,d.l)):(A||(w=qo(w,Ih)),d.i=new He(w,d.l))}function Qe(d,w,A){d.i.set(w,A)}function li(d){return Qe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function $o(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qo(d,w,A){return typeof d=="string"?(d=encodeURI(d).replace(w,lu),A&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function lu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var cu=/[#\/\?@]/g,fu=/[#\?:]/g,Xo=/[#\?]/g,Ih=/[#\?@]/g,hu=/#/g;function He(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function Mn(d){d.g||(d.g=new Map,d.h=0,d.i&&Gr(d.i,function(w,A){d.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}r=He.prototype,r.add=function(d,w){Mn(this),this.i=null,d=Ln(this,d);let A=this.g.get(d);return A||this.g.set(d,A=[]),A.push(w),this.h+=1,this};function du(d,w){Mn(d),w=Ln(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function Ba(d,w){return Mn(d),w=Ln(d,w),d.g.has(w)}r.forEach=function(d,w){Mn(this),this.g.forEach(function(A,P){A.forEach(function(X){d.call(w,X,P,this)},this)},this)};function pu(d,w){Mn(d);let A=[];if(typeof w=="string")Ba(d,w)&&(A=A.concat(d.g.get(Ln(d,w))));else for(d=Array.from(d.g.values()),w=0;w<d.length;w++)A=A.concat(d[w]);return A}r.set=function(d,w){return Mn(this),this.i=null,d=Ln(this,d),Ba(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},r.get=function(d,w){return d?(d=pu(this,d),d.length>0?String(d[0]):w):w};function gu(d,w,A){du(d,w),A.length>0&&(d.i=null,d.g.set(Ln(d,w),_(A)),d.h+=A.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(let P=0;P<w.length;P++){var A=w[P];const X=bn(A);A=pu(this,A);for(let Z=0;Z<A.length;Z++){let se=X;A[Z]!==""&&(se+="="+bn(A[Z])),d.push(se)}}return this.i=d.join("&")};function vu(d){const w=new He;return w.i=d.i,d.g&&(w.g=new Map(d.g),w.h=d.h),w}function Ln(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function Ua(d,w){w&&!d.j&&(Mn(d),d.i=null,d.g.forEach(function(A,P){const X=P.toLowerCase();P!=X&&(du(this,P),gu(this,X,A))},d)),d.j=w}function Fn(d,w){const A=new ji;if(s.Image){const P=new Image;P.onload=p(ir,A,"TestLoadImage: loaded",!0,w,P),P.onerror=p(ir,A,"TestLoadImage: error",!1,w,P),P.onabort=p(ir,A,"TestLoadImage: abort",!1,w,P),P.ontimeout=p(ir,A,"TestLoadImage: timeout",!1,w,P),s.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else w(!1)}function Vn(d,w){const A=new ji,P=new AbortController,X=setTimeout(()=>{P.abort(),ir(A,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:P.signal}).then(Z=>{clearTimeout(X),Z.ok?ir(A,"TestPingServer: ok",!0,w):ir(A,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(X),ir(A,"TestPingServer: error",!1,w)})}function ir(d,w,A,P,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),P(A)}catch{}}function Ko(){this.g=new Bo}function ci(d){this.i=d.Sb||null,this.h=d.ab||!1}v(ci,Fi),ci.prototype.g=function(){return new Wr(this.i,this.h)};function Wr(d,w){Dt.call(this),this.H=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Wr,Dt),r=Wr.prototype,r.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=w,this.readyState=1,mn(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(w.body=d),(this.H||s).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ql(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ql(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?Wi(this):mn(this),this.readyState==3&&Ql(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,Wi(this))},r.Na=function(d){this.g&&(this.response=d,Wi(this))},r.ga=function(){this.g&&Wi(this)};function Wi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,mn(d)}r.setRequestHeader=function(d,w){this.A.append(d,w)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var A=w.next();!A.done;)A=A.value,d.push(A[0]+": "+A[1]),A=w.next();return d.join(`\r
`)};function mn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zl(d){let w="";return we(d,function(A,P){w+=P,w+=":",w+=A,w+=`\r
`}),w}function ja(d,w,A){e:{for(P in A){var P=!1;break e}P=!0}P||(A=Zl(A),typeof d=="string"?A!=null&&bn(A):Qe(d,w,A))}function ct(d){Dt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ct,Dt);var Jl=/^https?$/i,Ch=["POST","PUT"];r=ct.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,w,A,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gl.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(Z){$i(this,Z);return}if(d=A||"",A=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var X in P)A.set(X,P[X]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Z of P.keys())A.set(Z,P.get(Z));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(A.keys()).find(Z=>Z.toLowerCase()=="content-type"),X=s.FormData&&d instanceof s.FormData,!(Array.prototype.indexOf.call(Ch,w,void 0)>=0)||P||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,se]of A)this.g.setRequestHeader(Z,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){$i(this,Z)}};function $i(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.o=5,qi(d),hi(d)}function qi(d){d.A||(d.A=!0,Rt(d,"complete"),Rt(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Rt(this,"complete"),Rt(this,"abort"),hi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hi(this,!0)),ct.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?fi(this):this.Xa())},r.Xa=function(){fi(this)};function fi(d){if(d.h&&typeof o<"u"){if(d.v&&Bn(d)==4)setTimeout(d.Ca.bind(d),0);else if(Rt(d,"readystatechange"),Bn(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var A;if(!(A=w)){var P;if(P=Z===0){let se=String(d.D).match(Yl)[1]||null;!se&&s.self&&s.self.location&&(se=s.self.location.protocol.slice(0,-1)),P=!Jl.test(se?se.toLowerCase():"")}A=P}if(A)Rt(d,"complete"),Rt(d,"success");else{d.o=6;try{var X=Bn(d)>2?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.ca()+"]",qi(d)}}finally{hi(d)}}}}function hi(d,w){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const A=d.g;d.g=null,w||Rt(d,"ready");try{A.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Bn(d){return d.g?d.g.readyState:0}r.ca=function(){try{return Bn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),Bl(w)}};function ec(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function mu(d){const w={};d=(d.g&&Bn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(M(d[P]))continue;var A=Ma(d[P]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Z=w[X]||[];w[X]=Z,Z.push(A)}de(w,function(P){return P.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(d,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[d]||w}function za(d){this.za=0,this.i=[],this.j=new ji,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Un("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Un("baseRetryDelayMs",5e3,d),this.Za=Un("retryDelaySeedMs",1e4,d),this.Ta=Un("forwardChannelMaxRetries",2,d),this.va=Un("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Fa(d&&d.concurrentRequestLimit),this.Ba=new Ko,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=za.prototype,r.ka=8,r.I=1,r.connect=function(d,w,A,P){St(0),this.W=d,this.H=w||{},A&&P!==void 0&&(this.H.OSID=A,this.H.OAID=P),this.F=this.X,this.J=_u(this,null,this.W),di(this)};function Ha(d){if(Ga(d),d.I==3){var w=d.V++,A=en(d.J);if(Qe(A,"SID",d.M),Qe(A,"RID",w),Qe(A,"TYPE","terminate"),jn(d,A),w=new Jr(d,d.j,w),w.M=2,w.A=li(en(A)),A=!1,s.navigator&&s.navigator.sendBeacon)try{A=s.navigator.sendBeacon(w.A.toString(),"")}catch{}!A&&s.Image&&(new Image().src=w.A,A=!0),A||(w.g=rc(w.j,null),w.g.ea(w.A)),w.F=Date.now(),jo(w)}Zo(d)}function $r(d){d.g&&(Qo(d),d.g.cancel(),d.g=null)}function Ga(d){$r(d),d.v&&(s.clearTimeout(d.v),d.v=null),Wa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&s.clearTimeout(d.m),d.m=null)}function di(d){if(!su(d.h)&&!d.m){d.m=!0;var w=d.Ea;G||N(),B||(G(),B=!0),R.add(w,d),d.D=0}}function tc(d,w){return Ho(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=w.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ui(h(d.Ea,d,w),qa(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const X=new Jr(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=$(Z),be(Z,this.U)):Z=this.U),this.u!==null||this.R||(X.J=Z,Z=null),this.S)e:{for(var w=0,A=0;A<this.i.length;A++){t:{var P=this.i[A];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(w+=P,w>4096){w=A;break e}if(w===4096||A===this.i.length-1){w=A+1;break e}}w=1e3}else w=1e3;w=yu(this,X,w),A=en(this.J),Qe(A,"RID",d),Qe(A,"CVER",22),this.G&&Qe(A,"X-HTTP-Session-Id",this.G),jn(this,A),Z&&(this.R?w="headers="+bn(Zl(Z))+"&"+w:this.u&&ja(A,this.u,Z)),Va(this.h,X),this.Ra&&Qe(A,"TYPE","init"),this.S?(Qe(A,"$req",w),Qe(A,"SID","null"),X.U=!0,vn(X,A,null)):vn(X,A,w),this.I=2}}else this.I==3&&(d?Yo(this,d):this.i.length==0||su(this.h)||Yo(this))};function Yo(d,w){var A;w?A=w.l:A=d.V++;const P=en(d.J);Qe(P,"SID",d.M),Qe(P,"RID",A),Qe(P,"AID",d.K),jn(d,P),d.u&&d.o&&ja(P,d.u,d.o),A=new Jr(d,d.j,A,d.D+1),d.u===null&&(A.J=d.o),w&&(d.i=w.G.concat(d.i)),w=yu(d,A,1e3),A.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Va(d.h,A),vn(A,P,w)}function jn(d,w){d.H&&we(d.H,function(A,P){Qe(w,P,A)}),d.l&&we({},function(A,P){Qe(w,P,A)})}function yu(d,w,A){A=Math.min(d.i.length,A);const P=d.l?h(d.l.Ka,d.l,d):null;e:{var X=d.i;let Pe=-1;for(;;){const Nt=["count="+A];Pe==-1?A>0?(Pe=X[0].g,Nt.push("ofs="+Pe)):Pe=0:Nt.push("ofs="+Pe);let nt=!0;for(let kt=0;kt<A;kt++){var Z=X[kt].g;const Xr=X[kt].map;if(Z-=Pe,Z<0)Pe=Math.max(0,X[kt].g-100),nt=!1;else try{Z="req"+Z+"_"||"";try{var se=Xr instanceof Map?Xr:Object.entries(Xr);for(const[pi,Hn]of se){let Gn=Hn;l(Hn)&&(Gn=Li(Hn)),Nt.push(Z+pi+"="+encodeURIComponent(Gn))}}catch(pi){throw Nt.push(Z+"type="+encodeURIComponent("_badmap")),pi}}catch{P&&P(Xr)}}if(nt){se=Nt.join("&");break e}}se=void 0}return d=d.i.splice(0,A),w.G=d,se}function pr(d){if(!d.g&&!d.v){d.Y=1;var w=d.Da;G||N(),B||(G(),B=!0),R.add(w,d),d.A=0}}function zn(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ui(h(d.Da,d),qa(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,Xi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ui(h(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),$r(this),Xi(this))};function Qo(d){d.B!=null&&(s.clearTimeout(d.B),d.B=null)}function Xi(d){d.g=new Jr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var w=en(d.na);Qe(w,"RID","rpc"),Qe(w,"SID",d.M),Qe(w,"AID",d.K),Qe(w,"CI",d.F?"0":"1"),!d.F&&d.ia&&Qe(w,"TO",d.ia),Qe(w,"TYPE","xmlhttp"),jn(d,w),d.u&&d.o&&ja(w,d.u,d.o),d.O&&(d.g.H=d.O);var A=d.g;d=d.ba,A.M=1,A.A=li(en(w)),A.u=null,A.R=!0,ou(A,d)}r.Va=function(){this.C!=null&&(this.C=null,$r(this),zn(this),St(19))};function Wa(d){d.C!=null&&(s.clearTimeout(d.C),d.C=null)}function $a(d,w){var A=null;if(d.g==w){Wa(d),Qo(d),d.g=null;var P=2}else if(uu(d.h,w))A=w.G,Go(d.h,w),P=1;else return;if(d.I!=0){if(w.o)if(P==1){A=w.u?w.u.length:0,w=Date.now()-w.F;var X=d.D;P=Bi(),Rt(P,new nu(P,A)),di(d)}else pr(d);else if(X=w.m,X==3||X==0&&w.X>0||!(P==1&&tc(d,w)||P==2&&zn(d)))switch(A&&A.length>0&&(w=d.h,w.i=w.i.concat(A)),X){case 1:qr(d,5);break;case 4:qr(d,10);break;case 3:qr(d,6);break;default:qr(d,2)}}}function qa(d,w){let A=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(A*=2),A*w}function qr(d,w){if(d.j.info("Error code "+w),w==2){var A=h(d.bb,d),P=d.Ua;const X=!P;P=new Dn(P||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Wo(P,"https"),li(P),X?Fn(P.toString(),A):Vn(P.toString(),A)}else St(2);d.I=0,d.l&&d.l.pa(w),Zo(d),Ga(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Zo(d){if(d.I=0,d.ja=[],d.l){const w=Hr(d.h);(w.length!=0||d.i.length!=0)&&(E(d.ja,w),E(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function _u(d,w,A){var P=A instanceof Dn?en(A):new Dn(A);if(P.g!="")w&&(P.g=w+"."+P.g),kn(P,P.u);else{var X=s.location;P=X.protocol,w=w?w+"."+X.hostname:X.hostname,X=+X.port;const Z=new Dn(null);P&&Wo(Z,P),w&&(Z.g=w),X&&kn(Z,X),A&&(Z.h=A),P=Z}return A=d.G,w=d.wa,A&&w&&Qe(P,A,w),Qe(P,"VER",d.ka),jn(d,P),P}function rc(d,w,A){if(w&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Aa&&!d.ma?new ct(new ci({ab:A})):new ct(d.ma),w.Fa(d.L),w}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}r=nc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xa(){}Xa.prototype.g=function(d,w){return new or(d,w)};function or(d,w){Dt.call(this),this.g=new za(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(d?d["X-WebChannel-Client-Profile"]=w.sa:d={"X-WebChannel-Client-Profile":w.sa}),this.g.U=d,(d=w&&w.Qb)&&!M(d)&&(this.g.u=d),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!M(w)&&(this.g.G=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new Ki(this)}v(or,Dt),or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){Ha(this.g)},or.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var A={};A.__data__=d,d=A}else this.v&&(A={},A.__data__=Li(d),d=A);w.i.push(new Ah(w.Ya++,d)),w.I==3&&di(w)},or.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,or.Z.N.call(this)};function ic(d){ba.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const A in w){d=A;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}v(ic,ba);function oc(){ru.call(this),this.status=1}v(oc,ru);function Ki(d){this.g=d}v(Ki,nc),Ki.prototype.ra=function(){Rt(this.g,"a")},Ki.prototype.qa=function(d){Rt(this.g,new ic(d))},Ki.prototype.pa=function(d){Rt(this.g,new oc)},Ki.prototype.oa=function(){Rt(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,$2=function(){return new Xa},W2=function(){return Bi()},G2=gn,N0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,vf=zi,Hi.COMPLETE="complete",H2=Hi,Ul.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,Qu=Ul,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,z2=ct}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});const om="@firebase/firestore",am="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new l1("@firebase/firestore");function ms(){return Ea.logLevel}function he(r,...e){if(Ea.logLevel<=Ue.DEBUG){const t=e.map(x1);Ea.debug(`Firestore (${Gs}): ${r}`,...t)}}function Ni(r,...e){if(Ea.logLevel<=Ue.ERROR){const t=e.map(x1);Ea.error(`Firestore (${Gs}): ${r}`,...t)}}function Ds(r,...e){if(Ea.logLevel<=Ue.WARN){const t=e.map(x1);Ea.warn(`Firestore (${Gs}): ${r}`,...t)}}function x1(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,q2(r,n,t)}function q2(r,e,t){let n=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Ni(n),new Error(n)}function rt(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||q2(e,i,n)}function Oe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wr.UNAUTHENTICATED)))}shutdown(){}}class WC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $C{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let o=new Io;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Io,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Io)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(rt(typeof n.accessToken=="string",31837,{l:n}),new X2(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new wr(e)}}class qC{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XC{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new qC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(wr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);const n=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,he("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const i=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sm(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=YC(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<t&&(n+=e.charAt(i[o]%62))}return n}}function je(r,e){return r<e?-1:r>e?1:0}function P0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),o=e.charAt(n);if(i!==o)return i0(i)===i0(o)?je(i,o):i0(i)?1:-1}return je(r.length,e.length)}const QC=55296,ZC=57343;function i0(r){const e=r.charCodeAt(0);return e>=QC&&e<=ZC}function ks(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="__name__";class Kn{constructor(e,t,n){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Te(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const o=Kn.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return je(e.length,t.length)}static compareSegments(e,t){const n=Kn.isNumericId(e),i=Kn.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Kn.extractNumericId(e).compare(Kn.extractNumericId(t)):P0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class ht extends Kn{construct(e,t,n){return new ht(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ce(ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const JC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Kn{construct(e,t,n){return new fr(e,t,n)}static isValidIdentifier(e){return JC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===um}static keyField(){return new fr([um])}static fromServerFormat(e){const t=[];let n="",i=0;const o=()=>{if(n.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ce(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(n+=l,i++):(o(),i++)}if(o(),s)throw new ce(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ht.fromString(e))}static fromName(e){return new xe(ht.fromString(e).popFirst(5))}static empty(){return new xe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(r,e,t){if(!t)throw new ce(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function eS(r,e,t,n){if(e===!0&&n===!0)throw new ce(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function lm(r){if(!xe.isDocumentKey(r))throw new ce(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function cm(r){if(xe.isDocumentKey(r))throw new ce(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Y2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Jf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Pi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(r);throw new ce(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Nl(r,e){if(!Y2(r))throw new ce(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const s=r[n];if(i&&typeof s!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ce(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=-62135596800,hm=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*hm);return new dt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fm)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hm}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nl(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Vt("string",dt._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new dt(0,0))}static max(){return new Ne(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=-1;function tS(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(n===1e9?new dt(t+1,0):new dt(t,n));return new No(i,xe.empty(),e)}function rS(r){return new No(r.readTime,r.key,gl)}class No{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new No(Ne.min(),xe.empty(),gl)}static max(){return new No(Ne.max(),xe.empty(),gl)}}function nS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==iS)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,n)=>{t(e)}))}static reject(e){return new te(((t,n)=>{n(e)}))}static waitFor(e){return new te(((t,n)=>{let i=0,o=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++o,s&&o===i&&t()}),(c=>n(c)))})),s=!0,o===i&&t()}))}static or(e){let t=te.resolve(!1);for(const n of e)t=t.next((i=>i?te.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,o)=>{n.push(t.call(this,i,o))})),this.waitFor(n)}static mapArray(e,t){return new te(((n,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const h=c;t(e[h]).next((p=>{s[h]=p,++l,l===o&&n(s)}),(p=>i(p)))}}))}static doWhile(e,t){return new te(((n,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):n()};o()}))}}function aS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $s(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}eh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=-1;function th(r){return r==null}function Lf(r){return r===0&&1/r==-1/0}function sS(r){return typeof r=="number"&&Number.isInteger(r)&&!Lf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="";function uS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dm(e)),e=lS(r.get(t),e);return dm(e)}function lS(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const o=r.charAt(i);switch(o){case"\0":t+="";break;case Q2:t+="";break;default:t+=o}}return t}function dm(r){return r+Q2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Lo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Z2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||cr.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,t,n,i,o){this.key=e,this.value=t,this.color=n??cr.RED,this.left=i??cr.EMPTY,this.right=o??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,o){return new cr(e??this.key,t??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,n),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return cr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,n,i,o){return this}insert(e,t,n){return new cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gm(this.data.getIterator())}getIteratorFrom(e){return new gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class gm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new Zr([])}unionWith(e){let t=new Xt(fr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Zr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ks(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new J2("Invalid base64 string: "+o):o}})(e);return new dr(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const cS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(r){if(rt(!!r,39018),typeof r=="string"){let e=0;const t=cS.exec(r);if(rt(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ot(r.seconds),nanos:Ot(r.nanos)}}function Ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oo(r){return typeof r=="string"?dr.fromBase64String(r):dr.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="server_timestamp",t_="__type__",r_="__previous_value__",n_="__local_write_time__";function A1(r){return(r?.mapValue?.fields||{})[t_]?.stringValue===e_}function rh(r){const e=r.mapValue.fields[r_];return A1(e)?rh(e):e}function vl(r){const e=Po(r.mapValue.fields[n_].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t,n,i,o,s,l,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p}}const Ff="(default)";class ml{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__type__",hS="__max__",rf={mapValue:{}},o_="__vector__",Vf="value";function bo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?A1(r)?4:pS(r)?9007199254740991:dS(r)?10:11:Te(28295,{value:r})}function ni(r,e){if(r===e)return!0;const t=bo(r);if(t!==bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return vl(r).isEqual(vl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Po(i.timestampValue),l=Po(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,o){return Oo(i.bytesValue).isEqual(Oo(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ot(i.geoPointValue.latitude)===Ot(o.geoPointValue.latitude)&&Ot(i.geoPointValue.longitude)===Ot(o.geoPointValue.longitude)})(r,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ot(i.integerValue)===Ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ot(i.doubleValue),l=Ot(o.doubleValue);return s===l?Lf(s)===Lf(l):isNaN(s)&&isNaN(l)}return!1})(r,e);case 9:return ks(r.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(pm(s)!==pm(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!ni(s[c],l[c])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function yl(r,e){return(r.values||[]).find((t=>ni(t,e)))!==void 0}function Ms(r,e){if(r===e)return 0;const t=bo(r),n=bo(e);if(t!==n)return je(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return(function(o,s){const l=Ot(o.integerValue||o.doubleValue),c=Ot(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(r,e);case 3:return vm(r.timestampValue,e.timestampValue);case 4:return vm(vl(r),vl(e));case 5:return P0(r.stringValue,e.stringValue);case 6:return(function(o,s){const l=Oo(o),c=Oo(s);return l.compareTo(c)})(r.bytesValue,e.bytesValue);case 7:return(function(o,s){const l=o.split("/"),c=s.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=je(l[h],c[h]);if(p!==0)return p}return je(l.length,c.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,s){const l=je(Ot(o.latitude),Ot(s.latitude));return l!==0?l:je(Ot(o.longitude),Ot(s.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return mm(r.arrayValue,e.arrayValue);case 10:return(function(o,s){const l=o.fields||{},c=s.fields||{},h=l[Vf]?.arrayValue,p=c[Vf]?.arrayValue,v=je(h?.values?.length||0,p?.values?.length||0);return v!==0?v:mm(h,p)})(r.mapValue,e.mapValue);case 11:return(function(o,s){if(o===rf.mapValue&&s===rf.mapValue)return 0;if(o===rf.mapValue)return 1;if(s===rf.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),h=s.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let v=0;v<c.length&&v<p.length;++v){const m=P0(c[v],p[v]);if(m!==0)return m;const _=Ms(l[c[v]],h[p[v]]);if(_!==0)return _}return je(c.length,p.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function vm(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=Po(r),n=Po(e),i=je(t.seconds,n.seconds);return i!==0?i:je(t.nanos,n.nanos)}function mm(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const o=Ms(t[i],n[i]);if(o)return o}return je(t.length,n.length)}function Ls(r){return O0(r)}function O0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Po(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Oo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return xe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const o of t.values||[])i?i=!1:n+=",",n+=O0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${O0(t.fields[s])}`;return i+"}"})(r.mapValue):Te(61005,{value:r})}function mf(r){switch(bo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(r);return e?16+mf(e):16;case 5:return 2*r.stringValue.length;case 6:return Oo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,o)=>i+mf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Lo(n.fields,((o,s)=>{i+=o.length+mf(s)})),i})(r.mapValue);default:throw Te(13486,{value:r})}}function ym(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function b0(r){return!!r&&"integerValue"in r}function I1(r){return!!r&&"arrayValue"in r}function _m(r){return!!r&&"nullValue"in r}function xm(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function yf(r){return!!r&&"mapValue"in r}function dS(r){return(r?.mapValue?.fields||{})[i_]?.stringValue===o_}function al(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Lo(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=al(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=al(r.arrayValue.values[t]);return e}return{...r}}function pS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===hS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}setAll(e){let t=fr.emptyPath(),n={},i=[];e.forEach(((s,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,n,i),n={},i=[],t=l.popLast()}s?n[l.lastSegment()]=al(s):i.push(l.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,i)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Lo(t,((i,o)=>e[i]=o));for(const i of n)delete e[i]}clone(){return new Ur(al(this.value))}}function a_(r){const e=[];return Lo(r.fields,((t,n)=>{const i=new fr([t]);if(yf(n)){const o=a_(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,n,i,o,s,l){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Er(e,0,Ne.min(),Ne.min(),Ne.min(),Ur.empty(),0)}static newFoundDocument(e,t,n,i){return new Er(e,1,t,Ne.min(),n,i,0)}static newNoDocument(e,t){return new Er(e,2,t,Ne.min(),Ne.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new Er(e,3,t,Ne.min(),Ne.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.position=e,this.inclusive=t}}function wm(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const o=e[i],s=r.position[i];if(o.field.isKeyField()?n=xe.comparator(xe.fromName(s.referenceValue),t.key):n=Ms(s,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Em(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ni(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t="asc"){this.field=e,this.dir=t}}function gS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{}class Ft extends s_{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new mS(e,t,n):t==="array-contains"?new xS(e,n):t==="in"?new wS(e,n):t==="not-in"?new ES(e,n):t==="array-contains-any"?new AS(e,n):new Ft(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new yS(e,n):new _S(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ms(t,this.value)):t!==null&&bo(this.value)===bo(t)&&this.matchesComparison(Ms(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends s_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Pn(e,t)}matches(e){return u_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function u_(r){return r.op==="and"}function l_(r){return vS(r)&&u_(r)}function vS(r){for(const e of r.filters)if(e instanceof Pn)return!1;return!0}function D0(r){if(r instanceof Ft)return r.field.canonicalString()+r.op.toString()+Ls(r.value);if(l_(r))return r.filters.map((e=>D0(e))).join(",");{const e=r.filters.map((t=>D0(t))).join(",");return`${r.op}(${e})`}}function c_(r,e){return r instanceof Ft?(function(n,i){return i instanceof Ft&&n.op===i.op&&n.field.isEqual(i.field)&&ni(n.value,i.value)})(r,e):r instanceof Pn?(function(n,i){return i instanceof Pn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((o,s,l)=>o&&c_(s,i.filters[l])),!0):!1})(r,e):void Te(19439)}function f_(r){return r instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ls(t.value)}`})(r):r instanceof Pn?(function(t){return t.op.toString()+" {"+t.getFilters().map(f_).join(" ,")+"}"})(r):"Filter"}class mS extends Ft{constructor(e,t,n){super(e,t,n),this.key=xe.fromName(n.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class yS extends Ft{constructor(e,t){super(e,"in",t),this.keys=h_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _S extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=h_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function h_(r,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class xS extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return I1(t)&&yl(t.arrayValue,this.value)}}class wS extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class ES extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yl(this.value.arrayValue,t)}}class AS extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!I1(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>yl(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t=null,n=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function Am(r,e=null,t=[],n=[],i=null,o=null,s=null){return new IS(r,e,t,n,i,o,s)}function C1(r){const e=Oe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>D0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),th(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Ls(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Ls(n))).join(",")),e.Te=t}return e.Te}function S1(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!gS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!c_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Em(r.startAt,e.startAt)&&Em(r.endAt,e.endAt)}function k0(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t=null,n=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CS(r,e,t,n,i,o,s,l){return new qs(r,e,t,n,i,o,s,l)}function d_(r){return new qs(r)}function Im(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function p_(r){return r.collectionGroup!==null}function sl(r){const e=Oe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Xt(fr.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new _l(o,n))})),t.has(fr.keyField().canonicalString())||e.Ie.push(new _l(fr.keyField(),n))}return e.Ie}function Jn(r){const e=Oe(r);return e.Ee||(e.Ee=SS(e,sl(r))),e.Ee}function SS(r,e){if(r.limitType==="F")return Am(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new _l(i.field,o)}));const t=r.endAt?new Bf(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Bf(r.startAt.position,r.startAt.inclusive):null;return Am(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function M0(r,e){const t=r.filters.concat([e]);return new qs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function L0(r,e,t){return new qs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function nh(r,e){return S1(Jn(r),Jn(e))&&r.limitType===e.limitType}function g_(r){return`${C1(Jn(r))}|lt:${r.limitType}`}function ys(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>f_(i))).join(", ")}]`),th(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Ls(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Ls(i))).join(",")),`Target(${n})`})(Jn(r))}; limitType=${r.limitType})`}function ih(r,e){return e.isFoundDocument()&&(function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):xe.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,i){for(const o of sl(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(s,l,c){const h=wm(s,l,c);return s.inclusive?h<=0:h<0})(n.startAt,sl(n),i)||n.endAt&&!(function(s,l,c){const h=wm(s,l,c);return s.inclusive?h>=0:h>0})(n.endAt,sl(n),i))})(r,e)}function TS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function v_(r){return(e,t)=>{let n=!1;for(const i of sl(r)){const o=RS(i,e,t);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function RS(r,e,t){const n=r.field.isKeyField()?xe.comparator(e.key,t.key):(function(o,s,l){const c=s.data.field(o),h=l.data.field(o);return c!==null&&h!==null?Ms(c,h):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,((t,n)=>{for(const[i,o]of n)e(i,o)}))}isEmpty(){return Z2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Ct(xe.comparator);function Oi(){return NS}const m_=new Ct(xe.comparator);function Zu(...r){let e=m_;for(const t of r)e=e.insert(t.key,t);return e}function y_(r){let e=m_;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ga(){return ul()}function __(){return ul()}function ul(){return new Ca((r=>r.toString()),((r,e)=>r.isEqual(e)))}const PS=new Ct(xe.comparator),OS=new Xt(xe.comparator);function ze(...r){let e=OS;for(const t of r)e=e.add(t);return e}const bS=new Xt(je);function DS(){return bS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(e)?"-0":e}}function x_(r){return{integerValue:""+r}}function kS(r,e){return sS(e)?x_(e):T1(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this._=void 0}}function MS(r,e,t){return r instanceof xl?(function(i,o){const s={fields:{[t_]:{stringValue:e_},[n_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&A1(o)&&(o=rh(o)),o&&(s.fields[r_]=o),{mapValue:s}})(t,e):r instanceof wl?E_(r,e):r instanceof El?A_(r,e):(function(i,o){const s=w_(i,o),l=Cm(s)+Cm(i.Ae);return b0(s)&&b0(i.Ae)?x_(l):T1(i.serializer,l)})(r,e)}function LS(r,e,t){return r instanceof wl?E_(r,e):r instanceof El?A_(r,e):t}function w_(r,e){return r instanceof Uf?(function(n){return b0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class xl extends oh{}class wl extends oh{constructor(e){super(),this.elements=e}}function E_(r,e){const t=I_(e);for(const n of r.elements)t.some((i=>ni(i,n)))||t.push(n);return{arrayValue:{values:t}}}class El extends oh{constructor(e){super(),this.elements=e}}function A_(r,e){let t=I_(e);for(const n of r.elements)t=t.filter((i=>!ni(i,n)));return{arrayValue:{values:t}}}class Uf extends oh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cm(r){return Ot(r.integerValue||r.doubleValue)}function I_(r){return I1(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t){this.field=e,this.transform=t}}function VS(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof wl&&i instanceof wl||n instanceof El&&i instanceof El?ks(n.elements,i.elements,ni):n instanceof Uf&&i instanceof Uf?ni(n.Ae,i.Ae):n instanceof xl&&i instanceof xl})(r.transform,e.transform)}class BS{constructor(e,t){this.version=e,this.transformResults=t}}class hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _f(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ah{}function C_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new R1(r.key,hn.none()):new Pl(r.key,r.data,hn.none());{const t=r.data,n=Ur.empty();let i=new Xt(fr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Fo(r.key,n,new Zr(i.toArray()),hn.none())}}function US(r,e,t){r instanceof Pl?(function(i,o,s){const l=i.value.clone(),c=Tm(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(r,e,t):r instanceof Fo?(function(i,o,s){if(!_f(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Tm(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(S_(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(r,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function ll(r,e,t,n){return r instanceof Pl?(function(o,s,l,c){if(!_f(o.precondition,s))return l;const h=o.value.clone(),p=Rm(o.fieldTransforms,c,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(r,e,t,n):r instanceof Fo?(function(o,s,l,c){if(!_f(o.precondition,s))return l;const h=Rm(o.fieldTransforms,c,s),p=s.data;return p.setAll(S_(o)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(r,e,t,n):(function(o,s,l){return _f(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(r,e,t)}function jS(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),o=w_(n.transform,i||null);o!=null&&(t===null&&(t=Ur.empty()),t.set(n.field,o))}return t||null}function Sm(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ks(n,i,((o,s)=>VS(o,s)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pl extends ah{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fo extends ah{constructor(e,t,n,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function S_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Tm(r,e,t){const n=new Map;rt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const o=r[i],s=o.transform,l=e.data.field(o.field);n.set(o.field,LS(s,l,t[i]))}return n}function Rm(r,e,t){const n=new Map;for(const i of r){const o=i.transform,s=t.data.field(i.field);n.set(i.field,MS(o,s,e))}return n}class R1 extends ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zS extends ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&US(o,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ll(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ll(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=__();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=t.has(i.key)?null:l;const c=C_(s,l);c!==null&&n.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ne.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&ks(this.mutations,e.mutations,((t,n)=>Sm(t,n)))&&ks(this.baseMutations,e.baseMutations,((t,n)=>Sm(t,n)))}}class N1{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){rt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return PS})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new N1(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Ge;function $S(r){switch(r){case ee.OK:return Te(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function T_(r){if(r===void 0)return Ni("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Lt.OK:return ee.OK;case Lt.CANCELLED:return ee.CANCELLED;case Lt.UNKNOWN:return ee.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return ee.INTERNAL;case Lt.UNAVAILABLE:return ee.UNAVAILABLE;case Lt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Lt.NOT_FOUND:return ee.NOT_FOUND;case Lt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Lt.ABORTED:return ee.ABORTED;case Lt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Lt.DATA_LOSS:return ee.DATA_LOSS;default:return Te(39323,{code:r})}}(Ge=Lt||(Lt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new Ao([4294967295,4294967295],0);function Nm(r){const e=qS().encode(r),t=new j2;return t.update(e),new Uint8Array(t.digest())}function Pm(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ao([t,n],0),new Ao([i,o],0)]}class P1{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ju(`Invalid padding: ${t}`);if(n<0)throw new Ju(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ao.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(Ao.fromNumber(n)));return i.compare(XS)===1&&(i=new Ao([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Nm(e),[n,i]=Pm(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(n,i,o);if(!this.we(s))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new P1(o,i,t);return n.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const t=Nm(e),[n,i]=Pm(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(n,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,n,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sh(Ne.min(),i,new Ct(je),Oi(),ze())}}class Ol{constructor(e,t,n,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ol(n,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class R_{constructor(e,t){this.targetId=e,this.Ce=t}}class N_{constructor(e,t,n=dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Om{constructor(){this.ve=0,this.Fe=bm(),this.Me=dr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),n=ze();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Te(38017,{changeType:o})}})),new Ol(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=bm()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=nf(),this.He=nf(),this.Ye=new Ct(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(k0(o))if(n===0){const s=new xe(o.path);this.et(t,s,Er.newNoDocument(s,Ne.min()))}else rt(n===1,20013,{expectedCount:n});else{const s=this._t(t);if(s!==n){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=t;let s,l;try{s=Oo(n).toUint8Array()}catch(c){if(c instanceof J2)return Ds("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new P1(s,i,o)}catch(c){return Ds(c instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,s)=>{const l=this.ot(s);if(l){if(o.current&&k0(l.target)){const c=new xe(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Er.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}}));let n=ze();this.He.forEach(((o,s)=>{let l=!0;s.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(n=n.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new sh(e,t,this.Ye,this.je,n);return this.je=Oi(),this.Je=nf(),this.He=nf(),this.Ye=new Ct(je),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Om,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Om),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nf(){return new Ct(xe.comparator)}function bm(){return new Ct(xe.comparator)}const YS={asc:"ASCENDING",desc:"DESCENDING"},QS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZS={and:"AND",or:"OR"};class JS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function F0(r,e){return r.useProto3Json||th(e)?e:{value:e}}function jf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function eT(r,e){return jf(r,e.toTimestamp())}function ei(r){return rt(!!r,49232),Ne.fromTimestamp((function(t){const n=Po(t);return new dt(n.seconds,n.nanos)})(r))}function O1(r,e){return V0(r,e).canonicalString()}function V0(r,e){const t=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function O_(r){const e=ht.fromString(r);return rt(L_(e),10190,{key:e.toString()}),e}function B0(r,e){return O1(r.databaseId,e.path)}function o0(r,e){const t=O_(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(D_(t))}function b_(r,e){return O1(r.databaseId,e)}function tT(r){const e=O_(r);return e.length===4?ht.emptyPath():D_(e)}function U0(r){return new ht(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function D_(r){return rt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Dm(r,e,t){return{name:B0(r,e),fields:t.value.mapValue.fields}}function rT(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Te(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(h,p){return h.useProto3Json?(rt(p===void 0||typeof p=="string",58123),dr.fromBase64String(p||"")):(rt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),dr.fromUint8Array(p||new Uint8Array))})(r,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(h){const p=h.code===void 0?ee.UNKNOWN:T_(h.code);return new ce(p,h.message||"")})(s);t=new N_(n,i,o,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=o0(r,n.document.name),o=ei(n.document.updateTime),s=n.document.createTime?ei(n.document.createTime):Ne.min(),l=new Ur({mapValue:{fields:n.document.fields}}),c=Er.newFoundDocument(i,o,s,l),h=n.targetIds||[],p=n.removedTargetIds||[];t=new xf(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=o0(r,n.document),o=n.readTime?ei(n.readTime):Ne.min(),s=Er.newNoDocument(i,o),l=n.removedTargetIds||[];t=new xf([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=o0(r,n.document),o=n.removedTargetIds||[];t=new xf([],o,i,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new WS(i,o),l=n.targetId;t=new R_(l,s)}}return t}function nT(r,e){let t;if(e instanceof Pl)t={update:Dm(r,e.key,e.value)};else if(e instanceof R1)t={delete:B0(r,e.key)};else if(e instanceof Fo)t={update:Dm(r,e.key,e.data),updateMask:hT(e.fieldMask)};else{if(!(e instanceof zS))return Te(16599,{Vt:e.type});t={verify:B0(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,s){const l=s.transform;if(l instanceof xl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof El)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Uf)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Te(20930,{transform:s.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:eT(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te(27497)})(r,e.precondition)),t}function iT(r,e){return r&&r.length>0?(rt(e!==void 0,14353),r.map((t=>(function(i,o){let s=i.updateTime?ei(i.updateTime):ei(o);return s.isEqual(Ne.min())&&(s=ei(o)),new BS(s,i.transformResults||[])})(t,e)))):[]}function oT(r,e){return{documents:[b_(r,e.path)]}}function aT(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=b_(r,i);const o=(function(h){if(h.length!==0)return M_(Pn.create(h,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const s=(function(h){if(h.length!==0)return h.map((p=>(function(m){return{field:_s(m.field),direction:lT(m.dir)}})(p)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=F0(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function sT(r){let e=tT(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){rt(n===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=(function(v){const m=k_(v);return m instanceof Pn&&l_(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(v){return v.map((m=>(function(E){return new _l(xs(E.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(m)))})(t.orderBy));let l=null;t.limit&&(l=(function(v){let m;return m=typeof v=="object"?v.value:v,th(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(v){const m=!!v.before,_=v.values||[];return new Bf(_,m)})(t.startAt));let h=null;return t.endAt&&(h=(function(v){const m=!v.before,_=v.values||[];return new Bf(_,m)})(t.endAt)),CS(e,i,s,o,l,"F",c,h)}function uT(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k_(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=xs(t.unaryFilter.field);return Ft.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=xs(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xs(t.unaryFilter.field);return Ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xs(t.unaryFilter.field);return Ft.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ft.create(xs(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Pn.create(t.compositeFilter.filters.map((n=>k_(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function lT(r){return YS[r]}function cT(r){return QS[r]}function fT(r){return ZS[r]}function _s(r){return{fieldPath:r.canonicalString()}}function xs(r){return fr.fromServerFormat(r.fieldPath)}function M_(r){return r instanceof Ft?(function(t){if(t.op==="=="){if(xm(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NAN"}};if(_m(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xm(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NOT_NAN"}};if(_m(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(t.field),op:cT(t.op),value:t.value}}})(r):r instanceof Pn?(function(t){const n=t.getFilters().map((i=>M_(i)));return n.length===1?n[0]:{compositeFilter:{op:fT(t.op),filters:n}}})(r):Te(54877,{filter:r})}function hT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function L_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,n,i,o=Ne.min(),s=Ne.min(),l=dr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new _o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.yt=e}}function pT(r){const e=sT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?L0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.Cn=new vT}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(No.min())}updateCollectionGroup(e,t,n){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class vT{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Xt(ht.comparator),o=!i.has(n);return this.index[t]=i.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Xt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F_=41943040;class Br{static withCacheSize(e){return new Br(e,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(F_,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fs(0)}static cr(){return new Fs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LruGarbageCollector",mT=1048576;function Lm([r,e],[t,n]){const i=je(r,t);return i===0?je(e,n):i}class yT{constructor(e){this.Ir=e,this.buffer=new Xt(Lm),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Lm(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _T{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(Mm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$s(t)?he(Mm,"Ignoring IndexedDB error during garbage collection: ",t):await Ws(t)}await this.Vr(3e5)}))}}class xT{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(eh.ce);const n=new yT(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(km)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),km):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,o,s,l,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,s=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(n=v,l=Date.now(),this.removeTargets(e,n,t)))).next((v=>(o=v,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((v=>(h=Date.now(),ms()<=Ue.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${v} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v}))))}}function wT(r,e){return new xT(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.changes=new Ca((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?te.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&ll(n.mutation,i,Zr.empty(),dt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ze()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ze()){const i=ga();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((o=>{let s=Zu();return o.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const n=ga();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ze())))}populateOverlays(e,t,n){const i=[];return n.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,l)=>{t.set(s,l)}))}))}computeViews(e,t,n,i){let o=Oi();const s=ul(),l=(function(){return ul()})();return t.forEach(((c,h)=>{const p=n.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Fo)?o=o.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),ll(p.mutation,h,p.mutation.getFieldMask(),dt.now())):s.set(h.key,Zr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((h,p)=>s.set(h,p))),t.forEach(((h,p)=>l.set(h,new AT(p,s.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,t){const n=ul();let i=new Ct(((s,l)=>s-l)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const l of s)l.keys().forEach((c=>{const h=t.get(c);if(h===null)return;let p=n.get(c)||Zr.empty();p=l.applyToLocalView(h,p),n.set(c,p);const v=(i.get(l.batchId)||ze()).add(c);i=i.insert(l.batchId,v)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,v=__();p.forEach((m=>{if(!o.has(m)){const _=C_(t.get(m),n.get(m));_!==null&&v.set(m,_),o=o.add(m)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,v))}return te.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(s){return xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-o.size):te.resolve(ga());let l=gl,c=o;return s.next((h=>te.forEach(h,((p,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(p)?te.resolve():this.remoteDocumentCache.getEntry(e,p).next((m=>{c=c.insert(p,m)}))))).next((()=>this.populateOverlays(e,h,o))).next((()=>this.computeViews(e,c,h,ze()))).next((p=>({batchId:l,changes:y_(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((n=>{let i=Zu();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const o=t.collectionGroup;let s=Zu();return this.indexManager.getCollectionParents(e,o).next((l=>te.forEach(l,(c=>{const h=(function(v,m){return new qs(m,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,n,i).next((p=>{p.forEach(((v,m)=>{s=s.insert(v,m)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,i)))).next((s=>{o.forEach(((c,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,Er.newInvalidDocument(p)))}));let l=Zu();return s.forEach(((c,h)=>{const p=o.get(c);p!==void 0&&ll(p.mutation,h,Zr.empty(),dt.now()),ih(t,h)&&(l=l.insert(c,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ei(i.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:pT(i.bundledQuery),readTime:ei(i.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.overlays=new Ct(xe.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ga();return te.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&n.set(i,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,o)=>{this.St(e,t,o)})),te.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),te.resolve()}getOverlaysForCollection(e,t,n){const i=ga(),o=t.length+1,s=new xe(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>n&&i.set(c.getKey(),c)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let o=new Ct(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let p=o.get(h.largestBatchId);p===null&&(p=ga(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=ga(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return te.resolve(l)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new GS(t,n));let o=this.qr.get(t);o===void 0&&(o=ze(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.Qr=new Xt(tr.$r),this.Ur=new Xt(tr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new tr(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new tr(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new xe(new ht([])),n=new tr(t,e),i=new tr(t,e+1),o=[];return this.Ur.forEachInRange([n,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new ht([])),n=new tr(t,e),i=new tr(t,e+1);let o=ze();return this.Ur.forEachInRange([n,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const t=new tr(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class tr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xt(tr.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new HS(o,t,n,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new tr(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return te.resolve(s)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),o=i<0?0:i;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?E1:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tr(t,0),i=new tr(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,i],(s=>{const l=this.Xr(s.Yr);o.push(l)})),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xt(je);return t.forEach((i=>{const o=new tr(i,0),s=new tr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(l=>{n=n.add(l.Yr)}))})),te.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let o=n;xe.isDocumentKey(o)||(o=o.child(""));const s=new tr(new xe(o),0);let l=new Xt(je);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!n.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Yr)),!0)}),s),te.resolve(this.ti(l))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return te.forEach(t.mutations,(i=>{const o=new tr(i.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new tr(t,0),i=this.Zr.firstAfterOrEqual(n);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.ri=e,this.docs=(function(){return new Ct(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return te.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(t))}getEntries(e,t){let n=Oi();return t.forEach((i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Er.newInvalidDocument(i))})),te.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let o=Oi();const s=t.path,l=new xe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||nS(rS(p),n)<=0||(i.has(p.key)||ih(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,n,i){Te(9500)}ii(e,t){return te.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new PT(this)}getSize(e){return te.resolve(this.size)}}class PT extends ET{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.persistence=e,this.si=new Ca((t=>C1(t)),S1),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new b1,this.targetCount=0,this.ai=Fs.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,n){let i=0;const o=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),te.waitFor(o).next((()=>i))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return te.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),te.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return te.resolve(n)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t){this.ui={},this.overlays={},this.ci=new eh(0),this.li=!1,this.li=!0,this.hi=new TT,this.referenceDelegate=e(this),this.Pi=new OT(this),this.indexManager=new gT,this.remoteDocumentCache=(function(i){return new NT(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new dT(t),this.Ii=new CT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ST,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new RT(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){he("MemoryPersistence","Starting transaction:",e);const i=new bT(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return te.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class bT extends oS{constructor(e){super(),this.currentSequenceNumber=e}}class D1{constructor(e){this.persistence=e,this.Ri=new b1,this.Vi=null}static mi(e){return new D1(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),te.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(n=>{const i=xe.fromPath(n);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zf{constructor(e,t){this.persistence=e,this.pi=new Ca((n=>uS(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=wT(this,t)}static mi(e,t){return new zf(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((n,i)=>this.br(e,n,i).next((o=>o?te.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((l=>{l||(n++,o.removeEntry(s,Ne.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mf(e.data.value)),t}br(e,t,n){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return te.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=ze(),i=ze();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new k1(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sA()?8:aS(Ir())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const o={result:null};return this.ys(e,t).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,t,i,n).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new DT;return this.Ss(e,t,s).next((l=>{if(o.result=l,this.Vs)return this.bs(e,t,s,l.size)}))})).next((()=>o.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(ms()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ys(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(ms()<=Ue.DEBUG&&he("QueryEngine","Query:",ys(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(ms()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ys(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):te.resolve())}ys(e,t){if(Im(t))return te.resolve(null);let n=Jn(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=L0(t,null,"F"),n=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const s=ze(...o);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,n).next((c=>{const h=this.Ds(t,l);return this.Cs(t,h,s,c.readTime)?this.ys(e,L0(t,null,"F")):this.vs(e,h,t,c)}))))})))))}ws(e,t,n,i){return Im(t)||i.isEqual(Ne.min())?te.resolve(null):this.ps.getDocuments(e,n).next((o=>{const s=this.Ds(t,o);return this.Cs(t,s,n,i)?te.resolve(null):(ms()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ys(t)),this.vs(e,s,t,tS(i,gl)).next((l=>l)))}))}Ds(e,t){let n=new Xt(v_(e));return t.forEach(((i,o)=>{ih(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,n){return ms()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ys(t)),this.ps.getDocumentsMatchingQuery(e,t,No.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((o=>(t.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="LocalStore",MT=3e8;class LT{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ct(je),this.xs=new Ca((o=>C1(o)),S1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function FT(r,e,t,n){return new LT(r,e,t,n)}async function B_(r,e){const t=Oe(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const s=[],l=[];let c=ze();for(const h of i){s.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of o){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(n,c).next((h=>({Ls:h,removedBatchIds:s,addedBatchIds:l})))}))}))}function VT(r,e){const t=Oe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,p){const v=h.batch,m=v.keys();let _=te.resolve();return m.forEach((E=>{_=_.next((()=>p.getEntry(c,E))).next((I=>{const S=h.docVersions.get(E);rt(S!==null,48541),I.version.compareTo(S)<0&&(v.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),p.addEntry(I)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,v)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(l){let c=ze();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function U_(r){const e=Oe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function BT(r,e){const t=Oe(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const l=[];e.targetChanges.forEach(((p,v)=>{const m=i.get(v);if(!m)return;l.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,p.addedDocuments,v))));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?_=_.withResumeToken(dr.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,n)),i=i.insert(v,_),(function(I,S,D){return I.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=MT?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(m,_,p)&&l.push(t.Pi.updateTargetData(o,_))}));let c=Oi(),h=ze();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))})),l.push(UT(o,s,e.documentUpdates).next((p=>{c=p.ks,h=p.qs}))),!n.isEqual(Ne.min())){const p=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));l.push(p)}return te.waitFor(l).next((()=>s.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,c,h))).next((()=>c))})).then((o=>(t.Ms=i,o)))}function UT(r,e,t){let n=ze(),i=ze();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let s=Oi();return t.forEach(((l,c)=>{const h=o.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ne.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):he(M1,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function jT(r,e){const t=Oe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=E1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function zT(r,e){const t=Oe(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((o=>o?(i=o,te.resolve(i)):t.Pi.allocateTargetId(n).next((s=>(i=new _o(e,s,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function j0(r,e,t){const n=Oe(r),i=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!$s(s))throw s;he(M1,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function Fm(r,e,t){const n=Oe(r);let i=Ne.min(),o=ze();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,h,p){const v=Oe(c),m=v.xs.get(p);return m!==void 0?te.resolve(v.Ms.get(m)):v.Pi.getTargetData(h,p)})(n,s,Jn(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,l.targetId).next((c=>{o=c}))})).next((()=>n.Fs.getDocumentsMatchingQuery(s,e,t?i:Ne.min(),t?o:ze()))).next((l=>(HT(n,TS(e),l),{documents:l,Qs:o})))))}function HT(r,e,t){let n=r.Os.get(e)||Ne.min();t.forEach(((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class Vm{constructor(){this.activeTargetIds=DS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GT{constructor(){this.Mo=new Vm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="ConnectivityMonitor";class Um{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(Bm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(Bm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function z0(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="RestConnection",$T={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Ff?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,o){const s=z0(),l=this.zo(e,t.toUriEncodedString());he(a0,`Sending RPC '${e}' ${s}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:h}=new URL(l),p=js(h);return this.Jo(e,l,c,n,p).then((v=>(he(a0,`Received RPC '${e}' ${s}: `,v),v)),(v=>{throw Ds(a0,`RPC '${e}' ${s} failed with error: `,v,"url: ",l,"request:",n),v}))}Ho(e,t,n,i,o,s){return this.Go(e,t,n,i,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),n&&n.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const n=$T[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="WebChannelConnection";class KT extends qT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,o){const s=z0();return new Promise(((l,c)=>{const h=new z2;h.setWithCredentials(!0),h.listenOnce(H2.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case vf.NO_ERROR:const v=h.getResponseJson();he(_r,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(v)),l(v);break;case vf.TIMEOUT:he(_r,`RPC '${e}' ${s} timed out`),c(new ce(ee.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const m=h.getStatus();if(he(_r,`RPC '${e}' ${s} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_?.error;if(E&&E.status&&E.message){const I=(function(D){const O=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(O)>=0?O:ee.UNKNOWN})(E.status);c(new ce(I,E.message))}else c(new ce(ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ce(ee.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:s,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{he(_r,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(i);he(_r,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",p,n,15)}))}T_(e,t,n){const i=z0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$2(),l=W2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const p=o.join("");he(_r,`Creating RPC '${e}' stream ${i}: ${p}`,c);const v=s.createWebChannel(p,c);this.I_(v);let m=!1,_=!1;const E=new XT({Yo:S=>{_?he(_r,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(he(_r,`Opening RPC '${e}' stream ${i} transport.`),v.open(),m=!0),he(_r,`RPC '${e}' stream ${i} sending:`,S),v.send(S))},Zo:()=>v.close()}),I=(S,D,O)=>{S.listen(D,(V=>{try{O(V)}catch(z){setTimeout((()=>{throw z}),0)}}))};return I(v,Qu.EventType.OPEN,(()=>{_||(he(_r,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),I(v,Qu.EventType.CLOSE,(()=>{_||(_=!0,he(_r,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(v))})),I(v,Qu.EventType.ERROR,(S=>{_||(_=!0,Ds(_r,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new ce(ee.UNAVAILABLE,"The operation could not be completed")))})),I(v,Qu.EventType.MESSAGE,(S=>{if(!_){const D=S.data[0];rt(!!D,16349);const O=D,V=O?.error||O[0]?.error;if(V){he(_r,`RPC '${e}' stream ${i} received error:`,V);const z=V.status;let G=(function(N){const k=Lt[N];if(k!==void 0)return T_(k)})(z),B=V.message;G===void 0&&(G=ee.INTERNAL,B="Unknown error status: "+z+" with message "+V.message),_=!0,E.a_(new ce(G,B)),v.close()}else he(_r,`RPC '${e}' stream ${i} received:`,D),E.u_(D)}})),I(l,G2.STAT_EVENT,(S=>{S.stat===N0.PROXY?he(_r,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===N0.NOPROXY&&he(_r,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function s0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(r){return new JS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t,n=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="PersistentStream";class z_{constructor(e,t,n,i,o,s,l,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new j_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Ni(t.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new ce(ee.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(jm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(jm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YT extends z_{constructor(e,t,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rT(this.serializer,e),n=(function(o){if(!("targetChange"in o))return Ne.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?ei(s.readTime):Ne.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=U0(this.serializer),t.addTarget=(function(o,s){let l;const c=s.target;if(l=k0(c)?{documents:oT(o,c)}:{query:aT(o,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=P_(o,s.resumeToken);const h=F0(o,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(Ne.min())>0){l.readTime=jf(o,s.snapshotVersion.toTimestamp());const h=F0(o,s.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const n=uT(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=U0(this.serializer),t.removeTarget=e,this.q_(t)}}class QT extends z_{constructor(e,t,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iT(e.writeResults,e.commitTime),n=ei(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=U0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>nT(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{}class JT extends ZT{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,V0(t,n),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(ee.UNKNOWN,o.toString())}))}Ho(e,t,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,V0(t,n),i,s,l,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(ee.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class e4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ni(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class t4{constructor(e,t,n,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{n.enqueueAndForget((async()=>{Sa(this)&&(he(Aa,"Restarting streams for network reachability change."),await(async function(c){const h=Oe(c);h.Ea.add(4),await bl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await lh(h)})(this))}))})),this.Ra=new e4(n,i)}}async function lh(r){if(Sa(r))for(const e of r.da)await e(!0)}async function bl(r){for(const e of r.da)await e(!1)}function H_(r,e){const t=Oe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),B1(t)?V1(t):Xs(t).O_()&&F1(t,e))}function L1(r,e){const t=Oe(r),n=Xs(t);t.Ia.delete(e),n.O_()&&G_(t,e),t.Ia.size===0&&(n.O_()?n.L_():Sa(t)&&t.Ra.set("Unknown"))}function F1(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xs(r).Y_(e)}function G_(r,e){r.Va.Ue(e),Xs(r).Z_(e)}function V1(r){r.Va=new KS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Xs(r).start(),r.Ra.ua()}function B1(r){return Sa(r)&&!Xs(r).x_()&&r.Ia.size>0}function Sa(r){return Oe(r).Ea.size===0}function W_(r){r.Va=void 0}async function r4(r){r.Ra.set("Online")}async function n4(r){r.Ia.forEach(((e,t)=>{F1(r,e)}))}async function i4(r,e){W_(r),B1(r)?(r.Ra.ha(e),V1(r)):r.Ra.set("Unknown")}async function o4(r,e,t){if(r.Ra.set("Online"),e instanceof N_&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(r,e)}catch(n){he(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Hf(r,n)}else if(e instanceof xf?r.Va.Ze(e):e instanceof R_?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ne.min()))try{const n=await U_(r.localStore);t.compareTo(n)>=0&&await(function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=o.Ia.get(h);p&&o.Ia.set(h,p.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,h)=>{const p=o.Ia.get(c);if(!p)return;o.Ia.set(c,p.withResumeToken(dr.EMPTY_BYTE_STRING,p.snapshotVersion)),G_(o,c);const v=new _o(p.target,c,h,p.sequenceNumber);F1(o,v)})),o.remoteSyncer.applyRemoteEvent(l)})(r,t)}catch(n){he(Aa,"Failed to raise snapshot:",n),await Hf(r,n)}}async function Hf(r,e,t){if(!$s(e))throw e;r.Ea.add(1),await bl(r),r.Ra.set("Offline"),t||(t=()=>U_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Aa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await lh(r)}))}function $_(r,e){return e().catch((t=>Hf(r,t,e)))}async function ch(r){const e=Oe(r),t=Do(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:E1;for(;a4(e);)try{const i=await jT(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,s4(e,i)}catch(i){await Hf(e,i)}q_(e)&&X_(e)}function a4(r){return Sa(r)&&r.Ta.length<10}function s4(r,e){r.Ta.push(e);const t=Do(r);t.O_()&&t.X_&&t.ea(e.mutations)}function q_(r){return Sa(r)&&!Do(r).x_()&&r.Ta.length>0}function X_(r){Do(r).start()}async function u4(r){Do(r).ra()}async function l4(r){const e=Do(r);for(const t of r.Ta)e.ea(t.mutations)}async function c4(r,e,t){const n=r.Ta.shift(),i=N1.from(n,e,t);await $_(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await ch(r)}async function f4(r,e){e&&Do(r).X_&&await(async function(n,i){if((function(s){return $S(s)&&s!==ee.ABORTED})(i.code)){const o=n.Ta.shift();Do(n).B_(),await $_(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i))),await ch(n)}})(r,e),q_(r)&&X_(r)}async function zm(r,e){const t=Oe(r);t.asyncQueue.verifyOperationInProgress(),he(Aa,"RemoteStore received new credentials");const n=Sa(t);t.Ea.add(3),await bl(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lh(t)}async function h4(r,e){const t=Oe(r);e?(t.Ea.delete(2),await lh(t)):e||(t.Ea.add(2),await bl(t),t.Ra.set("Unknown"))}function Xs(r){return r.ma||(r.ma=(function(t,n,i){const o=Oe(t);return o.sa(),new YT(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:r4.bind(null,r),t_:n4.bind(null,r),r_:i4.bind(null,r),H_:o4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),B1(r)?V1(r):r.Ra.set("Unknown")):(await r.ma.stop(),W_(r))}))),r.ma}function Do(r){return r.fa||(r.fa=(function(t,n,i){const o=Oe(t);return o.sa(),new QT(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:u4.bind(null,r),r_:f4.bind(null,r),ta:l4.bind(null,r),na:c4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ch(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Aa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t,n,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,o){const s=Date.now()+n,l=new U1(e,t,s,i,o);return l.start(n),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j1(r,e){if(Ni("AsyncQueue",`${e}: ${r}`),$s(r))return new ce(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{static emptySet(e){return new Ts(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||xe.comparator(t.key,n.key):(t,n)=>xe.comparator(t.key,n.key),this.keyedMap=Zu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ts)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ts;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.ga=new Ct(xe.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Vs{constructor(e,t,n,i,o,s,l,c,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,i,o){const s=[];return t.forEach((l=>{s.push({type:0,doc:l})})),new Vs(e,t,Ts.emptySet(t),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class p4{constructor(){this.queries=Gm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=Oe(t),o=i.queries;i.queries=Gm(),o.forEach(((s,l)=>{for(const c of l.Sa)c.onError(n)}))})(this,new ce(ee.ABORTED,"Firestore shutting down"))}}function Gm(){return new Ca((r=>g_(r)),nh)}async function g4(r,e){const t=Oe(r);let n=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(n=2):(o=new d4,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const l=j1(s,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&z1(t)}async function v4(r,e){const t=Oe(r),n=e.query;let i=3;const o=t.queries.get(n);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function m4(r,e){const t=Oe(r);let n=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(n=!0);s.wa=i}}n&&z1(t)}function y4(r,e,t){const n=Oe(r),i=n.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);n.queries.delete(e)}function z1(r){r.Ca.forEach((e=>{e.next()}))}var H0,Wm;(Wm=H0||(H0={})).Ma="default",Wm.Cache="cache";class _4{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Vs(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==H0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.key=e}}class Y_{constructor(e){this.key=e}}class x4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=v_(e),this.tu=new Ts(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Hm,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,v)=>{const m=i.get(p),_=ih(this.query,v)?v:null,E=!!m&&this.mutatedKeys.has(m.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;m&&_?m.data.isEqual(_.data)?E!==I&&(n.track({type:3,doc:_}),S=!0):this.su(m,_)||(n.track({type:2,doc:_}),S=!0,(c&&this.eu(_,c)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(n.track({type:0,doc:_}),S=!0):m&&!_&&(n.track({type:1,doc:m}),S=!0,(c||h)&&(l=!0)),S&&(_?(s=s.add(_),o=I?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),n.track({type:1,doc:p})}return{tu:s,iu:n,Cs:l,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,v)=>(function(_,E){const I=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:S})}};return I(_)-I(E)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(n),i=i??!1;const l=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,s.length!==0||h?{snapshot:new Vs(this.query,e.tu,o,s,e.mutatedKeys,c===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Y_(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new K_(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const H1="SyncEngine";class w4{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class E4{constructor(e){this.key=e,this.hu=!1}}class A4{constructor(e,t,n,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ca((l=>g_(l)),nh),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(xe.comparator),this.Au=new Map,this.Ru=new b1,this.Vu={},this.mu=new Map,this.fu=Fs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I4(r,e,t=!0){const n=rx(r);let i;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Q_(n,e,t,!0),i}async function C4(r,e){const t=rx(r);await Q_(t,e,!0,!1)}async function Q_(r,e,t,n){const i=await zT(r.localStore,Jn(e)),o=i.targetId,s=r.sharedClientState.addLocalQueryTarget(o,t);let l;return n&&(l=await S4(r,e,o,s==="current",i.resumeToken)),r.isPrimaryClient&&t&&H_(r.remoteStore,i),l}async function S4(r,e,t,n,i){r.pu=(v,m,_)=>(async function(I,S,D,O){let V=S.view.ru(D);V.Cs&&(V=await Fm(I.localStore,S.query,!1).then((({documents:R})=>S.view.ru(R,V))));const z=O&&O.targetChanges.get(S.targetId),G=O&&O.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(V,I.isPrimaryClient,z,G);return qm(I,S.targetId,B.au),B.snapshot})(r,v,m,_);const o=await Fm(r.localStore,e,!0),s=new x4(e,o.Qs),l=s.ru(o.documents),c=Ol.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),h=s.applyChanges(l,r.isPrimaryClient,c);qm(r,t,h.au);const p=new w4(e,t,s);return r.Tu.set(e,p),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),h.snapshot}async function T4(r,e,t){const n=Oe(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);if(o.length>1)return n.Iu.set(i.targetId,o.filter((s=>!nh(s,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await j0(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&L1(n.remoteStore,i.targetId),G0(n,i.targetId)})).catch(Ws)):(G0(n,i.targetId),await j0(n.localStore,i.targetId,!0))}async function R4(r,e){const t=Oe(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),L1(t.remoteStore,n.targetId))}async function N4(r,e,t){const n=L4(r);try{const i=await(function(s,l){const c=Oe(s),h=dt.now(),p=l.reduce(((_,E)=>_.add(E.key)),ze());let v,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let E=Oi(),I=ze();return c.Ns.getEntries(_,p).next((S=>{E=S,E.forEach(((D,O)=>{O.isValidDocument()||(I=I.add(D))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,E))).next((S=>{v=S;const D=[];for(const O of l){const V=jS(O,v.get(O.key).overlayedDocument);V!=null&&D.push(new Fo(O.key,V,a_(V.value.mapValue),hn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,D,l)})).next((S=>{m=S;const D=S.applyToLocalDocumentSet(v,I);return c.documentOverlayCache.saveOverlays(_,S.batchId,D)}))})).then((()=>({batchId:m.batchId,changes:y_(v)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,l,c){let h=s.Vu[s.currentUser.toKey()];h||(h=new Ct(je)),h=h.insert(l,c),s.Vu[s.currentUser.toKey()]=h})(n,i.batchId,t),await Dl(n,i.changes),await ch(n.remoteStore)}catch(i){const o=j1(i,"Failed to persist write");t.reject(o)}}async function Z_(r,e){const t=Oe(r);try{const n=await BT(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=t.Au.get(o);s&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?rt(s.hu,14607):i.removedDocuments.size>0&&(rt(s.hu,42227),s.hu=!1))})),await Dl(t,n,e)}catch(n){await Ws(n)}}function $m(r,e,t){const n=Oe(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const c=Oe(s);c.onlineState=l;let h=!1;c.queries.forEach(((p,v)=>{for(const m of v.Sa)m.va(l)&&(h=!0)})),h&&z1(c)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function P4(r,e,t){const n=Oe(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),o=i&&i.key;if(o){let s=new Ct(xe.comparator);s=s.insert(o,Er.newNoDocument(o,Ne.min()));const l=ze().add(o),c=new sh(Ne.min(),new Map,new Ct(je),s,l);await Z_(n,c),n.du=n.du.remove(o),n.Au.delete(e),G1(n)}else await j0(n.localStore,e,!1).then((()=>G0(n,e,t))).catch(Ws)}async function O4(r,e){const t=Oe(r),n=e.batch.batchId;try{const i=await VT(t.localStore,e);ex(t,n,null),J_(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Dl(t,i)}catch(i){await Ws(i)}}async function b4(r,e,t){const n=Oe(r);try{const i=await(function(s,l){const c=Oe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next((v=>(rt(v!==null,37113),p=v.keys(),c.mutationQueue.removeMutationBatch(h,v)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>c.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);ex(n,e,t),J_(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Dl(n,i)}catch(i){await Ws(i)}}function J_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ex(r,e,t){const n=Oe(r);let i=n.Vu[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function G0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||tx(r,n)}))}function tx(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(L1(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),G1(r))}function qm(r,e,t){for(const n of t)n instanceof K_?(r.Ru.addReference(n.key,e),D4(r,n)):n instanceof Y_?(he(H1,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||tx(r,n.key)):Te(19791,{wu:n})}function D4(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(he(H1,"New document in limbo: "+t),r.Eu.add(n),G1(r))}function G1(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new xe(ht.fromString(e)),n=r.fu.next();r.Au.set(n,new E4(t)),r.du=r.du.insert(t,n),H_(r.remoteStore,new _o(Jn(d_(t.path)),n,"TargetPurposeLimboResolution",eh.ce))}}async function Dl(r,e,t){const n=Oe(r),i=[],o=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach(((l,c)=>{s.push(n.pu(c,e,t).then((h=>{if((h||t)&&n.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(c.targetId)?.current;n.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){i.push(h);const p=k1.As(c.targetId,h);o.push(p)}})))})),await Promise.all(s),n.Pu.H_(i),await(async function(c,h){const p=Oe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>te.forEach(h,(m=>te.forEach(m.Es,(_=>p.persistence.referenceDelegate.addReference(v,m.targetId,_))).next((()=>te.forEach(m.ds,(_=>p.persistence.referenceDelegate.removeReference(v,m.targetId,_)))))))))}catch(v){if(!$s(v))throw v;he(M1,"Failed to update sequence numbers: "+v)}for(const v of h){const m=v.targetId;if(!v.fromCache){const _=p.Ms.get(m),E=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(E);p.Ms=p.Ms.insert(m,I)}}})(n.localStore,o))}async function k4(r,e){const t=Oe(r);if(!t.currentUser.isEqual(e)){he(H1,"User change. New user:",e.toKey());const n=await B_(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach((l=>{l.forEach((c=>{c.reject(new ce(ee.CANCELLED,s))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Dl(t,n.Ls)}}function M4(r,e){const t=Oe(r),n=t.Au.get(e);if(n&&n.hu)return ze().add(n.key);{let i=ze();const o=t.Iu.get(e);if(!o)return i;for(const s of o){const l=t.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}function rx(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.Pu.H_=m4.bind(null,e.eventManager),e.Pu.yu=y4.bind(null,e.eventManager),e}function L4(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,e),e}class Gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FT(this.persistence,new kT,e.initialUser,this.serializer)}Cu(e){return new V_(D1.mi,this.serializer)}Du(e){return new GT}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gf.provider={build:()=>new Gf};class F4 extends Gf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rt(this.persistence.referenceDelegate instanceof zf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new _T(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new V_((n=>zf.mi(n,t)),this.serializer)}}class W0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>$m(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=k4.bind(null,this.syncEngine),await h4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new p4})()}createDatastore(e){const t=uh(e.databaseInfo.databaseId),n=(function(o){return new KT(o)})(e.databaseInfo);return(function(o,s,l,c){return new JT(o,s,l,c)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,o,s,l){return new t4(n,i,o,s,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>$m(this.syncEngine,t,0)),(function(){return Um.v()?new Um:new WT})())}createSyncEngine(e,t){return(function(i,o,s,l,c,h,p){const v=new A4(i,o,s,l,c,h);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Oe(t);he(Aa,"RemoteStore shutting down."),n.Ea.add(5),await bl(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}W0.provider={build:()=>new W0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="FirestoreClient";class B4{constructor(e,t,n,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=wr.UNAUTHENTICATED,this.clientId=w1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async s=>{he(ko,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(he(ko,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=j1(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function u0(r,e){r.asyncQueue.verifyOperationInProgress(),he(ko,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await B_(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Xm(r,e){r.asyncQueue.verifyOperationInProgress();const t=await U4(r);he(ko,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>zm(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>zm(e.remoteStore,i))),r._onlineComponents=e}async function U4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(ko,"Using user provided OfflineComponentProvider");try{await u0(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ds("Error using user provided cache. Falling back to memory cache: "+t),await u0(r,new Gf)}}else he(ko,"Using default OfflineComponentProvider"),await u0(r,new F4(void 0));return r._offlineComponents}async function nx(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(ko,"Using user provided OnlineComponentProvider"),await Xm(r,r._uninitializedComponentsProvider._online)):(he(ko,"Using default OnlineComponentProvider"),await Xm(r,new W0))),r._onlineComponents}function j4(r){return nx(r).then((e=>e.syncEngine))}async function z4(r){const e=await nx(r),t=e.eventManager;return t.onListen=I4.bind(null,e.syncEngine),t.onUnlisten=T4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R4.bind(null,e.syncEngine),t}function H4(r,e,t={}){const n=new Io;return r.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,h){const p=new V4({next:m=>{p.Nu(),s.enqueueAndForget((()=>v4(o,v))),m.fromCache&&c.source==="server"?h.reject(new ce(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),v=new _4(l,p,{includeMetadataChanges:!0,qa:!0});return g4(o,v)})(await z4(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firestore.googleapis.com",Ym=!0;class Qm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ox,this.ssl=Ym}else this.host=e.host,this.ssl=e.ssl??Ym;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=F_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mT)throw new ce(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ix(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new GC;switch(n.type){case"firstParty":return new XC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Km.get(t);n&&(he("ComponentProvider","Removing Datastore"),Km.delete(t),n.terminate())})(this),Promise.resolve()}}function G4(r,e,t,n={}){r=Pi(r,fh);const i=js(e),o=r._getSettings(),s={...o,emulatorOptions:r._getEmulatorOptions()},l=`${e}:${t}`;i&&(Jy(`https://${l}`),e2("Firestore",!0)),o.host!==ox&&o.host!==l&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:i,emulatorOptions:n};if(!ya(c,s)&&(r._setSettings(c),n.mockUserToken)){let h,p;if(typeof n.mockUserToken=="string")h=n.mockUserToken,p=wr.MOCK_USER;else{h=ZE(n.mockUserToken,r._app?.options.projectId);const v=n.mockUserToken.sub||n.mockUserToken.user_id;if(!v)throw new ce(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new wr(v)}r._authCredentials=new WC(new X2(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class Bt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Nl(t,Bt._jsonSchema))return new Bt(e,n||null,new xe(ht.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Vt("string",Bt._jsonSchemaVersion),referencePath:Vt("string")};class Co extends Ta{constructor(e,t,n){super(e,t,d_(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new xe(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function So(r,e,...t){if(r=Kt(r),K2("collection","path",e),r instanceof fh){const n=ht.fromString(e,...t);return cm(n),new Co(r,null,n)}{if(!(r instanceof Bt||r instanceof Co))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ht.fromString(e,...t));return cm(n),new Co(r.firestore,null,n)}}function Si(r,e,...t){if(r=Kt(r),arguments.length===1&&(e=w1.newId()),K2("doc","path",e),r instanceof fh){const n=ht.fromString(e,...t);return lm(n),new Bt(r,null,new xe(n))}{if(!(r instanceof Bt||r instanceof Co))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ht.fromString(e,...t));return lm(n),new Bt(r.firestore,r instanceof Co?r.converter:null,new xe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="AsyncQueue";class Jm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new j_(this,"async_queue_retry"),this._c=()=>{const n=s0();n&&he(Zm,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=s0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=s0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Io;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$s(e))throw e;he(Zm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Ni("INTERNAL UNHANDLED ERROR: ",ey(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=U1.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Te(47125,{Pc:ey(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ey(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ks extends fh{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Jm,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jm(e),this._firestoreClient=void 0,await e}}}function W4(r,e){const t=typeof r=="object"?r:i2(),n=typeof r=="string"?r:Ff,i=f1(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=YE("firestore");o&&G4(i,...o)}return i}function ax(r){if(r._terminated)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$4(r),r._firestoreClient}function $4(r){const e=r._freezeSettings(),t=(function(i,o,s,l){return new fS(i,o,s,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ix(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new B4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(dr.fromBase64String(e))}catch(t){throw new ce(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cn(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nl(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:Vt("string",cn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ti._jsonSchemaVersion}}static fromJSON(e){if(Nl(e,ti._jsonSchema))return new ti(e.latitude,e.longitude)}}ti._jsonSchemaVersion="firestore/geoPoint/1.0",ti._jsonSchema={type:Vt("string",ti._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nl(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ri(e.vectorValues);throw new ce(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:Vt("string",ri._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=/^__.*__$/;class X4{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class sx{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ux(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class W1{constructor(e,t,n,i,o,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new W1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ux(this.Ac)&&q4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K4{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||uh(e)}Cc(e,t,n,i=!1){return new W1({Ac:e,methodName:t,Dc:n,path:fr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ph(r){const e=r._freezeSettings(),t=uh(r._databaseId);return new K4(r._databaseId,!!e.ignoreUndefinedProperties,t)}function lx(r,e,t,n,i,o={}){const s=r.Cc(o.merge||o.mergeFields?2:0,e,t,i);q1("Data must be an object, but it was:",s,n);const l=cx(n,s);let c,h;if(o.merge)c=new Zr(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const m=$0(e,v,t);if(!s.contains(m))throw new ce(ee.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hx(p,m)||p.push(m)}c=new Zr(p),h=s.fieldTransforms.filter((v=>c.covers(v.field)))}else c=null,h=s.fieldTransforms;return new X4(new Ur(l),c,h)}class gh extends dh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}class $1 extends dh{_toFieldTransform(e){return new FS(e.path,new xl)}isEqual(e){return e instanceof $1}}function Y4(r,e,t,n){const i=r.Cc(1,e,t);q1("Data must be an object, but it was:",i,n);const o=[],s=Ur.empty();Lo(n,((c,h)=>{const p=X1(e,c,t);h=Kt(h);const v=i.yc(p);if(h instanceof gh)o.push(p);else{const m=kl(h,v);m!=null&&(o.push(p),s.set(p,m))}}));const l=new Zr(o);return new sx(s,l,i.fieldTransforms)}function Q4(r,e,t,n,i,o){const s=r.Cc(1,e,t),l=[$0(e,n,t)],c=[i];if(o.length%2!=0)throw new ce(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push($0(e,o[m])),c.push(o[m+1]);const h=[],p=Ur.empty();for(let m=l.length-1;m>=0;--m)if(!hx(h,l[m])){const _=l[m];let E=c[m];E=Kt(E);const I=s.yc(_);if(E instanceof gh)h.push(_);else{const S=kl(E,I);S!=null&&(h.push(_),p.set(_,S))}}const v=new Zr(h);return new sx(p,v,s.fieldTransforms)}function Z4(r,e,t,n=!1){return kl(t,r.Cc(n?4:3,e))}function kl(r,e){if(fx(r=Kt(r)))return q1("Unsupported field value:",e,r),cx(r,e);if(r instanceof dh)return(function(n,i){if(!ux(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const o=[];let s=0;for(const l of n){let c=kl(l,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(r,e)}return(function(n,i){if((n=Kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return kS(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=dt.fromDate(n);return{timestampValue:jf(i.serializer,o)}}if(n instanceof dt){const o=new dt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:jf(i.serializer,o)}}if(n instanceof ti)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof cn)return{bytesValue:P_(i.serializer,n._byteString)};if(n instanceof Bt){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:O1(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof ri)return(function(s,l){return{mapValue:{fields:{[i_]:{stringValue:o_},[Vf]:{arrayValue:{values:s.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return T1(l.serializer,h)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${Jf(n)}`)})(r,e)}function cx(r,e){const t={};return Z2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(r,((n,i)=>{const o=kl(i,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function fx(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof ti||r instanceof cn||r instanceof Bt||r instanceof dh||r instanceof ri)}function q1(r,e,t){if(!fx(t)||!Y2(t)){const n=Jf(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function $0(r,e,t){if((e=Kt(e))instanceof hh)return e._internalPath;if(typeof e=="string")return X1(r,e);throw Wf("Field path arguments must be of type string or ",r,!1,void 0,t)}const J4=new RegExp("[~\\*/\\[\\]]");function X1(r,e,t){if(e.search(J4)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new hh(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Wf(r,e,t,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${n}`),s&&(c+=` in document ${i}`),c+=")"),new ce(ee.INVALID_ARGUMENT,l+r+c)}function hx(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t,n,i,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class e8 extends dx{data(){return super.data()}}function vh(r,e){return typeof e=="string"?X1(r,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K1{}class px extends K1{}function cl(r,e,...t){let n=[];e instanceof K1&&n.push(e),n=n.concat(t),(function(o){const s=o.filter((c=>c instanceof Y1)).length,l=o.filter((c=>c instanceof mh)).length;if(s>1||s>0&&l>0)throw new ce(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class mh extends px{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new mh(e,t,n)}_apply(e){const t=this._parse(e);return gx(e._query,t),new Ta(e.firestore,e.converter,M0(e._query,t))}_parse(e){const t=ph(e.firestore);return(function(o,s,l,c,h,p,v){let m;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ry(v,p);const E=[];for(const I of v)E.push(ty(c,o,I));m={arrayValue:{values:E}}}else m=ty(c,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ry(v,p),m=Z4(l,s,v,p==="in"||p==="not-in");return Ft.create(h,p,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fl(r,e,t){const n=e,i=vh("where",r);return mh._create(i,n,t)}class Y1 extends K1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Y1(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Pn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i;const l=o.getFlattenedFilters();for(const c of l)gx(s,c),s=M0(s,c)})(e._query,t),new Ta(e.firestore,e.converter,M0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Q1 extends px{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Q1(e,t)}_apply(e){const t=(function(i,o,s){if(i.startAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(o,s)})(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new qs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function r8(r,e="asc"){const t=e,n=vh("orderBy",r);return Q1._create(n,t)}function ty(r,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new ce(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p_(e)&&t.indexOf("/")!==-1)throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ht.fromString(t));if(!xe.isDocumentKey(n))throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ym(r,new xe(n))}if(t instanceof Bt)return ym(r,t._key);throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function ry(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gx(r,e){const t=(function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class n8{convertValue(e,t="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Lo(e,((i,o)=>{n[i]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[Vf].arrayValue?.values?.map((n=>Ot(n.doubleValue)));return new ri(t)}convertGeoPoint(e){return new ti(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=rh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const t=Po(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ht.fromString(e);rt(L_(n),9688,{name:e});const i=new ml(n.get(1),n.get(3)),o=new xe(n.popFirst(5));return i.isEqual(t)||Ni(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class af{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rs extends dx{constructor(e,t,n,i,o,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(vh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Rs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rs._jsonSchema={type:Vt("string",Rs._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class wf extends Rs{data(e={}){return super.data(e)}}class Ns{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new af(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new wf(this._firestore,this._userDataWriter,n.key,n,new af(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const c=new wf(i._firestore,i._userDataWriter,l.doc.key,l.doc,new af(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>o||l.type!==3)).map((l=>{const c=new wf(i._firestore,i._userDataWriter,l.doc.key,l.doc,new af(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:i8(l.type),doc:c,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ns._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:Vt("string",Ns._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class o8 extends n8{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function hl(r){r=Pi(r,Ta);const e=Pi(r.firestore,Ks),t=ax(e),n=new o8(e);return t8(r._query),H4(t,r._query).then((i=>new Ns(e,n,r,i)))}function a8(r,e,t){r=Pi(r,Bt);const n=Pi(r.firestore,Ks),i=vx(r.converter,e);return yh(n,[lx(ph(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,hn.none())])}function s8(r,e,t,...n){r=Pi(r,Bt);const i=Pi(r.firestore,Ks),o=ph(i);let s;return s=typeof(e=Kt(e))=="string"||e instanceof hh?Q4(o,"updateDoc",r._key,e,t,n):Y4(o,"updateDoc",r._key,e),yh(i,[s.toMutation(r._key,hn.exists(!0))])}function Ps(r){return yh(Pi(r.firestore,Ks),[new R1(r._key,hn.none())])}function Z1(r,e){const t=Pi(r.firestore,Ks),n=Si(r),i=vx(r.converter,e);return yh(t,[lx(ph(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,hn.exists(!1))]).then((()=>n))}function yh(r,e){return(function(n,i){const o=new Io;return n.asyncQueue.enqueueAndForget((async()=>N4(await j4(n),i,o))),o.promise})(ax(r),e)}function Bs(){return new $1("serverTimestamp")}(function(e,t=!0){(function(i){Gs=i})(zs),Os(new _a("firestore",((n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),l=new Ks(new $C(n.getProvider("auth-internal")),new KC(s,n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ce(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(h.options.projectId,p)})(s,i),s);return o={useFetchStreams:t,...o},l._setSettings(o),l}),"PUBLIC").setMultipleInstances(!0)),Eo(om,am,e),Eo(om,am,"esm2020")})();const u8={apiKey:"AIzaSyAYH2LknXO2VuBYsag6qNj4A3oBgjAunXE",authDomain:"fsktm-29ed3.firebaseapp.com",projectId:"fsktm-29ed3",storageBucket:"fsktm-29ed3.firebasestorage.app",messagingSenderId:"10409911302",appId:"1:10409911302:web:b14d9dce788d1dcaba8f87"},mx=n2(u8),_h=UC(mx),Ar=W4(mx),l8="users",c8=async r=>{try{const e=Si(Ar,l8,r.user_id);await a8(e,{...r,created_at:Bs(),updated_at:Bs()})}catch(e){throw new Error(e.message)}},f8=async r=>{try{const e=await E3(_h,r.user_email,r.user_password);return await C3(e.user,{displayName:r.user_name}),await c8({user_id:e.user.uid,user_name:r.user_name,user_email:r.user_email}),e.user}catch(e){throw new Error(e.message)}},h8=async(r,e)=>{try{return(await A3(_h,r,e)).user}catch(t){throw new Error(t.message)}},J1=async()=>{try{await N3(_h)}catch(r){throw new Error(r.message)}},yx=r=>R3(_h,r),_x=Object.freeze(Object.defineProperty({__proto__:null,logout:J1,onAuthChange:yx,signIn:h8,signUp:f8},Symbol.toStringTag,{value:"Module"})),xx=_e.createContext(void 0),d8=({children:r})=>{const[e,t]=_e.useState(null),[n,i]=_e.useState(!0);return _e.useEffect(()=>{const o=yx(s=>{t(s),i(!1)});return()=>o()},[]),T.jsx(xx.Provider,{value:{user:e,isLoading:n},children:r})},Ml=()=>{const r=_e.useContext(xx);if(!r)throw new Error("useAuth must be used within AuthProvider");return r},ep="user_items",p8=r=>{const e=new Date,t=Math.ceil((r.getTime()-e.getTime())/(1e3*60*60*24));return t<0?"expired":t<=3?"expiring_soon":"fresh"},wx=async(r,e)=>{try{const t=p8(e.user_items_expiry_date);return(await Z1(So(Ar,ep),{user_id:r,item_id:e.item_id,user_items_quantity:e.user_items_quantity,user_items_unit:e.user_items_unit,user_items_expiry_date:dt.fromDate(e.user_items_expiry_date),user_items_added_at:Bs(),user_items_status:t,user_items_name:e.user_items_name})).id}catch(t){throw new Error(t.message)}},g8=async r=>{try{const e=cl(So(Ar,ep),fl("user_id","==",r),r8("user_items_expiry_date"));return(await hl(e)).docs.map(n=>{const i=n.data();return{user_items_id:n.id,user_id:i.user_id,item_id:i.item_id,user_items_quantity:i.user_items_quantity,user_items_unit:i.user_items_unit,user_items_expiry_date:i.user_items_expiry_date?.toDate(),user_items_added_at:i.user_items_added_at?.toDate(),user_items_status:i.user_items_status,user_items_name:i.user_items_name}})}catch(e){throw new Error(e.message)}},v8=async r=>{try{const e=Si(Ar,ep,r);await Ps(e)}catch(e){throw new Error(e.message)}},m8="item_master",Ex=async r=>{try{return(await Z1(So(Ar,m8),{...r,created_at:Bs(),updated_at:Bs()})).id}catch(e){throw new Error(e.message)}};function y8(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function _8(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var x8=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),w8=(function(r){x8(e,r);function e(t,n){var i=this.constructor,o=r.call(this,t,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),y8(o,i.prototype),_8(o),o}return e})(Error),E8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zr=(function(r){E8(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(w8),A8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Cn=(function(r){A8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})(zr),I8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ce=(function(r){I8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(zr),C8=(function(){function r(e){if(this.binarizer=e,e===null)throw new Ce("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var o=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(o))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),S8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),rr=(function(r){S8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(zr),T8=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),pt=(function(){function r(){}return r.arraycopy=function(e,t,n,i,o){for(;o--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),R8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),tp=(function(r){R8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(zr),N8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ny=(function(r){N8(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(tp),P8=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$t=(function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var o=t;o<n;o++)e[o]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new Ce("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new ny(t);if(n>e)throw new ny(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var o=P8(e),s=o.next();!s.done;s=o.next()){var l=s.value;i=31*i+l}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,o=new Int32Array(i);return pt.arraycopy(e,t,o,0,i),o},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,l=n(t,e[s]);if(l>0)i=s+1;else if(l<0)o=s-1;else return s}return-i-1},r.numberComparator=function(e,t){return e-t},r})(),Fe=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),nr=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);pt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var s=n.length;o===0;){if(++i===s)return t;o=n[i]}var l=i*32+Fe.numberOfTrailingZeros(o);return l>t?t:l},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var s=n.length;o===0;){if(++i===s)return t;o=~n[i]}var l=i*32+Fe.numberOfTrailingZeros(o);return l>t?t:l},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ce;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=n;s<=i;s++){var l=s>n?0:e&31,c=s<i?31:t&31,h=(2<<c)-(1<<l);o[s]|=h}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new Ce;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,l=i;l<=o;l++){var c=l>i?0:e&31,h=l<o?31:t&31,p=(2<<h)-(1<<c)&4294967295;if((s[l]&p)!==(n?p:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new Ce("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var o=0;o<i;o++){for(var s=0,l=0;l<8;l++)this.get(e)&&(s|=1<<7-l),e++;t[n+o]=s}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,o=0;o<n;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,o=1;o<n;o++){var h=e[o];c|=h<<32-l,e[o-1]=c,c=h>>>l}e[n-1]=c}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&$t.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+$t.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),q0;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(q0||(q0={}));const xt=q0;var O8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ue=(function(r){O8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(zr),b8=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},it;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(it||(it={}));var Wt=(function(){function r(e,t,n){for(var i,o,s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var c=this.values,h=0,p=c.length;h!==p;h++){var v=c[h];r.VALUES_TO_ECI.set(v,this)}try{for(var m=b8(s),_=m.next();!_.done;_=m.next()){var E=_.value;r.NAME_TO_ECI.set(E,this)}}catch(I){i={error:I}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ue("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new ue("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new ue("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(it.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(it.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(it.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(it.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(it.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(it.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(it.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(it.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(it.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(it.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(it.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(it.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(it.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(it.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(it.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(it.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(it.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(it.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(it.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(it.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(it.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(it.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(it.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(it.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(it.Big5,28,"Big5"),r.GB18030=new r(it.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(it.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),D8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ef=(function(r){D8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(zr),dn=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Wt?e:Wt.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",o=0,s=e.length;o<s;o++){var l=e[o].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(n.equals(Wt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ef("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Wt.UTF8)||e.equals(Wt.ISO8859_1)||e.equals(Wt.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},r})(),We=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return dn.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(xt.CHARACTER_SET)!==void 0)return t.get(xt.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,s=!0,l=0,c=0,h=0,p=0,v=0,m=0,_=0,E=0,I=0,S=0,D=0,O=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,V=0;V<n&&(i||o||s);V++){var z=e[V]&255;s&&(l>0?(z&128)===0?s=!1:l--:(z&128)!==0&&((z&64)===0?s=!1:(l++,(z&32)===0?c++:(l++,(z&16)===0?h++:(l++,(z&8)===0?p++:s=!1))))),i&&(z>127&&z<160?i=!1:z>159&&(z<192||z===215||z===247)&&D++),o&&(v>0?z<64||z===127||z>252?o=!1:v--:z===128||z===160||z>239?o=!1:z>160&&z<224?(m++,E=0,_++,_>I&&(I=_)):z>127?(v++,_=0,E++,E>S&&(S=E)):(_=0,E=0))}return s&&l>0&&(s=!1),o&&v>0&&(o=!1),s&&(O||c+h+p>0)?r.UTF8:o&&(r.ASSUME_SHIFT_JIS||I>=3||S>=3)?r.SHIFT_JIS:i&&o?I===2&&m===2||D*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:o?r.SHIFT_JIS:s?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function o(l,c,h,p,v,m){if(l==="%%")return"%";if(t[++i]!==void 0){l=p?parseInt(p.substr(1)):void 0;var _=v?parseInt(v.substr(1)):void 0,E;switch(m){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(l);break;case"p":E=parseFloat(t[i]).toPrecision(l);break;case"e":E=parseFloat(t[i]).toExponential(l);break;case"x":E=parseInt(t[i]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[i],_||10).toPrecision(l)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var I=parseInt(h),S=h&&h[0]+""=="0"?"0":" ";E.length<I;)E=c!==void 0?E+S:S+E;return E}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},r.getBytes=function(e,t){return dn.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Wt.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Wt.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Wt.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),Me=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=We.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),ii=(function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ce("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),o=0;o<t;o++)for(var s=e[o],l=0;l<n;l++)s[l]&&i.set(l,o);return i},r.parseFromString=function(e,t,n){if(e===null)throw new Ce("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,l=-1,c=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(o>s){if(l===-1)l=o-s;else if(o-s!==l)throw new Ce("row lengths do not match");s=o,c++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[o]=!0,o++;else if(e.substring(h,h+n.length)===n)h+=n.length,i[o]=!1,o++;else throw new Ce("illegal character encountered: "+e.substring(h));if(o>s){if(l===-1)l=o-s;else if(o-s!==l)throw new Ce("row lengths do not match");c++}for(var p=new r(l,c),v=0;v<o;v++)i[v]&&p.set(Math.floor(v%l),Math.floor(v/l));return p},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ce("input matrix dimensions do not match");for(var t=new nr(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var l=o*n,c=e.getRow(o,t).getBitArray(),h=0;h<n;h++)i[l+h]^=c[h]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new Ce("Left and top must be nonnegative");if(i<1||n<1)throw new Ce("Height and width must be at least 1");var o=e+n,s=t+i;if(s>this.height||o>this.width)throw new Ce("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,h=t;h<s;h++)for(var p=h*l,v=e;v<o;v++)c[p+Math.floor(v/32)]|=1<<(v&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new nr(this.width):t.clear();for(var n=this.rowSize,i=this.bits,o=e*n,s=0;s<n;s++)t.setBulk(s*32,i[o+s]);return t},r.prototype.setRow=function(e,t){pt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new nr(e),i=new nr(e),o=0,s=Math.floor((t+1)/2);o<s;o++)n=this.getRow(o,n),i=this.getRow(t-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,o=e,s=t,l=-1,c=-1,h=0;h<t;h++)for(var p=0;p<n;p++){var v=i[h*n+p];if(v!==0){if(h<s&&(s=h),h>c&&(c=h),p*32<o){for(var m=0;(v<<31-m&4294967295)===0;)m++;p*32+m<o&&(o=p*32+m)}if(p*32+31>l){for(var m=31;!(v>>>m);)m--;p*32+m>l&&(l=p*32+m)}}}return l<o||c<s?null:Int32Array.from([o,s,l-o+1,c-s+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,o=n%e*32,s=t[n],l=0;(s<<31-l&4294967295)===0;)l++;return o+=l,Int32Array.from([o,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,s=t[n],l=31;!(s>>>l);)l--;return o+=l,Int32Array.from([o,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&$t.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+$t.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Me,o=0,s=this.height;o<s;o++){for(var l=0,c=this.width;l<c;l++)i.append(this.get(l,o)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),k8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),J=(function(r){k8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(zr),M8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),L8=(function(r){M8(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new nr(o):n.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),l=this.buckets,c=0;c<o;c++)l[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(l);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<h&&n.set(c);else for(var p=s[0]&255,v=s[1]&255,c=1;c<o-1;c++){var m=s[c+1]&255;(v*4-p-m)/2<h&&n.set(c),p=v,v=m}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),o=new ii(n,i);this.initArrays(n);for(var s=this.buckets,l=1;l<5;l++)for(var c=Math.floor(i*l/5),h=t.getRow(c,this.luminances),p=Math.floor(n*4/5),v=Math.floor(n/5);v<p;v++){var m=h[v]&255;s[m>>e.LUMINANCE_SHIFT]++}for(var _=e.estimateBlackPoint(s),E=t.getMatrix(),l=0;l<i;l++)for(var I=l*n,v=0;v<n;v++){var m=E[I+v]&255;m<_&&o.set(v,l)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,o=0,s=0,l=0;l<n;l++)t[l]>s&&(o=l,s=t[l]),t[l]>i&&(i=t[l]);for(var c=0,h=0,l=0;l<n;l++){var p=l-o,v=t[l]*p*p;v>h&&(c=l,h=v)}if(o>c){var m=o;o=c,c=m}if(c-o<=n/16)throw new J;for(var _=c-1,E=-1,l=c-1;l>o;l--){var I=l-o,v=I*I*(c-l)*(i-t[l]);v>E&&(_=l,E=v)}return _<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(T8),F8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),V8=(function(r){F8(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&s++;var l=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&l++;var c=e.calculateBlackPoints(o,s,l,n,i),h=new ii(n,i);e.calculateThresholdForBlock(o,s,l,n,i,c,h),this.matrix=h}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,o,s,l,c){for(var h=s-e.BLOCK_SIZE,p=o-e.BLOCK_SIZE,v=0;v<i;v++){var m=v<<e.BLOCK_SIZE_POWER;m>h&&(m=h);for(var _=e.cap(v,2,i-3),E=0;E<n;E++){var I=E<<e.BLOCK_SIZE_POWER;I>p&&(I=p);for(var S=e.cap(E,2,n-3),D=0,O=-2;O<=2;O++){var V=l[_+O];D+=V[S-2]+V[S-1]+V[S]+V[S+1]+V[S+2]}var z=D/25;e.thresholdBlock(t,I,m,z,o,c)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,o,s,l){for(var c=0,h=i*s+n;c<e.BLOCK_SIZE;c++,h+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=o&&l.set(n+p,i+c)},e.calculateBlackPoints=function(t,n,i,o,s){for(var l=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(n);var v=p<<e.BLOCK_SIZE_POWER;v>l&&(v=l);for(var m=0;m<n;m++){var _=m<<e.BLOCK_SIZE_POWER;_>c&&(_=c);for(var E=0,I=255,S=0,D=0,O=v*o+_;D<e.BLOCK_SIZE;D++,O+=o){for(var V=0;V<e.BLOCK_SIZE;V++){var z=t[O+V]&255;E+=z,z<I&&(I=z),z>S&&(S=z)}if(S-I>e.MIN_DYNAMIC_RANGE)for(D++,O+=o;D<e.BLOCK_SIZE;D++,O+=o)for(var V=0;V<e.BLOCK_SIZE;V++)E+=t[O+V]&255}var G=E>>e.BLOCK_SIZE_POWER*2;if(S-I<=e.MIN_DYNAMIC_RANGE&&(G=I/2,p>0&&m>0)){var B=(h[p-1][m]+2*h[p][m-1]+h[p-1][m-1])/4;I<B&&(G=B)}h[p][m]=G}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(L8),xh=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new Ef("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Ef("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Ef("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Me,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var s=i[o]&255,l=void 0;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()},r})(),B8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),rp=(function(r){B8(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,o){return new e(this.delegate.crop(t,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(xh),U8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),j8=(function(r){U8(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var l=0,c=0,h=t.length;l<h;l+=4,c++){var p=void 0,v=t[l+3];if(v===0)p=255;else{var m=t[l],_=t[l+1],E=t[l+2];p=306*m+601*_+117*E+512>>10}s[c]=p}else for(var l=0,c=0,I=t.length;l<I;l+=4,c++){var p=void 0,v=t[l+3];if(v===0)p=255;else{var m=t[l],_=t[l+1],E=t[l+2];p=306*m+601*_+117*E+512>>10}s[c]=255-p}return s},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*l),h=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*l);return n.width=c,n.height=h,i.translate(c/2,h/2),i.rotate(o),i.drawImage(this.canvas,s/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new rp(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(xh),z8=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),Nr=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(p){try{h(n.next(p))}catch(v){s(v)}}function c(p){try{h(n.throw(p))}catch(v){s(v)}}function h(p){p.done?o(p.value):i(p.value).then(l,c)}h((n=n.apply(r,e||[])).next())})},Pr=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return c([h,p])}}function c(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(p){h=[6,p],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},H8=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ys=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return Nr(this,void 0,void 0,function(){var e,t,n,i,o,s,l,c,h,p,v,m;return Pr(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(n=H8(e),i=n.next();!i.done;i=n.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(l=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),h=o.groupId,p={deviceId:l,label:c,kind:s,groupId:h},t.push(p))}catch(E){v={error:E}}finally{try{i&&!i.done&&(m=n.return)&&m.call(n)}finally{if(v)throw v.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return Nr(this,void 0,void 0,function(){var e;return Pr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new z8(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return Nr(this,void 0,void 0,function(){var t;return Pr(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return Nr(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Nr(this,void 0,void 0,function(){var n,i;return Pr(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Nr(this,void 0,void 0,function(){var n;return Pr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Nr(this,void 0,void 0,function(){var n,i;return Pr(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Nr(this,void 0,void 0,function(){return Pr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Nr(this,void 0,void 0,function(){var i,o;return Pr(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,s.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Nr(this,void 0,void 0,function(){var i;return Pr(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,o.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return Nr(this,void 0,void 0,function(){var i;return Pr(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return Nr(this,void 0,void 0,function(){var n;return Pr(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return Nr(this,void 0,void 0,function(){return Pr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Cn("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Cn("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Cn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Cn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new Cn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new Cn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Cn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new Cn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Cn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Cn("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return Nr(this,void 0,void 0,function(){return Pr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return Nr(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(s,l){if(i._stopAsyncDecode){l(new J("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(m){var h=t&&m instanceof J,p=m instanceof rr||m instanceof ue,v=p&&n;if(h||v)return setTimeout(o,i._timeBetweenDecodingAttempts,s,l);l(m)}};return new Promise(function(s,l){return o(s,l)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);t(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof rr||c instanceof ue,l=c instanceof J;(s||l)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new j8(n,t),o=new V8(i);return new C8(o)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),Cr=(function(){function r(e,t,n,i,o,s){n===void 0&&(n=t==null?0:8*t.length),s===void 0&&(s=pt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=pt.currentTimeMillis():this.timestamp=s}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);pt.arraycopy(t,0,n,0,t.length),pt.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),X0;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(X0||(X0={}));const Ee=X0;var K0;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(K0||(K0={}));const hr=K0;var wh=(function(){function r(e,t,n,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),el=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),To=(function(){function r(e,t){if(t.length===0)throw new Ce;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),pt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];n=el.addOrSubtract(n,s)}return n}n=t[0];for(var l=t.length,c=this.field,i=1;i<l;i++)n=el.addOrSubtract(c.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),s=n.length-t.length;pt.arraycopy(n,0,o,0,s);for(var l=s;l<n.length;l++)o[l]=el.addOrSubtract(t[l-s],n[l]);return new r(this.field,o)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,s=new Int32Array(n+o-1),l=this.field,c=0;c<n;c++)for(var h=t[c],p=0;p<o;p++)s[c+p]=el.addOrSubtract(s[c+p],l.multiply(h,i[p]));return new r(l,s)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=n.multiply(o[s],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),s=this.field,l=0;l<i;l++)o[l]=s.multiply(n[l],t);return new r(s,o)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ce("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var l=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),h=e.multiplyByMonomial(l,c),p=t.buildMonomial(l,c);n=n.addOrSubtract(p),i=i.addOrSubtract(h)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),G8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ax=(function(r){G8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(zr),W8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jr=(function(r){W8(e,r);function e(t,n,i){var o=r.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=i;for(var s=new Int32Array(n),l=1,c=0;c<n;c++)s[c]=l,l*=2,l>=n&&(l^=t,l&=n-1);o.expTable=s;for(var h=new Int32Array(n),c=0;c<n-1;c++)h[s[c]]=c;return o.logTable=h,o.zero=new To(o,Int32Array.from([0])),o.one=new To(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new Ce;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new To(this,i)},e.prototype.inverse=function(t){if(t===0)throw new Ax;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Fe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(el),$8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),sf=(function(r){$8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(zr),q8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ll=(function(r){q8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(zr),Eh=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new To(n,e),o=new Int32Array(t),s=!0,l=0;l<t;l++){var c=i.evaluateAt(n.exp(l+n.getGeneratorBase()));o[o.length-1-l]=c,c!==0&&(s=!1)}if(!s)for(var h=new To(n,o),p=this.runEuclideanAlgorithm(n.buildMonomial(t,1),h,t),v=p[0],m=p[1],_=this.findErrorLocations(v),E=this.findErrorMagnitudes(m,_),l=0;l<_.length;l++){var I=e.length-1-n.log(_[l]);if(I<0)throw new sf("Bad error location");e[I]=jr.addOrSubtract(e[I],E[l])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,l=t,c=o.getZero(),h=o.getOne();l.getDegree()>=(n/2|0);){var p=s,v=c;if(s=l,c=h,s.isZero())throw new sf("r_{i-1} was zero");l=p;for(var m=o.getZero(),_=s.getCoefficient(s.getDegree()),E=o.inverse(_);l.getDegree()>=s.getDegree()&&!l.isZero();){var I=l.getDegree()-s.getDegree(),S=o.multiply(l.getCoefficient(l.getDegree()),E);m=m.addOrSubtract(o.buildMonomial(I,S)),l=l.addOrSubtract(s.multiplyByMonomial(I,S))}if(h=m.multiply(c).addOrSubtract(v),l.getDegree()>=s.getDegree())throw new Ll("Division algorithm failed to reduce polynomial?")}var D=h.getCoefficient(0);if(D===0)throw new sf("sigmaTilde(0) was zero");var O=o.inverse(D),V=h.multiplyScalar(O),z=l.multiplyScalar(O);return[V,z]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(n[i]=o.inverse(s),i++);if(i!==t)throw new sf("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),o=this.field,s=0;s<n;s++){for(var l=o.inverse(t[s]),c=1,h=0;h<n;h++)if(s!==h){var p=o.multiply(t[h],l),v=(p&1)===0?p|1:p&-2;c=o.multiply(c,v)}i[s]=o.multiply(e.evaluateAt(l),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],l))}return i},r})(),ur;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(ur||(ur={}));var iy=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),o=r.convertBoolArrayToByteArray(i),s=r.getEncodedData(i),l=new wh(o,s,null,null);return l.setNumBits(i.length),l},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=ur.UPPER,i=ur.UPPER,o="",s=0;s<t;)if(i===ur.BINARY){if(t-s<5)break;var l=r.readCode(e,s,5);if(s+=5,l===0){if(t-s<11)break;l=r.readCode(e,s,11)+31,s+=11}for(var c=0;c<l;c++){if(t-s<8){s=t;break}var h=r.readCode(e,s,8);o+=We.castAsNonUtf8Char(h),s+=8}i=n}else{var p=i===ur.DIGIT?4:5;if(t-s<p)break;var h=r.readCode(e,s,p);s+=p;var v=r.getCharacter(i,h);v.startsWith("CTRL_")?(n=i,i=r.getTable(v.charAt(5)),v.charAt(6)==="L"&&(n=i)):(o+=v,i=n)}return o},r.getTable=function(e){switch(e){case"L":return ur.LOWER;case"P":return ur.PUNCT;case"M":return ur.MIXED;case"D":return ur.DIGIT;case"B":return ur.BINARY;case"U":default:return ur.UPPER}},r.getCharacter=function(e,t){switch(e){case ur.UPPER:return r.UPPER_TABLE[t];case ur.LOWER:return r.LOWER_TABLE[t];case ur.MIXED:return r.MIXED_TABLE[t];case ur.PUNCT:return r.PUNCT_TABLE[t];case ur.DIGIT:return r.DIGIT_TABLE[t];default:throw new Ll("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=jr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=jr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=jr.AZTEC_DATA_10):(n=12,t=jr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new ue;for(var s=e.length%n,l=new Int32Array(o),c=0;c<o;c++,s+=n)l[c]=r.readCode(e,s,n);try{var h=new Eh(t);h.decode(l,o-i)}catch(S){throw new ue(S)}for(var p=(1<<n)-1,v=0,c=0;c<i;c++){var m=l[c];if(m===0||m===p)throw new ue;(m===1||m===p-1)&&v++}for(var _=new Array(i*n-v),E=0,c=0;c<i;c++){var m=l[c];if(m===1||m===p-1)_.fill(m>1,E,E+n-1),E+=n-1;else for(var I=n-1;I>=0;--I)_[E++]=(m&1<<I)!==0}return _},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(var l=0;l<o.length;l++)o[l]=l;else for(var c=i+1+2*Fe.truncDivision(Fe.truncDivision(i,2)-1,15),h=i/2,p=Fe.truncDivision(c,2),l=0;l<h;l++){var v=l+Fe.truncDivision(l,15);o[h-l-1]=p-v-1,o[h+l]=p+v+1}for(var l=0,m=0;l<n;l++){for(var _=(n-l)*4+(t?9:12),E=l*2,I=i-1-E,S=0;S<_;S++)for(var D=S*2,O=0;O<2;O++)s[m+D+O]=e.get(o[E+O],o[E+S]),s[m+2*_+D+O]=e.get(o[E+S],o[I-O]),s[m+4*_+D+O]=e.get(o[I-O],o[I-S]),s[m+6*_+D+O]=e.get(o[I-S],o[E+O]);m+=_*8}return s},r.readCode=function(e,t,n){for(var i=0,o=t;o<t+n;o++)i<<=1,e[o]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),Ye=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var o=e-n,s=t-i;return Math.sqrt(o*o+s*s)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var o=e[n];t+=o}return t},r})(),Y0=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),me=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Y0.floatToIntBits(this.x)+Y0.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,l;if(n>=t&&n>=i?(s=e[0],o=e[1],l=e[2]):i>=n&&i>=t?(s=e[1],o=e[0],l=e[2]):(s=e[2],o=e[0],l=e[1]),this.crossProductZ(o,s,l)<0){var c=o;o=l,l=c}e[0]=o,e[1]=s,e[2]=l},r.distance=function(e,t){return Ye.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,o=t.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},r})(),np=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),X8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),K8=(function(r){X8(e,r);function e(t,n,i,o,s){var l=r.call(this,t,n)||this;return l.compact=i,l.nbDatablocks=o,l.nbLayers=s,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(np),Q0=(function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,o=!1,s=!0,l=!1,c=!1,h=!1,p=!1,v=!1,m=this.width,_=this.height;s;){s=!1;for(var E=!0;(E||!c)&&t<m;)E=this.containsBlackPoint(n,i,t,!1),E?(t++,s=!0,c=!0):c||t++;if(t>=m){o=!0;break}for(var I=!0;(I||!h)&&i<_;)I=this.containsBlackPoint(e,t,i,!0),I?(i++,s=!0,h=!0):h||i++;if(i>=_){o=!0;break}for(var S=!0;(S||!p)&&e>=0;)S=this.containsBlackPoint(n,i,e,!1),S?(e--,s=!0,p=!0):p||e--;if(e<0){o=!0;break}for(var D=!0;(D||!v)&&n>=0;)D=this.containsBlackPoint(e,t,n,!0),D?(n--,s=!0,v=!0):v||n--;if(n<0){o=!0;break}s&&(l=!0)}if(!o&&l){for(var O=t-e,V=null,z=1;V===null&&z<O;z++)V=this.getBlackPointOnSegment(e,i-z,e+z,i);if(V==null)throw new J;for(var G=null,z=1;G===null&&z<O;z++)G=this.getBlackPointOnSegment(e,n+z,e+z,n);if(G==null)throw new J;for(var B=null,z=1;B===null&&z<O;z++)B=this.getBlackPointOnSegment(t,n+z,t-z,n);if(B==null)throw new J;for(var R=null,z=1;R===null&&z<O;z++)R=this.getBlackPointOnSegment(t,i-z,t-z,i);if(R==null)throw new J;return this.centerEdges(R,V,B,G)}else throw new J},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var o=Ye.round(Ye.distance(e,t,n,i)),s=(n-e)/o,l=(i-t)/o,c=this.image,h=0;h<o;h++){var p=Ye.round(e+h*s),v=Ye.round(t+h*l);if(c.get(p,v))return new me(p,v)}return null},r.prototype.centerEdges=function(e,t,n,i){var o=e.getX(),s=e.getY(),l=t.getX(),c=t.getY(),h=n.getX(),p=n.getY(),v=i.getX(),m=i.getY(),_=r.CORR;return o<this.width/2?[new me(v-_,m+_),new me(l+_,c+_),new me(h-_,p-_),new me(o+_,s-_)]:[new me(v+_,m+_),new me(l+_,c-_),new me(h-_,p+_),new me(o-_,s-_)]},r.prototype.containsBlackPoint=function(e,t,n,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,n))return!0}else for(var l=e;l<=t;l++)if(o.get(n,l))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),oy=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var l=Math.floor(t[s]),c=Math.floor(t[s+1]);if(l<-1||l>n||c<-1||c>i)throw new J;o=!1,l===-1?(t[s]=0,o=!0):l===n&&(t[s]=n-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var l=Math.floor(t[s]),c=Math.floor(t[s+1]);if(l<-1||l>n||c<-1||c>i)throw new J;o=!1,l===-1?(t[s]=0,o=!0):l===n&&(t[s]=n-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},r})(),Ix=(function(){function r(e,t,n,i,o,s,l,c,h){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=o,this.a32=s,this.a13=l,this.a23=c,this.a33=h}return r.quadrilateralToQuadrilateral=function(e,t,n,i,o,s,l,c,h,p,v,m,_,E,I,S){var D=r.quadrilateralToSquare(e,t,n,i,o,s,l,c),O=r.squareToQuadrilateral(h,p,v,m,_,E,I,S);return O.times(D)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,o=this.a13,s=this.a21,l=this.a22,c=this.a23,h=this.a31,p=this.a32,v=this.a33,m=0;m<t;m+=2){var _=e[m],E=e[m+1],I=o*_+c*E+v;e[m]=(n*_+s*E+h)/I,e[m+1]=(i*_+l*E+p)/I}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,o=this.a13,s=this.a21,l=this.a22,c=this.a23,h=this.a31,p=this.a32,v=this.a33,m=e.length,_=0;_<m;_++){var E=e[_],I=t[_],S=o*E+c*I+v;e[_]=(n*E+s*I+h)/S,t[_]=(i*E+l*I+p)/S}},r.squareToQuadrilateral=function(e,t,n,i,o,s,l,c){var h=e-n+o-l,p=t-i+s-c;if(h===0&&p===0)return new r(n-e,o-n,e,i-t,s-i,t,0,0,1);var v=n-o,m=l-o,_=i-s,E=c-s,I=v*E-m*_,S=(h*E-m*p)/I,D=(v*p-h*_)/I;return new r(n-e+S*n,l-e+D*l,e,i-t+S*i,c-t+D*c,t,S,D,1)},r.quadrilateralToSquare=function(e,t,n,i,o,s,l,c){return r.squareToQuadrilateral(e,t,n,i,o,s,l,c).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),Y8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Q8=(function(r){Y8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,o,s,l,c,h,p,v,m,_,E,I,S,D,O,V,z){var G=Ix.quadrilateralToQuadrilateral(o,s,l,c,h,p,v,m,_,E,I,S,D,O,V,z);return this.sampleGridWithTransform(t,n,i,G)},e.prototype.sampleGridWithTransform=function(t,n,i,o){if(n<=0||i<=0)throw new J;for(var s=new ii(n,i),l=new Float32Array(2*n),c=0;c<i;c++){for(var h=l.length,p=c+.5,v=0;v<h;v+=2)l[v]=v/2+.5,l[v+1]=p;o.transformPoints(l),oy.checkAndNudgePoints(t,l);try{for(var v=0;v<h;v+=2)t.get(Math.floor(l[v]),Math.floor(l[v+1]))&&s.set(v/2,c)}catch{throw new J}}return s},e})(oy),ip=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new Q8,r})(),Vr=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new me(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),Z8=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new K8(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new J;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,o=0;o<4;o++){var s=n[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(o,s,l){var c=(o>>t-2<<1)+(o&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Fe.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new J},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var o=n-i,s=new Int32Array(n),l=n-1;l>=0;--l)s[l]=e&15,e>>=4;try{var c=new Eh(jr.AZTEC_PARAM);c.decode(s,o)}catch{throw new J}for(var h=0,l=0;l<i;l++)h=(h<<4)+s[l];return h},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(n,s,1,1),h=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var v=this.distancePoint(p,l)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(v<.75||v>1.25||!this.isWhiteOrBlackRectangle(l,c,h,p))break}t=l,n=c,i=h,o=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;var m=new me(t.getX()+.5,t.getY()-.5),_=new me(n.getX()+.5,n.getY()+.5),E=new me(i.getX()-.5,i.getY()+.5),I=new me(o.getX()-.5,o.getY()-.5);return this.expandSquare([m,_,E,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var o=new Q0(this.image).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Vr(s+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Vr(s+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Vr(s-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Vr(s-7,l-7),!1,-1,-1).toResultPoint()}var c=Ye.round((e.getX()+i.getX()+t.getX()+n.getX())/4),h=Ye.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var o=new Q0(this.image,15,c,h).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Vr(c+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Vr(c+7,h+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Vr(c-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Vr(c-7,h-7),!1,-1,-1).toResultPoint()}return c=Ye.round((e.getX()+i.getX()+t.getX()+n.getX())/4),h=Ye.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new Vr(c,h)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,o){var s=ip.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,h=l/2+this.nbCenterLayers;return s.sampleGrid(e,l,l,c,c,h,c,h,h,c,h,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,o=this.distanceResultPoint(e,t),s=o/n,l=e.getX(),c=e.getY(),h=s*(t.getX()-e.getX())/o,p=s*(t.getY()-e.getY())/o,v=0;v<n;v++)this.image.get(Ye.round(l+v*h),Ye.round(c+v*p))&&(i|=1<<n-v-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var o=3;e=new Vr(e.getX()-o,e.getY()+o),t=new Vr(t.getX()-o,t.getY()-o),n=new Vr(n.getX()+o,n.getY()-o),i=new Vr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var l=this.getColor(e,t);return l!==s||(l=this.getColor(t,n),l!==s)?!1:(l=this.getColor(n,i),l===s)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,s=0,l=e.getX(),c=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(n),v=0;v<p;v++)l+=i,c+=o,this.image.get(Ye.round(l),Ye.round(c))!==h&&s++;var m=s/n;return m>.1&&m<.9?0:m<=.1===h?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var o=e.getX()+n,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=n,s+=i;for(o-=n,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=n;for(o-=n;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new Vr(o,s)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,h=new me(l+i*o,c+i*s),p=new me(l-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var v=new me(l+i*o,c+i*s),m=new me(l-i*o,c-i*s),_=[h,v,p,m];return _},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=Ye.round(e.getX()),n=Ye.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return Ye.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return Ye.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Fe.truncDivision(this.nbLayers-4,8)+1)+15},r})(),Z0=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new Z8(e.getBlackMatrix()),o=null,s=null;try{var l=i.detectMirror(!1);o=l.getPoints(),this.reportFoundResultPoints(t,o),s=new iy().decode(l)}catch(v){n=v}if(s==null)try{var l=i.detectMirror(!0);o=l.getPoints(),this.reportFoundResultPoints(t,o),s=new iy().decode(l)}catch(v){throw n??v}var c=new Cr(s.getText(),s.getRawBytes(),s.getNumBits(),o,Ee.AZTEC,pt.currentTimeMillis()),h=s.getByteSegments();h!=null&&c.putMetadata(hr.BYTE_SEGMENTS,h);var p=s.getECLevel();return p!=null&&c.putMetadata(hr.ERROR_CORRECTION_LEVEL,p),c},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(xt.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,o,s){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r})(),J8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){J8(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Z0,t)||this}return e})(Ys);var qt=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(xt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),l=270;s!==null&&s.get(hr.ORIENTATION)===!0&&(l=l+s.get(hr.ORIENTATION)%360),o.putMetadata(hr.ORIENTATION,l);var c=o.getResultPoints();if(c!==null)for(var h=i.getHeight(),p=0;p<c.length;p++)c[p]=new me(h-c[p].getY()-1,c[p].getX());return o}else throw new J}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),o=new nr(n),s=t&&t.get(xt.TRY_HARDER)===!0,l=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var h=Math.trunc(i/2),p=0;p<c;p++){var v=Math.trunc((p+1)/2),m=(p&1)===0,_=h+l*(m?v:-v);if(_<0||_>=i)break;try{o=e.getBlackRow(_,o)}catch{continue}for(var E=function(O){if(O===1&&(o.reverse(),t&&t.get(xt.NEED_RESULT_POINT_CALLBACK)===!0)){var V=new Map;t.forEach(function(B,R){return V.set(R,B)}),V.delete(xt.NEED_RESULT_POINT_CALLBACK),t=V}try{var z=I.decodeRow(_,o,t);if(O===1){z.putMetadata(hr.ORIENTATION,180);var G=z.getResultPoints();G!==null&&(G[0]=new me(n-G[0].getX()-1,G[0].getY()),G[1]=new me(n-G[1].getX()-1,G[1].getY()))}return{value:z}}catch{}},I=this,S=0;S<2;S++){var D=E(S);if(typeof D=="object")return D.value}}throw new J},r.recordPattern=function(e,t,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var s=e.getSize();if(t>=s)throw new J;for(var l=!e.get(t),c=0,h=t;h<s;){if(e.get(h)!==l)n[c]++;else{if(++c===i)break;n[c]=1,l=!l}h++}if(!(c===i||c===i-1&&h===s))throw new J},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new J;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,s=0,l=0;l<i;l++)o+=e[l],s+=t[l];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;n*=c;for(var h=0,p=0;p<i;p++){var v=e[p],m=t[p]*c,_=v>m?v-m:m-v;if(_>n)return Number.POSITIVE_INFINITY;h+=_}return h/o},r})(),e6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ay=(function(r){e6(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),l=i,c=!1,h=6,p=i;p<n;p++)if(t.get(p)!==c)s[o]++;else{if(o===h-1){for(var v=e.MAX_AVG_VARIANCE,m=-1,_=e.CODE_START_A;_<=e.CODE_START_C;_++){var E=qt.patternMatchVariance(s,e.CODE_PATTERNS[_],e.MAX_INDIVIDUAL_VARIANCE);E<v&&(v=E,m=_)}if(m>=0&&t.isRange(Math.max(0,l-(p-l)/2),l,!1))return Int32Array.from([l,p,m]);l+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new J},e.decodeCode=function(t,n,i){qt.recordPattern(t,i,n);for(var o=e.MAX_AVG_VARIANCE,s=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],h=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,s=l)}if(s>=0)return s;throw new J},e.prototype.decodeRow=function(t,n,i){var o=i&&i.get(xt.ASSUME_GS1)===!0,s=e.findStartPattern(n),l=s[2],c=0,h=new Uint8Array(20);h[c++]=l;var p;switch(l){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new ue}for(var v=!1,m=!1,_="",E=s[0],I=s[1],S=Int32Array.from([0,0,0,0,0,0]),D=0,O=0,V=l,z=0,G=!0,B=!1,R=!1;!v;){var N=m;switch(m=!1,D=O,O=e.decodeCode(n,S,I),h[c++]=O,O!==e.CODE_STOP&&(G=!0),O!==e.CODE_STOP&&(z++,V+=z*O),E=I,I+=S.reduce(function(at,le){return at+le},0),O){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ue}switch(p){case e.CODE_CODE_A:if(O<64)R===B?_+=String.fromCharCode(32+O):_+=String.fromCharCode(32+O+128),R=!1;else if(O<96)R===B?_+=String.fromCharCode(O-64):_+=String.fromCharCode(O+64),R=!1;else switch(O!==e.CODE_STOP&&(G=!1),O){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&R?(B=!0,R=!1):B&&R?(B=!1,R=!1):R=!0;break;case e.CODE_SHIFT:m=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_B:if(O<96)R===B?_+=String.fromCharCode(32+O):_+=String.fromCharCode(32+O+128),R=!1;else switch(O!==e.CODE_STOP&&(G=!1),O){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&R?(B=!0,R=!1):B&&R?(B=!1,R=!1):R=!0;break;case e.CODE_SHIFT:m=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_C:if(O<100)O<10&&(_+="0"),_+=O;else switch(O!==e.CODE_STOP&&(G=!1),O){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:v=!0;break}break}N&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=I-E;if(I=n.getNextUnset(I),!n.isRange(I,Math.min(n.getSize(),I+(I-E)/2),!1))throw new J;if(V-=z*D,V%103!==D)throw new rr;var F=_.length;if(F===0)throw new J;F>0&&G&&(p===e.CODE_CODE_C?_=_.substring(0,F-2):_=_.substring(0,F-1));for(var U=(s[1]+s[0])/2,H=E+k/2,M=h.length,ke=new Uint8Array(M),ut=0;ut<M;ut++)ke[ut]=h[ut];var bt=[new me(U,t),new me(H,t)];return new Cr(_,ke,0,bt,Ee.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(qt),t6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),l0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sy=(function(r){t6(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var o,s,l,c,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(n,h),v=n.getNextSet(p[1]),m=n.getSize(),_,E;do{e.recordPattern(n,v,h);var I=e.toNarrowWidePattern(h);if(I<0)throw new J;_=e.patternToChar(I),this.decodeRowResult+=_,E=v;try{for(var S=(o=void 0,l0(h)),D=S.next();!D.done;D=S.next()){var O=D.value;v+=O}}catch(M){o={error:M}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}v=n.getNextSet(v)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var z=l0(h),G=z.next();!G.done;G=z.next()){var O=G.value;V+=O}}catch(M){l={error:M}}finally{try{G&&!G.done&&(c=z.return)&&c.call(z)}finally{if(l)throw l.error}}var B=v-E-V;if(v!==m&&B*2<V)throw new J;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,N=0,k=0;k<R;k++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(N%43))throw new rr;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new J;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var U=(p[1]+p[0])/2,H=E+V/2;return new Cr(F,null,0,[new me(U,t),new me(H,t)],Ee.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),o=t.getNextSet(0),s=0,l=o,c=!1,h=n.length,p=o;p<i;p++)if(t.get(p)!==c)n[s]++;else{if(s===h-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,l-Math.floor((p-l)/2)),l,!1))return[l,p];l+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,c=!c}throw new J},e.toNarrowWidePattern=function(t){var n,i,o=t.length,s=0,l;do{var c=2147483647;try{for(var h=(n=void 0,l0(t)),p=h.next();!p.done;p=h.next()){var v=p.value;v<c&&v>s&&(c=v)}}catch(I){n={error:I}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}s=c,l=0;for(var m=0,_=0,E=0;E<o;E++){var v=t[E];v>s&&(_|=1<<o-1-E,l++,m+=v)}if(l===3){for(var E=0;E<o&&l>0;E++){var v=t[E];if(v>s&&(l--,v*2>=m))return-1}return _}}while(l>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new J},e.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var l=t.charAt(o+1),c="\0";switch(s){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new ue;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new ue;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new ue;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new ue;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(qt),r6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),c0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uy=(function(r){r6(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var o,s,l,c,h=this.findAsteriskPattern(n),p=n.getNextSet(h[1]),v=n.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var _,E;do{e.recordPattern(n,p,m);var I=this.toPattern(m);if(I<0)throw new J;_=this.patternToChar(I),this.decodeRowResult+=_,E=p;try{for(var S=(o=void 0,c0(m)),D=S.next();!D.done;D=S.next()){var O=D.value;p+=O}}catch(k){o={error:k}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}p=n.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var z=c0(m),G=z.next();!G.done;G=z.next()){var O=G.value;V+=O}}catch(k){l={error:k}}finally{try{G&&!G.done&&(c=z.return)&&c.call(z)}finally{if(l)throw l.error}}if(p===v||!n.get(p))throw new J;if(this.decodeRowResult.length<2)throw new J;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),R=(h[1]+h[0])/2,N=E+V/2;return new Cr(B,null,0,[new me(R,t),new me(N,t)],Ee.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,l=!1,c=o.length,h=0,p=i;p<n;p++)if(t.get(p)!==l)o[h]++;else{if(h===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=o[0]+o[1],o.copyWithin(0,2,2+h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,l=!l}throw new J},e.prototype.toPattern=function(t){var n,i,o=0;try{for(var s=c0(t),l=s.next();!l.done;l=s.next()){var c=l.value;o+=c}}catch(E){n={error:E}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}for(var h=0,p=t.length,v=0;v<p;v++){var m=Math.round(t[v]*9/o);if(m<1||m>4)return-1;if((v&1)===0)for(var _=0;_<m;_++)h=h<<1|1;else h<<=m}return h},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new J},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=n-1)throw new ue;var l=t.charAt(o+1),c="\0";switch(s){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new ue;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new ue;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new ue;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new ue;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var o=1,s=0,l=n-1;l>=0;l--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(l)),++o>i&&(o=1);if(t.charAt(n)!==e.ALPHABET_STRING[s%47])throw new rr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(qt),n6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),i6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ly=(function(r){n6(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var o,s,l=this.decodeStart(n),c=this.decodeEnd(n),h=new Me;e.decodeMiddle(n,l[1],c[0],h);var p=h.toString(),v=null;i!=null&&(v=i.get(xt.ALLOWED_LENGTHS)),v==null&&(v=e.DEFAULT_ALLOWED_LENGTHS);var m=p.length,_=!1,E=0;try{for(var I=i6(v),S=I.next();!S.done;S=I.next()){var D=S.value;if(m===D){_=!0;break}D>E&&(E=D)}}catch(z){o={error:z}}finally{try{S&&!S.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}if(!_&&m>E&&(_=!0),!_)throw new ue;var O=[new me(l[1],t),new me(c[0],t)],V=new Cr(p,null,0,O,Ee.ITF,new Date().getTime());return V},e.decodeMiddle=function(t,n,i,o){var s=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),l.fill(0),c.fill(0);n<i;){qt.recordPattern(t,n,s);for(var h=0;h<5;h++){var p=2*h;l[h]=s[p],c[h]=s[p+1]}var v=e.decodeDigit(l);o.append(v.toString()),v=this.decodeDigit(c),o.append(v.toString()),s.forEach(function(m){n+=m})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new J},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new J;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof J&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var o=i.length,s=new Int32Array(o),l=t.getSize(),c=!1,h=0,p=n;s.fill(0);for(var v=n;v<l;v++)if(t.get(v)!==c)s[h]++;else{if(h===o-1){if(qt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,v];p+=s[0]+s[1],pt.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,c=!c}throw new J},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var l=e.PATTERNS[s],c=qt.patternMatchVariance(t,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,i=s):c===n&&(i=-1)}if(i>=0)return i%10;throw new J},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(qt),o6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Us=(function(r){o6(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,o=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var l=i[0];o=i[1];var c=l-(o-l);c>=0&&(n=t.isRange(c,l,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}i*=3;for(var o=n-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,o){return this.findGuardPattern(t,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,n,i,o,s){var l=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var c=0,h=n,p=o.length,v=i,m=n;m<l;m++)if(t.get(m)!==v)s[c]++;else{if(c===p-1){if(qt.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=s[0]+s[1];for(var _=s.slice(2,s.length),E=0;E<c-1;E++)s[E]=_[E];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,v=!v}throw new J},e.decodeDigit=function(t,n,i,o){this.recordPattern(t,i,n);for(var s=this.MAX_AVG_VARIANCE,l=-1,c=o.length,h=0;h<c;h++){var p=o[h],v=qt.patternMatchVariance(n,p,e.MAX_INDIVIDUAL_VARIANCE);v<s&&(s=v,l=h)}if(l>=0)return l;throw new J},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(qt),a6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s6=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),s=i.toString(),l=r.parseExtensionString(s),c=[new me((n[0]+n[1])/2,e),new me(o,e)],h=new Cr(s,null,0,c,Ee.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},r.prototype.decodeMiddle=function(e,t,n){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],h=0,p=0;p<5&&c<l;p++){var v=Us.decodeDigit(e,s,c,Us.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);try{for(var m=(i=void 0,a6(s)),_=m.next();!_.done;_=m.next()){var E=_.value;c+=E}}catch(S){i={error:S}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}v>=10&&(h|=1<<4-p),p!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new J;var I=this.determineCheckDigit(h);if(r.extensionChecksum(n.toString())!==I)throw new J;return c},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new J},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[hr.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},r})(),u6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l6=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),s=i.toString(),l=r.parseExtensionString(s),c=[new me((n[0]+n[1])/2,e),new me(o,e)],h=new Cr(s,null,0,c,Ee.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},r.prototype.decodeMiddle=function(e,t,n){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],h=0,p=0;p<2&&c<l;p++){var v=Us.decodeDigit(e,s,c,Us.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);try{for(var m=(i=void 0,u6(s)),_=m.next();!_.done;_=m.next()){var E=_.value;c+=E}}catch(I){i={error:I}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}v>=10&&(h|=1<<1-p),p!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new J;if(parseInt(n.toString())%4!==h)throw new J;return c},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[hr.ISSUE_NUMBER,parseInt(e)]])},r})(),c6=(function(){function r(){}return r.decodeRow=function(e,t,n){var i=Us.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new s6;return o.decodeRow(e,t,i)}catch{var s=new l6;return s.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),f6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Gt=(function(r){f6(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[n]=o}return t}return e.prototype.decodeRow=function(t,n,i){var o=e.findStartGuardPattern(n),s=i==null?null:i.get(xt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var l=new me((o[0]+o[1])/2,t);s.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,o,this.decodeRowStringBuffer),h=c.rowOffset,p=c.resultString;if(s!=null){var v=new me(h,t);s.foundPossibleResultPoint(v)}var m=e.decodeEnd(n,h);if(s!=null){var _=new me((m[0]+m[1])/2,t);s.foundPossibleResultPoint(_)}var E=m[1],I=E+(E-m[0]);if(I>=n.getSize()||!n.isRange(E,I,!1))throw new J;var S=p.toString();if(S.length<8)throw new ue;if(!e.checkChecksum(S))throw new rr;var D=(o[1]+o[0])/2,O=(m[1]+m[0])/2,V=this.getBarcodeFormat(),z=[new me(D,t),new me(O,t)],G=new Cr(S,null,0,z,V,new Date().getTime()),B=0;try{var R=c6.decodeRow(t,n,m[1]);G.putMetadata(hr.UPC_EAN_EXTENSION,R.getText()),G.putAllMetadata(R.getResultMetadata()),G.addResultPoints(R.getResultPoints()),B=R.getText().length}catch{}var N=i==null?null:i.get(xt.ALLOWED_EAN_EXTENSIONS);if(N!=null){var k=!1;for(var F in N)if(B.toString()===F){k=!0;break}if(!k)throw new J}return V===Ee.EAN_13||Ee.UPC_A,G},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}i*=3;for(var o=n-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Us),h6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),cy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J0=(function(r){h6(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,s,l,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),v=n[1],m=0,_=0;_<6&&v<p;_++){var E=Gt.decodeDigit(t,h,v,Gt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var I=(o=void 0,cy(h)),S=I.next();!S.done;S=I.next()){var D=S.value;v+=D}}catch(G){o={error:G}}finally{try{S&&!S.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}E>=10&&(m|=1<<5-_)}i=e.determineFirstDigit(i,m);var O=Gt.findGuardPattern(t,v,!0,Gt.MIDDLE_PATTERN,new Int32Array(Gt.MIDDLE_PATTERN.length).fill(0));v=O[1];for(var _=0;_<6&&v<p;_++){var E=Gt.decodeDigit(t,h,v,Gt.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var V=(l=void 0,cy(h)),z=V.next();!z.done;z=V.next()){var D=z.value;v+=D}}catch(R){l={error:R}}finally{try{z&&!z.done&&(c=V.return)&&c.call(V)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ee.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new J},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Gt),d6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hy=(function(r){d6(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,s,l,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),v=n[1],m=0;m<4&&v<p;m++){var _=Gt.decodeDigit(t,h,v,Gt.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var E=(o=void 0,fy(h)),I=E.next();!I.done;I=E.next()){var S=I.value;v+=S}}catch(z){o={error:z}}finally{try{I&&!I.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}}var D=Gt.findGuardPattern(t,v,!0,Gt.MIDDLE_PATTERN,new Int32Array(Gt.MIDDLE_PATTERN.length).fill(0));v=D[1];for(var m=0;m<4&&v<p;m++){var _=Gt.decodeDigit(t,h,v,Gt.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var O=(l=void 0,fy(h)),V=O.next();!V.done;V=O.next()){var S=V.value;v+=S}}catch(B){l={error:B}}finally{try{V&&!V.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ee.EAN_8},e})(Gt),p6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dy=(function(r){p6(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new J0,t}return e.prototype.getBarcodeFormat=function(){return Ee.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new Cr(n.substring(1),null,null,t.getResultPoints(),Ee.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new J},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Gt),g6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),v6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},py=(function(r){g6(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var o,s,l=this.decodeMiddleCounters.map(function(S){return S});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=t.getSize(),h=n[1],p=0,v=0;v<6&&h<c;v++){var m=e.decodeDigit(t,l,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var _=(o=void 0,v6(l)),E=_.next();!E.done;E=_.next()){var I=E.value;h+=I}}catch(S){o={error:S}}finally{try{E&&!E.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}m>=10&&(p|=1<<5-v)}return e.determineNumSysAndCheckDigit(new Me(i),p),h},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Gt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw J.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ee.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Me;i.append(t.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Gt),m6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f0=(function(r){m6(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(xt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Ee.EAN_13)>-1&&o.push(new J0),i.indexOf(Ee.UPC_A)>-1&&o.push(new dy),i.indexOf(Ee.EAN_8)>-1&&o.push(new hy),i.indexOf(Ee.UPC_E)>-1&&o.push(new py)),o.length===0&&(o.push(new J0),o.push(new dy),o.push(new hy),o.push(new py)),n.readers=o,n}return e.prototype.decodeRow=function(t,n,i){var o,s;try{for(var l=gy(this.readers),c=l.next();!c.done;c=l.next()){var h=c.value;try{var p=h.decodeRow(t,n,i),v=p.getBarcodeFormat()===Ee.EAN_13&&p.getText().charAt(0)==="0",m=i==null?null:i.get(xt.POSSIBLE_FORMATS),_=m==null||m.includes(Ee.UPC_A);if(v&&_){var E=p.getRawBytes(),I=new Cr(p.getText().substring(1),E,E?E.length:null,p.getResultPoints(),Ee.UPC_A);return I.putAllMetadata(p.getResultMetadata()),I}return p}catch{}}}catch(S){o={error:S}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}throw new J},e.prototype.reset=function(){var t,n;try{for(var i=gy(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e})(qt),y6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_6=(function(r){y6(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var o=this.getValidRowData(n);if(!o)throw new J;var s=this.codaBarDecodeRow(o.row);if(!s)throw new J;return new Cr(s,null,0,[new me(o.left,t),new me(o.right,t)],Ee.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var s=[],l=n[0],c=1,h=1;h<n.length;h++)n[h]===l?c++:(l=n[h],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(c,h){return(c+h)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(qt),x6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),w6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pa=(function(r){x6(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(qt.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new J},e.count=function(t){return Ye.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,o=n[0],s=1;s<t.length;s++)n[s]>o&&(o=n[s],i=s);t[i]++},e.decrement=function(t,n){for(var i=0,o=n[0],s=1;s<t.length;s++)n[s]<o&&(o=n[s],i=s);t[i]--},e.isFinderPattern=function(t){var n,i,o=t[0]+t[1],s=o+t[2]+t[3],l=o/s;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=w6(t),v=p.next();!v.done;v=p.next()){var m=v.value;m>h&&(h=m),m<c&&(c=m)}}catch(_){n={error:_}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return h<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(qt),$f=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),Cx=(function(){function r(e,t,n,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new me(n,o)),this.resultPoints.push(new me(i,o))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),E6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Es=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,o,s=0;try{for(var l=E6(e),c=l.next();!c.done;c=l.next()){var h=c.value;s+=h}}catch(O){i={error:O}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}for(var p=0,v=0,m=e.length,_=0;_<m-1;_++){var E=void 0;for(E=1,v|=1<<_;E<e[_];E++,v&=~(1<<_)){var I=r.combins(s-E-1,m-_-2);if(n&&v===0&&s-E-(m-_-1)>=m-_-1&&(I-=r.combins(s-E-(m-_),m-_-2)),m-_-1>1){for(var S=0,D=s-E-(m-_-2);D>t;D--)S+=r.combins(s-E-D-1,m-_-3);I-=S*(m-1-_)}else s-E>t&&I--;p+=I}s-=E}return p},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var o=1,s=1,l=e;l>n;l--)o*=l,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},r})(),A6=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new nr(n),o=0,s=e[0],l=s.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var h=e[c],p=h.getLeftChar().getValue(),v=11;v>=0;--v)(p&1<<v)!==0&&i.set(o),o++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),v=11;v>=0;--v)(m&1<<v)!==0&&i.set(o),o++}return i},r})(),fa=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),op=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),I6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),In=(function(r){I6(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(op),C6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ha=(function(r){C6(e,r);function e(t,n,i){var o=r.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(op),S6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vs=(function(r){S6(e,r);function e(t,n,i){var o=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new ue;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(op),uf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T6=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,o,s,l,c,h;if(!e)return null;if(e.length<2)throw new J;var p=e.substring(0,2);try{for(var v=uf(r.TWO_DIGIT_DATA_LENGTH),m=v.next();!m.done;m=v.next()){var _=m.value;if(_[0]===p)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,_[2],e):r.processFixedAI(2,_[1],e)}}catch(B){t={error:B}}finally{try{m&&!m.done&&(n=v.return)&&n.call(v)}finally{if(t)throw t.error}}if(e.length<3)throw new J;var E=e.substring(0,3);try{for(var I=uf(r.THREE_DIGIT_DATA_LENGTH),S=I.next();!S.done;S=I.next()){var _=S.value;if(_[0]===E)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,_[2],e):r.processFixedAI(3,_[1],e)}}catch(B){i={error:B}}finally{try{S&&!S.done&&(o=I.return)&&o.call(I)}finally{if(i)throw i.error}}try{for(var D=uf(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),O=D.next();!O.done;O=D.next()){var _=O.value;if(_[0]===E)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,_[2],e):r.processFixedAI(4,_[1],e)}}catch(B){s={error:B}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}if(e.length<4)throw new J;var V=e.substring(0,4);try{for(var z=uf(r.FOUR_DIGIT_DATA_LENGTH),G=z.next();!G.done;G=z.next()){var _=G.value;if(_[0]===V)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,_[2],e):r.processFixedAI(4,_[1],e)}}catch(B){c={error:B}}finally{try{G&&!G.done&&(h=z.return)&&h.call(z)}finally{if(c)throw c.error}}throw new J},r.processFixedAI=function(e,t,n){if(n.length<e)throw new J;var i=n.substring(0,e);if(n.length<e+t)throw new J;var o=n.substring(e,e+t),s=n.substring(e+t),l="("+i+")"+o,c=r.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;var s=n.substring(e,o),l=n.substring(o),c="("+i+")"+s,h=r.parseFieldsInGeneralPurpose(l);return h==null?c:c+h},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),Af=(function(){function r(e){this.buffer=new Me,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var o=this.decodeGeneralPurposeField(n,i),s=T6.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new vs(this.information.getSize(),vs.FNC1,vs.FNC1):new vs(this.information.getSize(),t-1,vs.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new vs(e+7,i,o)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,o=0;o<n;++o)e.get(t+o)&&(i|=1<<n-o-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new ha(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ha(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new ha(this.current.getPosition(),this.buffer.toString()):t=new ha(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new fa(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new ha(this.current.getPosition(),this.buffer.toString());return new fa(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new fa(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ha(this.current.getPosition(),this.buffer.toString());return new fa(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new fa(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ha(this.current.getPosition(),this.buffer.toString());return new fa(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new fa(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new In(e+5,In.FNC1);if(t>=5&&t<15)return new In(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new In(e+7,""+(n+1));if(n>=90&&n<116)return new In(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new ue}return new In(e+8,o)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new In(e+5,In.FNC1);if(t>=5&&t<15)return new In(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new In(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Ll("Decoding invalid alphanumeric value: "+n)}return new In(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),Sx=(function(){function r(e){this.information=e,this.generalDecoder=new Af(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),R6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Sn=(function(r){R6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+n).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(Sx),N6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),P6=(function(r){N6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Me;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Sn),O6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),b6=(function(r){O6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Me;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(Sx),D6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),If=(function(r){D6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),l=1e5,c=0;c<5;++c)s/l===0&&t.append("0"),l/=10;t.append(s)},e})(Sn),k6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Tx=(function(r){k6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+If.GTIN_SIZE+e.WEIGHT_SIZE)throw new J;var t=new Me;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+If.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(If),M6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),L6=(function(r){M6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(Tx),F6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),V6=(function(r){F6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(Tx),B6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),U6=(function(r){B6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Sn.GTIN_SIZE)throw new J;var t=new Me;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Sn.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Sn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Sn),j6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),z6=(function(r){j6(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Sn.GTIN_SIZE)throw new J;var t=new Me;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Sn.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Sn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Sn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Sn),H6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fo=(function(r){H6(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new J;var t=new Me;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var l=i;l/10===0&&t.append("0"),t.append(l),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(If);function G6(r){try{if(r.get(1))return new P6(r);if(!r.get(2))return new b6(r);var e=Af.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new L6(r);case 5:return new V6(r)}var t=Af.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new U6(r);case 13:return new z6(r)}var n=Af.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new fo(r,"310","11");case 57:return new fo(r,"320","11");case 58:return new fo(r,"310","13");case 59:return new fo(r,"320","13");case 60:return new fo(r,"310","15");case 61:return new fo(r,"320","15");case 62:return new fo(r,"310","17");case 63:return new fo(r,"320","17")}}catch(i){throw console.log(i),new Ll("unknown decoder: "+r)}}var vy=(function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),W6=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),$6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ho=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q6=(function(r){$6(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(l){if(l instanceof J){if(!this.pairs.length)throw new J;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new J},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,o,s=n;s<this.rows.length;s++){var l=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,ho(t)),h=c.next();!h.done;h=c.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var v=new Array(t);v.push(l);try{return this.checkRows(v,s+1)}catch(m){console.log(m)}}}throw new J},e.isValidSequence=function(t){var n,i;try{for(var o=ho(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var l=s.value;if(!(t.length>l.length)){for(var c=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==l[h]){c=!1;break}if(c)return!0}}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,o=!1,s=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>t){s=l.isEquivalent(this.pairs);break}o=l.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new W6(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,o,s,l,c,h;try{for(var p=ho(n),v=p.next();!v.done;v=p.next()){var m=v.value;if(m.getPairs().length!==t.length){var _=!0;try{for(var E=(s=void 0,ho(m.getPairs())),I=E.next();!I.done;I=E.next()){var S=I.value,D=!1;try{for(var O=(c=void 0,ho(t)),V=O.next();!V.done;V=O.next()){var z=V.value;if(vy.equals(S,z)){D=!0;break}}}catch(G){c={error:G}}finally{try{V&&!V.done&&(h=O.return)&&h.call(O)}finally{if(c)throw c.error}}D||(_=!1)}}catch(G){s={error:G}}finally{try{I&&!I.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}}}}catch(G){i={error:G}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,o,s,l,c,h;try{for(var p=ho(n),v=p.next();!v.done;v=p.next()){var m=v.value,_=!0;try{for(var E=(s=void 0,ho(t)),I=E.next();!I.done;I=E.next()){var S=I.value,D=!1;try{for(var O=(c=void 0,ho(m.getPairs())),V=O.next();!V.done;V=O.next()){var z=V.value;if(S.equals(z)){D=!0;break}}}catch(G){c={error:G}}finally{try{V&&!V.done&&(h=O.return)&&h.call(O)}finally{if(c)throw c.error}}if(!D){_=!1;break}}}catch(G){s={error:G}}finally{try{I&&!I.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}if(_)return!0}}catch(G){i={error:G}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=A6.buildBitArray(t),i=G6(n),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),l=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],l[0],l[1]];return new Cr(o,null,null,c,Ee.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);o+=c.getLeftChar().getChecksumPortion(),s++;var h=c.getRightChar();h!=null&&(o+=h.getChecksumPortion(),s++)}o%=211;var p=211*(s-4)+o;return p===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var s,l=!0,c=-1;do this.findNextPair(t,n,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):l=!1;while(l);var h=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new J;var p;try{p=this.decodeDataCharacter(t,s,o,!1)}catch(v){p=null,console.log(v)}return new vy(h,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var h=n.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;l<s&&(p=!t.get(l),!!p);)l++;for(var v=0,m=l,_=l;_<s;_++)if(t.get(_)!==p)o[v]++;else{if(v===3){if(h&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=m,this.startEnd[1]=_;return}h&&e.reverseCounters(o),m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,v--}else v++;o[v]=1,p=!p}throw new J},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var o=t[i];t[i]=t[n-i-1],t[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,n,i){var o,s,l;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,l=this.startEnd[1]}else s=this.startEnd[0],l=t.getNextUnset(this.startEnd[1]+1),o=l-this.startEnd[1];var h=this.getDecodeFinderCounters();pt.arraycopy(h,0,h,1,h.length-1),h[0]=o;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new Cx(p,[s,l],s,l,n)},e.prototype.decodeDataCharacter=function(t,n,i,o){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(o)e.recordPatternInReverse(t,n.getStartEnd()[0],s);else{e.recordPattern(t,n.getStartEnd()[1],s);for(var c=0,h=s.length-1;c<h;c++,h--){var p=s[c];s[c]=s[h],s[h]=p}}var v=17,m=Ye.sum(new Int32Array(s))/v,_=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(m-_)/_>.3)throw new J;for(var E=this.getOddCounts(),I=this.getEvenCounts(),S=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var O=1*s[c]/m,V=O+.5;if(V<1){if(O<.3)throw new J;V=1}else if(V>8){if(O>8.7)throw new J;V=8}var z=c/2;(c&1)===0?(E[z]=V,S[z]=O-V):(I[z]=V,D[z]=O-V)}this.adjustOddEvenCounts(v);for(var G=4*n.getValue()+(i?0:2)+(o?0:1)-1,B=0,R=0,c=E.length-1;c>=0;c--){if(e.isNotA1left(n,i,o)){var N=e.WEIGHTS[G][2*c];R+=E[c]*N}B+=E[c]}for(var k=0,c=I.length-1;c>=0;c--)if(e.isNotA1left(n,i,o)){var N=e.WEIGHTS[G][2*c+1];k+=I[c]*N}var F=R+k;if((B&1)!==0||B>13||B<4)throw new J;var U=(13-B)/2,H=e.SYMBOL_WIDEST[U],M=9-H,ke=Es.getRSSvalue(E,H,!0),ut=Es.getRSSvalue(I,M,!1),bt=e.EVEN_TOTAL_SUBSET[U],at=e.GSUM[U],le=ke*bt+ut+at;return new $f(le,F)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=Ye.sum(new Int32Array(this.getOddCounts())),i=Ye.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);var l=!1,c=!1;i>13?c=!0:i<4&&(l=!0);var h=n+i-t,p=(n&1)===1,v=(i&1)===0;if(h===1)if(p){if(v)throw new J;s=!0}else{if(!v)throw new J;c=!0}else if(h===-1)if(p){if(v)throw new J;o=!0}else{if(!v)throw new J;l=!0}else if(h===0){if(p){if(!v)throw new J;n<i?(o=!0,c=!0):(s=!0,l=!0)}else if(v)throw new J}else throw new J;if(o){if(s)throw new J;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new J;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(pa),X6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),K6=(function(r){X6(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})($f),Y6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),h0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},my=(function(r){Y6(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var o,s,l,c,h=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),n.reverse();var p=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,p),n.reverse();try{for(var v=h0(this.possibleLeftPairs),m=v.next();!m.done;m=v.next()){var _=m.value;if(_.getCount()>1)try{for(var E=(l=void 0,h0(this.possibleRightPairs)),I=E.next();!I.done;I=E.next()){var S=I.value;if(S.getCount()>1&&e.checkChecksum(_,S))return e.constructResult(_,S)}}catch(D){l={error:D}}finally{try{I&&!I.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}}}catch(D){o={error:D}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}throw new J},e.addOrTally=function(t,n){var i,o;if(n!=null){var s=!1;try{for(var l=h0(t),c=l.next();!c.done;c=l.next()){var h=c.value;if(h.getValue()===n.getValue()){h.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}s||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),o=new String(i).toString(),s=new Me,l=13-o.length;l>0;l--)s.append("0");s.append(o);for(var c=0,l=0;l<13;l++){var h=s.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*h:h}c=10-c%10,c===10&&(c=0),s.append(c.toString());var p=t.getFinderPattern().getResultPoints(),v=n.getFinderPattern().getResultPoints();return new Cr(s.toString(),null,0,[p[0],p[1],v[0],v[1]],Ee.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,n,i,o){try{var s=this.findFinderPattern(t,n),l=this.parseFoundFinderPattern(t,i,n,s),c=o==null?null:o.get(xt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var h=(s[0]+s[1])/2;n&&(h=t.getSize()-1-h),c.foundPossibleResultPoint(new me(h,i))}var p=this.decodeDataCharacter(t,l,!0),v=this.decodeDataCharacter(t,l,!1);return new K6(1597*p.getValue()+v.getValue(),p.getChecksumPortion()+4*v.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)qt.recordPatternInReverse(t,n.getStartEnd()[0],o);else{qt.recordPattern(t,n.getStartEnd()[1]+1,o);for(var l=0,c=o.length-1;l<c;l++,c--){var h=o[l];o[l]=o[c],o[c]=h}}for(var p=i?16:15,v=Ye.sum(new Int32Array(o))/p,m=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var S=o[l]/v,D=Math.floor(S+.5);D<1?D=1:D>8&&(D=8);var O=Math.floor(l/2);(l&1)===0?(m[O]=D,E[O]=S-D):(_[O]=D,I[O]=S-D)}this.adjustOddEvenCounts(i,p);for(var V=0,z=0,l=m.length-1;l>=0;l--)z*=9,z+=m[l],V+=m[l];for(var G=0,B=0,l=_.length-1;l>=0;l--)G*=9,G+=_[l],B+=_[l];var R=z+3*G;if(i){if((V&1)!==0||V>12||V<4)throw new J;var N=(12-V)/2,k=e.OUTSIDE_ODD_WIDEST[N],F=9-k,U=Es.getRSSvalue(m,k,!1),H=Es.getRSSvalue(_,F,!0),M=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],ke=e.OUTSIDE_GSUM[N];return new $f(U*M+H+ke,R)}else{if((B&1)!==0||B>10||B<4)throw new J;var N=(10-B)/2,k=e.INSIDE_ODD_WIDEST[N],F=9-k,U=Es.getRSSvalue(m,k,!0),H=Es.getRSSvalue(_,F,!1),ut=e.INSIDE_ODD_TOTAL_SUBSET[N],ke=e.INSIDE_GSUM[N];return new $f(H*ut+U+ke,R)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,l=0;l<o&&(s=!t.get(l),n!==s);)l++;for(var c=0,h=l,p=l;p<o;p++)if(t.get(p)!==s)i[c]++;else{if(c===3){if(pa.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new J},e.prototype.parseFoundFinderPattern=function(t,n,i,o){for(var s=t.get(o[0]),l=o[0]-1;l>=0&&s!==t.get(l);)l--;l++;var c=o[0]-l,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);pt.arraycopy(h,0,p,1,h.length-1),p[0]=c;var v=this.parseFinderValue(p,e.FINDER_PATTERNS),m=l,_=o[1];return i&&(m=t.getSize()-1-m,_=t.getSize()-1-_),new Cx(v,[l,o[1]],m,_,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=Ye.sum(new Int32Array(this.getOddCounts())),o=Ye.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1,c=!1,h=!1;t?(i>12?l=!0:i<4&&(s=!0),o>12?h=!0:o<4&&(c=!0)):(i>11?l=!0:i<5&&(s=!0),o>10?h=!0:o<4&&(c=!0));var p=i+o-n,v=(i&1)===(t?1:0),m=(o&1)===1;if(p===1)if(v){if(m)throw new J;l=!0}else{if(!m)throw new J;h=!0}else if(p===-1)if(v){if(m)throw new J;s=!0}else{if(!m)throw new J;c=!0}else if(p===0){if(v){if(!m)throw new J;i<o?(s=!0,h=!0):(l=!0,c=!0)}else if(m)throw new J}else throw new J;if(s){if(l)throw new J;pa.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&pa.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new J;pa.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&pa.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(pa),Q6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),tl=(function(r){Q6(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(xt.POSSIBLE_FORMATS):null,o=t&&t.get(xt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(xt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Ee.EAN_13)||i.includes(Ee.UPC_A)||i.includes(Ee.EAN_8)||i.includes(Ee.UPC_E))&&n.readers.push(new f0(t)),i.includes(Ee.CODE_39)&&n.readers.push(new sy(o,s)),i.includes(Ee.CODE_93)&&n.readers.push(new uy),i.includes(Ee.CODE_128)&&n.readers.push(new ay),i.includes(Ee.ITF)&&n.readers.push(new ly),i.includes(Ee.CODABAR)&&n.readers.push(new _6),i.includes(Ee.RSS_14)&&n.readers.push(new my),i.includes(Ee.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new q6))),n.readers.length===0&&(n.readers.push(new f0(t)),n.readers.push(new sy),n.readers.push(new uy),n.readers.push(new f0(t)),n.readers.push(new ay),n.readers.push(new ly),n.readers.push(new my)),n}return e.prototype.decodeRow=function(t,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,n,i)}catch{}throw new J},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(qt),Z6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Z6(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new tl(n),t,n)||this}return e})(Ys);var yy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),Ze=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),J6=(function(){function r(e,t,n,i,o,s){var l,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var h=0,p=s.getECCodewords(),v=s.getECBlocks();try{for(var m=yy(v),_=m.next();!_.done;_=m.next()){var E=_.value;h+=E.getCount()*(E.getDataCodewords()+p)}}catch(I){l={error:I}}finally{try{_&&!_.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}this.totalCodewords=h}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new ue;try{for(var o=yy(r.VERSIONS),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===t)return l}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new ue},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new tt(5,new Ze(1,3))),new r(2,12,12,10,10,new tt(7,new Ze(1,5))),new r(3,14,14,12,12,new tt(10,new Ze(1,8))),new r(4,16,16,14,14,new tt(12,new Ze(1,12))),new r(5,18,18,16,16,new tt(14,new Ze(1,18))),new r(6,20,20,18,18,new tt(18,new Ze(1,22))),new r(7,22,22,20,20,new tt(20,new Ze(1,30))),new r(8,24,24,22,22,new tt(24,new Ze(1,36))),new r(9,26,26,24,24,new tt(28,new Ze(1,44))),new r(10,32,32,14,14,new tt(36,new Ze(1,62))),new r(11,36,36,16,16,new tt(42,new Ze(1,86))),new r(12,40,40,18,18,new tt(48,new Ze(1,114))),new r(13,44,44,20,20,new tt(56,new Ze(1,144))),new r(14,48,48,22,22,new tt(68,new Ze(1,174))),new r(15,52,52,24,24,new tt(42,new Ze(2,102))),new r(16,64,64,14,14,new tt(56,new Ze(2,140))),new r(17,72,72,16,16,new tt(36,new Ze(4,92))),new r(18,80,80,18,18,new tt(48,new Ze(4,114))),new r(19,88,88,20,20,new tt(56,new Ze(4,144))),new r(20,96,96,22,22,new tt(68,new Ze(4,174))),new r(21,104,104,24,24,new tt(56,new Ze(6,136))),new r(22,120,120,18,18,new tt(68,new Ze(6,175))),new r(23,132,132,20,20,new tt(62,new Ze(8,163))),new r(24,144,144,22,22,new tt(62,new Ze(8,156),new Ze(2,155))),new r(25,8,18,6,16,new tt(7,new Ze(1,5))),new r(26,8,32,6,14,new tt(11,new Ze(1,10))),new r(27,12,26,10,24,new tt(14,new Ze(1,16))),new r(28,12,36,10,16,new tt(18,new Ze(1,22))),new r(29,16,36,14,16,new tt(24,new Ze(1,32))),new r(30,16,48,14,22,new tt(28,new Ze(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),eR=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ue;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ii(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return J6.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,c=!1,h=!1,p=!1;do if(n===o&&i===0&&!l)e[t++]=this.readCorner1(o,s)&255,n-=2,i+=2,l=!0;else if(n===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,n-=2,i+=2,c=!0;else if(n===o+4&&i===2&&(s&7)===0&&!h)e[t++]=this.readCorner3(o,s)&255,n-=2,i+=2,h=!0;else if(n===o-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(o,s)&255,n-=2,i+=2,p=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,s)&255),n-=2,i+=2;while(n>=0&&i<s);n+=1,i+=3;do n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,s)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<s);if(t!==this.version.getTotalCodewords())throw new ue;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var o=0;return this.readModule(e-2,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t,n,i)&&(o|=1),o<<=1,this.readModule(e,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e,t,n,i)&&(o|=1),o},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,l=n/o|0,c=s*i,h=l*o,p=new ii(h,c),v=0;v<s;++v)for(var m=v*i,_=0;_<l;++_)for(var E=_*o,I=0;I<i;++I)for(var S=v*(i+2)+1+I,D=m+I,O=0;O<o;++O){var V=_*(o+2)+1+O;if(e.get(V,S)){var z=E+O;p.set(z,D)}}return p},r})(),_y=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tR=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,o,s,l=t.getECBlocks(),c=0,h=l.getECBlocks();try{for(var p=_y(h),v=p.next();!v.done;v=p.next()){var m=v.value;c+=m.getCount()}}catch(ke){n={error:ke}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var _=new Array(c),E=0;try{for(var I=_y(h),S=I.next();!S.done;S=I.next())for(var m=S.value,D=0;D<m.getCount();D++){var O=m.getDataCodewords(),V=l.getECCodewords()+O;_[E++]=new r(O,new Uint8Array(V))}}catch(ke){o={error:ke}}finally{try{S&&!S.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}for(var z=_[0].codewords.length,G=z-l.getECCodewords(),B=G-1,R=0,D=0;D<B;D++)for(var N=0;N<E;N++)_[N].codewords[D]=e[R++];for(var k=t.getVersionNumber()===24,F=k?8:E,N=0;N<F;N++)_[N].codewords[G-1]=e[R++];for(var U=_[0].codewords.length,D=G;D<U;D++)for(var N=0;N<E;N++){var H=k?(N+8)%E:N,M=k&&H>7?D-1:D;_[H].codewords[M]=e[R++]}if(R!==e.length)throw new Ce;return _},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),Rx=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ce(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var s=8-n,l=e<s?e:s,c=s-l,h=255>>8-l<<c;t=(o[i]&h)>>c,e-=l,n+=l,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,h=255>>c<<c;t=t<<e|(o[i]&h)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),zt;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(zt||(zt={}));var rR=(function(){function r(){}return r.decode=function(e){var t=new Rx(e),n=new Me,i=new Me,o=new Array,s=zt.ASCII_ENCODE;do if(s===zt.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case zt.C40_ENCODE:this.decodeC40Segment(t,n);break;case zt.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case zt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case zt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case zt.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new ue}s=zt.ASCII_ENCODE}while(s!==zt.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new wh(e,n.toString(),o.length===0?null:o,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new ue;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),zt.ASCII_ENCODE;if(o===129)return zt.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return zt.C40_ENCODE;case 231:return zt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return zt.ANSIX12_ENCODE;case 239:return zt.TEXT_ENCODE;case 240:return zt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new ue;break}}while(e.available()>0);return zt.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else throw new ue;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new ue}o=0;break;case 3:n?(t.append(String.fromCharCode(c+224)),n=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new ue}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else throw new ue;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new ue}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[c];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h),o=0}else throw new ue;break;default:throw new ue}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var s=n[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new ue;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new ue;for(var l=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new ue;l[c]=this.unrandomize255State(e.readBits(8),i++)}n.push(l);try{t.append(dn.decode(l,We.ISO88591))}catch(h){throw new Ll("Platform does not support required encoding: "+h.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),nR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iR=(function(){function r(){this.rsDecoder=new Eh(jr.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new eR(e),o=i.getVersion(),s=i.readCodewords(),l=tR.getDataBlocks(s,o),c=0;try{for(var h=nR(l),p=h.next();!p.done;p=h.next()){var v=p.value;c+=v.getNumDataCodewords()}}catch(V){t={error:V}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}for(var m=new Uint8Array(c),_=l.length,E=0;E<_;E++){var I=l[E],S=I.getCodewords(),D=I.getNumDataCodewords();this.correctErrors(S,D);for(var O=0;O<D;O++)m[O*_+E]=S[O]}return rR.decode(m)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new rr}for(var i=0;i<t;i++)e[i]=n[i]},r})(),oR=(function(){function r(e){this.image=e,this.rectangleDetector=new Q0(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new J;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],o=t[2],s=t[3],l=this.transitionsBetween(n,s)+1,c=this.transitionsBetween(o,s)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var h=r.sampleGrid(this.image,n,i,o,s,l,c);return new np(h,[n,i,o,s])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new me(e.getX()+i,e.getY()+o)},r.moveAway=function(e,t,n){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<n?o-=1:o+=1,new me(i,o)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,n),l=this.transitionsBetween(n,i),c=this.transitionsBetween(i,o),h=this.transitionsBetween(o,t),p=s,v=[o,t,n,i];return p>l&&(p=l,v[0]=t,v[1]=n,v[2]=i,v[3]=o),p>c&&(p=c,v[0]=n,v[1]=i,v[2]=o,v[3]=t),p>h&&(v[0]=i,v[1]=o,v[2]=t,v[3]=n),v},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),l=r.shiftPoint(n,i,(s+1)*4),c=r.shiftPoint(i,n,(s+1)*4),h=this.transitionsBetween(l,t),p=this.transitionsBetween(c,o);return h<p?(e[0]=t,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),l=this.transitionsBetween(n,o),c=r.shiftPoint(t,n,(l+1)*4),h=r.shiftPoint(i,n,(s+1)*4);s=this.transitionsBetween(c,o),l=this.transitionsBetween(h,o);var p=new me(o.getX()+(i.getX()-n.getX())/(s+1),o.getY()+(i.getY()-n.getY())/(s+1)),v=new me(o.getX()+(t.getX()-n.getX())/(l+1),o.getY()+(t.getY()-n.getY())/(l+1));if(!this.isValid(p))return this.isValid(v)?v:null;if(!this.isValid(v))return p;var m=this.transitionsBetween(c,p)+this.transitionsBetween(h,p),_=this.transitionsBetween(c,v)+this.transitionsBetween(h,v);return m>_?p:v},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,l=this.transitionsBetween(i,o)+1,c=r.shiftPoint(t,n,l*4),h=r.shiftPoint(i,n,s*4);s=this.transitionsBetween(c,o)+1,l=this.transitionsBetween(h,o)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);var p=(t.getX()+n.getX()+i.getX()+o.getX())/4,v=(t.getY()+n.getY()+i.getY()+o.getY())/4;t=r.moveAway(t,p,v),n=r.moveAway(n,p,v),i=r.moveAway(i,p,v),o=r.moveAway(o,p,v);var m,_;return c=r.shiftPoint(t,n,l*4),c=r.shiftPoint(c,o,s*4),m=r.shiftPoint(n,t,l*4),m=r.shiftPoint(m,i,s*4),h=r.shiftPoint(i,o,l*4),h=r.shiftPoint(h,n,s*4),_=r.shiftPoint(o,i,l*4),_=r.shiftPoint(_,t,s*4),[c,m,h,_]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,o,s,l){var c=ip.getInstance();return c.sampleGrid(e,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.abs(s-i)>Math.abs(o-n);if(l){var c=n;n=i,i=c,c=o,o=s,s=c}for(var h=Math.abs(o-n),p=Math.abs(s-i),v=-h/2,m=i<s?1:-1,_=n<o?1:-1,E=0,I=this.image.get(l?i:n,l?n:i),S=n,D=i;S!==o;S+=_){var O=this.image.get(l?D:S,l?S:D);if(O!==I&&(E++,I=O),v+=p,v>0){if(D===s)break;D+=m,v-=h}}return E},r})(),e1=(function(){function r(){this.decoder=new iR}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(xt.PURE_BARCODE)){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=r.NO_POINTS}else{var s=new oR(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),i=s.getPoints()}var l=n.getRawBytes(),c=new Cr(n.getText(),l,8*l.length,i,Ee.DATA_MATRIX,pt.currentTimeMillis()),h=n.getByteSegments();h!=null&&c.putMetadata(hr.BYTE_SEGMENTS,h);var p=n.getECLevel();return p!=null&&c.putMetadata(hr.ERROR_CORRECTION_LEVEL,p),c},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new J;var i=this.moduleSize(t,e),o=t[1],s=n[1],l=t[0],c=n[0],h=(c-l+1)/i,p=(s-o+1)/i;if(h<=0||p<=0)throw new J;var v=i/2;o+=v,l+=v;for(var m=new ii(h,p),_=0;_<p;_++)for(var E=o+_*i,I=0;I<h;I++)e.get(l+I*i,E)&&m.set(I,_);return m},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],o=e[1];i<n&&t.get(i,o);)i++;if(i===n)throw new J;var s=i-e[0];if(s===0)throw new J;return s},r.NO_POINTS=[],r})(),aR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){aR(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new e1,t)||this}return e})(Ys);var As;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(As||(As={}));var sR=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new Cn(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new Ce;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(As.L,"L",1),r.M=new r(As.M,"M",0),r.Q=new r(As.Q,"Q",3),r.H=new r(As.H,"H",2),r})(),uR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nx=(function(){function r(e){this.errorCorrectionLevel=sR.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Fe.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var l=uR(r.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var h=c.value,p=h[0];if(p===e||p===t)return new r(h[1]);var v=r.numBitsDiffering(e,p);v<o&&(s=h[1],o=v),e!==t&&(v=r.numBitsDiffering(t,p),v<o&&(s=h[1],o=v))}}catch(m){n={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return o<=3?new r(s):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),lR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var o=lR(i),s=o.next();!s.done;s=o.next()){var l=s.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),b=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),cR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ma=(function(){function r(e,t){for(var n,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var l=0,c=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();try{for(var p=cR(h),v=p.next();!v.done;v=p.next()){var m=v.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(_){n={error:_}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}this.totalCodewords=l}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ue;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ue}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new Ce;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var o=r.VERSION_DECODE_INFO[i];if(o===e)return r.getVersionForNumber(i+7);var s=Nx.numBitsDiffering(e,o);s<t&&(n=i+7,t=s)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ii(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<n;s++)i===0&&(s===0||s===n-1)||i===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new K(7,new b(1,19)),new K(10,new b(1,16)),new K(13,new b(1,13)),new K(17,new b(1,9))),new r(2,Int32Array.from([6,18]),new K(10,new b(1,34)),new K(16,new b(1,28)),new K(22,new b(1,22)),new K(28,new b(1,16))),new r(3,Int32Array.from([6,22]),new K(15,new b(1,55)),new K(26,new b(1,44)),new K(18,new b(2,17)),new K(22,new b(2,13))),new r(4,Int32Array.from([6,26]),new K(20,new b(1,80)),new K(18,new b(2,32)),new K(26,new b(2,24)),new K(16,new b(4,9))),new r(5,Int32Array.from([6,30]),new K(26,new b(1,108)),new K(24,new b(2,43)),new K(18,new b(2,15),new b(2,16)),new K(22,new b(2,11),new b(2,12))),new r(6,Int32Array.from([6,34]),new K(18,new b(2,68)),new K(16,new b(4,27)),new K(24,new b(4,19)),new K(28,new b(4,15))),new r(7,Int32Array.from([6,22,38]),new K(20,new b(2,78)),new K(18,new b(4,31)),new K(18,new b(2,14),new b(4,15)),new K(26,new b(4,13),new b(1,14))),new r(8,Int32Array.from([6,24,42]),new K(24,new b(2,97)),new K(22,new b(2,38),new b(2,39)),new K(22,new b(4,18),new b(2,19)),new K(26,new b(4,14),new b(2,15))),new r(9,Int32Array.from([6,26,46]),new K(30,new b(2,116)),new K(22,new b(3,36),new b(2,37)),new K(20,new b(4,16),new b(4,17)),new K(24,new b(4,12),new b(4,13))),new r(10,Int32Array.from([6,28,50]),new K(18,new b(2,68),new b(2,69)),new K(26,new b(4,43),new b(1,44)),new K(24,new b(6,19),new b(2,20)),new K(28,new b(6,15),new b(2,16))),new r(11,Int32Array.from([6,30,54]),new K(20,new b(4,81)),new K(30,new b(1,50),new b(4,51)),new K(28,new b(4,22),new b(4,23)),new K(24,new b(3,12),new b(8,13))),new r(12,Int32Array.from([6,32,58]),new K(24,new b(2,92),new b(2,93)),new K(22,new b(6,36),new b(2,37)),new K(26,new b(4,20),new b(6,21)),new K(28,new b(7,14),new b(4,15))),new r(13,Int32Array.from([6,34,62]),new K(26,new b(4,107)),new K(22,new b(8,37),new b(1,38)),new K(24,new b(8,20),new b(4,21)),new K(22,new b(12,11),new b(4,12))),new r(14,Int32Array.from([6,26,46,66]),new K(30,new b(3,115),new b(1,116)),new K(24,new b(4,40),new b(5,41)),new K(20,new b(11,16),new b(5,17)),new K(24,new b(11,12),new b(5,13))),new r(15,Int32Array.from([6,26,48,70]),new K(22,new b(5,87),new b(1,88)),new K(24,new b(5,41),new b(5,42)),new K(30,new b(5,24),new b(7,25)),new K(24,new b(11,12),new b(7,13))),new r(16,Int32Array.from([6,26,50,74]),new K(24,new b(5,98),new b(1,99)),new K(28,new b(7,45),new b(3,46)),new K(24,new b(15,19),new b(2,20)),new K(30,new b(3,15),new b(13,16))),new r(17,Int32Array.from([6,30,54,78]),new K(28,new b(1,107),new b(5,108)),new K(28,new b(10,46),new b(1,47)),new K(28,new b(1,22),new b(15,23)),new K(28,new b(2,14),new b(17,15))),new r(18,Int32Array.from([6,30,56,82]),new K(30,new b(5,120),new b(1,121)),new K(26,new b(9,43),new b(4,44)),new K(28,new b(17,22),new b(1,23)),new K(28,new b(2,14),new b(19,15))),new r(19,Int32Array.from([6,30,58,86]),new K(28,new b(3,113),new b(4,114)),new K(26,new b(3,44),new b(11,45)),new K(26,new b(17,21),new b(4,22)),new K(26,new b(9,13),new b(16,14))),new r(20,Int32Array.from([6,34,62,90]),new K(28,new b(3,107),new b(5,108)),new K(26,new b(3,41),new b(13,42)),new K(30,new b(15,24),new b(5,25)),new K(28,new b(15,15),new b(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new K(28,new b(4,116),new b(4,117)),new K(26,new b(17,42)),new K(28,new b(17,22),new b(6,23)),new K(30,new b(19,16),new b(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new K(28,new b(2,111),new b(7,112)),new K(28,new b(17,46)),new K(30,new b(7,24),new b(16,25)),new K(24,new b(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new K(30,new b(4,121),new b(5,122)),new K(28,new b(4,47),new b(14,48)),new K(30,new b(11,24),new b(14,25)),new K(30,new b(16,15),new b(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new K(30,new b(6,117),new b(4,118)),new K(28,new b(6,45),new b(14,46)),new K(30,new b(11,24),new b(16,25)),new K(30,new b(30,16),new b(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new K(26,new b(8,106),new b(4,107)),new K(28,new b(8,47),new b(13,48)),new K(30,new b(7,24),new b(22,25)),new K(30,new b(22,15),new b(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new K(28,new b(10,114),new b(2,115)),new K(28,new b(19,46),new b(4,47)),new K(28,new b(28,22),new b(6,23)),new K(30,new b(33,16),new b(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new K(30,new b(8,122),new b(4,123)),new K(28,new b(22,45),new b(3,46)),new K(30,new b(8,23),new b(26,24)),new K(30,new b(12,15),new b(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new b(3,117),new b(10,118)),new K(28,new b(3,45),new b(23,46)),new K(30,new b(4,24),new b(31,25)),new K(30,new b(11,15),new b(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new b(7,116),new b(7,117)),new K(28,new b(21,45),new b(7,46)),new K(30,new b(1,23),new b(37,24)),new K(30,new b(19,15),new b(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new b(5,115),new b(10,116)),new K(28,new b(19,47),new b(10,48)),new K(30,new b(15,24),new b(25,25)),new K(30,new b(23,15),new b(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new b(13,115),new b(3,116)),new K(28,new b(2,46),new b(29,47)),new K(30,new b(42,24),new b(1,25)),new K(30,new b(23,15),new b(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new b(17,115)),new K(28,new b(10,46),new b(23,47)),new K(30,new b(10,24),new b(35,25)),new K(30,new b(19,15),new b(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new b(17,115),new b(1,116)),new K(28,new b(14,46),new b(21,47)),new K(30,new b(29,24),new b(19,25)),new K(30,new b(11,15),new b(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new b(13,115),new b(6,116)),new K(28,new b(14,46),new b(23,47)),new K(30,new b(44,24),new b(7,25)),new K(30,new b(59,16),new b(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new b(12,121),new b(7,122)),new K(28,new b(12,47),new b(26,48)),new K(30,new b(39,24),new b(14,25)),new K(30,new b(22,15),new b(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new b(6,121),new b(14,122)),new K(28,new b(6,47),new b(34,48)),new K(30,new b(46,24),new b(10,25)),new K(30,new b(2,15),new b(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new b(17,122),new b(4,123)),new K(28,new b(29,46),new b(14,47)),new K(30,new b(49,24),new b(10,25)),new K(30,new b(24,15),new b(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new b(4,122),new b(18,123)),new K(28,new b(13,46),new b(32,47)),new K(30,new b(48,24),new b(14,25)),new K(30,new b(42,15),new b(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new b(20,117),new b(4,118)),new K(28,new b(40,47),new b(7,48)),new K(30,new b(43,24),new b(22,25)),new K(30,new b(10,15),new b(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new b(19,118),new b(6,119)),new K(28,new b(18,47),new b(31,48)),new K(30,new b(34,24),new b(34,25)),new K(30,new b(20,15),new b(61,16)))],r})(),Jt;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Jt||(Jt={}));var xy=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[Jt.DATA_MASK_000,new r(Jt.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Jt.DATA_MASK_001,new r(Jt.DATA_MASK_001,function(e,t){return(e&1)===0})],[Jt.DATA_MASK_010,new r(Jt.DATA_MASK_010,function(e,t){return t%3===0})],[Jt.DATA_MASK_011,new r(Jt.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Jt.DATA_MASK_100,new r(Jt.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Jt.DATA_MASK_101,new r(Jt.DATA_MASK_101,function(e,t){return e*t%6===0})],[Jt.DATA_MASK_110,new r(Jt.DATA_MASK_110,function(e,t){return e*t%6<3})],[Jt.DATA_MASK_111,new r(Jt.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),fR=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ue;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,n=i-1;n>=s;n--)o=this.copyBit(8,n,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=Nx.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ue},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ma.getVersionForNumber(t);for(var n=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)n=this.copyBit(s,o,n);var l=ma.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)n=this.copyBit(s,o,n);if(l=ma.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new ue},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=xy.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,l=new Uint8Array(t.getTotalCodewords()),c=0,h=0,p=0,v=i-1;v>0;v-=2){v===6&&v--;for(var m=0;m<i;m++)for(var _=s?i-1-m:m,E=0;E<2;E++)o.get(v-E,_)||(p++,h<<=1,this.bitMatrix.get(v-E,_)&&(h|=1),p===8&&(l[c++]=h,p=0,h=0));s=!s}if(c!==t.getTotalCodewords())throw new ue;return l},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=xy.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r})(),wy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hR=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,o,s,l;if(e.length!==t.getTotalCodewords())throw new Ce;var c=t.getECBlocksForLevel(n),h=0,p=c.getECBlocks();try{for(var v=wy(p),m=v.next();!m.done;m=v.next()){var _=m.value;h+=_.getCount()}}catch(M){i={error:M}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}var E=new Array(h),I=0;try{for(var S=wy(p),D=S.next();!D.done;D=S.next())for(var _=D.value,O=0;O<_.getCount();O++){var V=_.getDataCodewords(),z=c.getECCodewordsPerBlock()+V;E[I++]=new r(V,new Uint8Array(z))}}catch(M){s={error:M}}finally{try{D&&!D.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}for(var G=E[0].codewords.length,B=E.length-1;B>=0;){var R=E[B].codewords.length;if(R===G)break;B--}B++;for(var N=G-c.getECCodewordsPerBlock(),k=0,O=0;O<N;O++)for(var F=0;F<I;F++)E[F].codewords[O]=e[k++];for(var F=B;F<I;F++)E[F].codewords[N]=e[k++];for(var U=E[0].codewords.length,O=N;O<U;O++)for(var F=0;F<I;F++){var H=F<B?O:O+1;E[F].codewords[H]=e[k++]}return E},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),un;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(un||(un={}));var _t=(function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new Ce;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(un.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),dR=(function(){function r(){}return r.decode=function(e,t,n,i){var o=new Rx(e),s=new Me,l=new Array,c=-1,h=-1;try{var p=null,v=!1,m=void 0;do{if(o.available()<4)m=_t.TERMINATOR;else{var _=o.readBits(4);m=_t.forBits(_)}switch(m){case _t.TERMINATOR:break;case _t.FNC1_FIRST_POSITION:case _t.FNC1_SECOND_POSITION:v=!0;break;case _t.STRUCTURED_APPEND:if(o.available()<16)throw new ue;c=o.readBits(8),h=o.readBits(8);break;case _t.ECI:var E=r.parseECIValue(o);if(p=Wt.getCharacterSetECIByValue(E),p===null)throw new ue;break;case _t.HANZI:var I=o.readBits(4),S=o.readBits(m.getCharacterCountBits(t));I===r.GB2312_SUBSET&&r.decodeHanziSegment(o,s,S);break;default:var D=o.readBits(m.getCharacterCountBits(t));switch(m){case _t.NUMERIC:r.decodeNumericSegment(o,s,D);break;case _t.ALPHANUMERIC:r.decodeAlphanumericSegment(o,s,D,v);break;case _t.BYTE:r.decodeByteSegment(o,s,D,p,l,i);break;case _t.KANJI:r.decodeKanjiSegment(o,s,D);break;default:throw new ue}break}}while(m!==_t.TERMINATOR)}catch{throw new ue}return new wh(e,s.toString(),l.length===0?null:l,n===null?null:n.toString(),c,h)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new ue;for(var i=new Uint8Array(2*n),o=0;n>0;){var s=e.readBits(13),l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,i[o]=l>>8&255,i[o+1]=l&255,o+=2,n--}try{t.append(dn.decode(i,We.GB2312))}catch(c){throw new ue(c)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new ue;for(var i=new Uint8Array(2*n),o=0;n>0;){var s=e.readBits(13),l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,i[o]=l>>8,i[o+1]=l,o+=2,n--}try{t.append(dn.decode(i,We.SHIFT_JIS))}catch(c){throw new ue(c)}},r.decodeByteSegment=function(e,t,n,i,o,s){if(8*n>e.available())throw new ue;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var h;i===null?h=We.guessEncoding(l,s):h=i.getName();try{t.append(dn.decode(l,h))}catch(p){throw new ue(p)}o.push(l)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new ue;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var o=t.length();n>1;){if(e.available()<11)throw new ue;var s=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(s/45))),t.append(r.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new ue;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var l=o;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new ue;var i=e.readBits(10);if(i>=1e3)throw new ue;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new ue;var o=e.readBits(7);if(o>=100)throw new ue;t.append(r.toAlphaNumericChar(Math.floor(o/10))),t.append(r.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new ue;var s=e.readBits(4);if(s>=10)throw new ue;t.append(r.toAlphaNumericChar(s))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ue},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),Px=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),Ey=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pR=(function(){function r(){this.rsDecoder=new Eh(jr.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ii.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new fR(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(s){i=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new Px(!0)),o}catch(s){throw i!==null?i:s}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,o,s,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=hR.getDataBlocks(h,l,c),v=0;try{for(var m=Ey(p),_=m.next();!_.done;_=m.next()){var E=_.value;v+=E.getNumDataCodewords()}}catch(B){n={error:B}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}var I=new Uint8Array(v),S=0;try{for(var D=Ey(p),O=D.next();!O.done;O=D.next()){var E=O.value,V=E.getCodewords(),z=E.getNumDataCodewords();this.correctErrors(V,z);for(var G=0;G<z;G++)I[S++]=V[G]}}catch(B){o={error:B}}finally{try{O&&!O.done&&(s=D.return)&&s.call(D)}finally{if(o)throw o.error}}return dR.decode(I,l,c,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new rr}for(var i=0;i<t;i++)e[i]=n[i]},r})(),gR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vR=(function(r){gR(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=(this.getX()+n)/2,s=(this.getY()+t)/2,l=(this.estimatedModuleSize+i)/2;return new e(o,s,l)},e})(me),mR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yR=(function(){function r(e,t,n,i,o,s,l){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,o=this.startY+t/2,s=new Int32Array(3),l=this.image,c=0;c<t;c++){var h=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!l.get(p,h);)p++;for(var v=0;p<i;){if(l.get(p,h))if(v===1)s[1]++;else if(v===2){if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,h,p);if(m!==null)return m}s[0]=s[2],s[1]=1,s[2]=0,v=1}else s[++v]++;else v===1&&v++,s[v]++;p++}if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var o=this.image,s=o.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&o.get(t,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!o.get(t,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<s&&o.get(t,c)&&l[1]<=n;)l[1]++,c++;if(c===s||l[1]>n)return NaN;for(;c<s&&!o.get(t,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var h=l[0]+l[1]+l[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(l)?r.centerFromEnd(l,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,o,s=e[0]+e[1]+e[2],l=r.centerFromEnd(e,n),c=this.crossCheckVertical(t,l,2*e[1],s);if(!isNaN(c)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=mR(this.possibleCenters),v=p.next();!v.done;v=p.next()){var m=v.value;if(m.aboutEquals(h,c,l))return m.combineEstimate(c,l,h)}}catch(E){i={error:E}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var _=new vR(l,c,h);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},r})(),_R=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),xR=(function(r){_R(e,r);function e(t,n,i,o){var s=r.call(this,t,n)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=this.count+1,s=(this.count*this.getX()+n)/o,l=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,l,c,o)},e})(me),wR=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),$u=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ER=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(xt.TRY_HARDER)!==void 0,n=e!=null&&e.get(xt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),l=Math.floor(3*o/(4*r.MAX_MODULES));(l<r.MIN_SKIP||t)&&(l=r.MIN_SKIP);for(var c=!1,h=new Int32Array(5),p=l-1;p<o&&!c;p+=l){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var v=0,m=0;m<s;m++)if(i.get(m,p))(v&1)===1&&v++,h[v]++;else if((v&1)===0)if(v===4)if(r.foundPatternCross(h)){var _=this.handlePossibleCenter(h,p,m,n);if(_===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>h[2]&&(p+=E-h[2]-l,m=s-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;continue}v=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;else h[++v]++;else h[v]++;if(r.foundPatternCross(h)){var _=this.handlePossibleCenter(h,p,s,n);_===!0&&(l=h[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var I=this.selectBestPatterns();return me.orderBestPatterns(I),new wR(I)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var o=this.getCrossCheckStateCount(),s=0,l=this.image;e>=s&&t>=s&&l.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!l.get(t-s,e-s)&&o[1]<=n;)o[1]++,s++;if(e<s||t<s||o[1]>n)return!1;for(;e>=s&&t>=s&&l.get(t-s,e-s)&&o[0]<=n;)o[0]++,s++;if(o[0]>n)return!1;var c=l.getHeight(),h=l.getWidth();for(s=1;e+s<c&&t+s<h&&l.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=h)return!1;for(;e+s<c&&t+s<h&&!l.get(t+s,e+s)&&o[3]<n;)o[3]++,s++;if(e+s>=c||t+s>=h||o[3]>=n)return!1;for(;e+s<c&&t+s<h&&l.get(t+s,e+s)&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return!1;var p=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(p-i)<2*i&&r.foundPatternCross(o)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var o=this.image,s=o.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&o.get(t,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<s&&o.get(t,c);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&l[3]<n;)l[3]++,c++;if(c===s||l[3]>=n)return NaN;for(;c<s&&o.get(t,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=2*i?NaN:r.foundPatternCross(l)?r.centerFromEnd(l,c):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var o=this.image,s=o.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&o.get(c,t)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<s&&o.get(c,t);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&l[3]<n;)l[3]++,c++;if(c===s||l[3]>=n)return NaN;for(;c<s&&o.get(c,t)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=i?NaN:r.foundPatternCross(l)?r.centerFromEnd(l,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),e[2],o)))){for(var c=o/7,h=!1,p=this.possibleCenters,v=0,m=p.length;v<m;v++){var _=p[v];if(_.aboutEquals(c,l,s)){p[v]=_.combineEstimate(l,s,c),h=!0;break}}if(!h){var E=new xR(s,l,c);p.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=$u(this.possibleCenters),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.getCount()>=r.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,o=0,s=0,l=this.possibleCenters.length;try{for(var c=$u(this.possibleCenters),h=c.next();!h.done;h=c.next()){var p=h.value;p.getCount()>=r.CENTER_QUORUM&&(o++,s+=p.getEstimatedModuleSize())}}catch(I){e={error:I}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var v=s/l,m=0;try{for(var _=$u(this.possibleCenters),E=_.next();!E.done;E=_.next()){var p=E.value;m+=Math.abs(p.getEstimatedModuleSize()-v)}}catch(I){n={error:I}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}return m<=.05*s},r.prototype.selectBestPatterns=function(){var e,t,n,i,o=this.possibleCenters.length;if(o<3)throw new J;var s=this.possibleCenters,l;if(o>3){var c=0,h=0;try{for(var p=$u(this.possibleCenters),v=p.next();!v.done;v=p.next()){var m=v.value,_=m.getEstimatedModuleSize();c+=_,h+=_*_}}catch(G){e={error:G}}finally{try{v&&!v.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}l=c/o;var E=Math.sqrt(h/o-l*l);s.sort(function(G,B){var R=Math.abs(B.getEstimatedModuleSize()-l),N=Math.abs(G.getEstimatedModuleSize()-l);return R<N?-1:R>N?1:0});for(var I=Math.max(.2*l,E),S=0;S<s.length&&s.length>3;S++){var D=s[S];Math.abs(D.getEstimatedModuleSize()-l)>I&&(s.splice(S,1),S--)}}if(s.length>3){var c=0;try{for(var O=$u(s),V=O.next();!V.done;V=O.next()){var z=V.value;c+=z.getEstimatedModuleSize()}}catch(B){n={error:B}}finally{try{V&&!V.done&&(i=O.return)&&i.call(O)}finally{if(n)throw n.error}}l=c/s.length,s.sort(function(B,R){if(R.getCount()===B.getCount()){var N=Math.abs(R.getEstimatedModuleSize()-l),k=Math.abs(B.getEstimatedModuleSize()-l);return N<k?1:N>k?-1:0}else return R.getCount()-B.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),AR=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(xt.NEED_RESULT_POINT_CALLBACK);var t=new ER(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,n,i);if(o<1)throw new J("No pattern found in proccess finder.");var s=r.computeDimension(t,n,i,o),l=ma.getProvisionalVersionForDimension(s),c=l.getDimensionForVersion()-7,h=null;if(l.getAlignmentPatternCenters().length>0)for(var p=n.getX()-t.getX()+i.getX(),v=n.getY()-t.getY()+i.getY(),m=1-3/c,_=Math.floor(t.getX()+m*(p-t.getX())),E=Math.floor(t.getY()+m*(v-t.getY())),I=4;I<=16;I<<=1)try{h=this.findAlignmentInRegion(o,_,E,I);break}catch(V){if(!(V instanceof J))throw V}var S=r.createTransform(t,n,i,h,s),D=r.sampleGrid(this.image,S,s),O;return h===null?O=[i,t,n]:O=[i,t,n,h],new np(D,O)},r.createTransform=function(e,t,n,i,o){var s=o-3.5,l,c,h,p;return i!==null?(l=i.getX(),c=i.getY(),h=s-3,p=h):(l=t.getX()-e.getX()+n.getX(),c=t.getY()-e.getY()+n.getY(),h=s,p=s),Ix.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,h,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),l,c,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=ip.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var o=Ye.round(me.distance(e,t)/i),s=Ye.round(me.distance(e,n)/i),l=Math.floor((o+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new J("Dimensions could be not found.")}return l},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,l=e-(n-e);l<0?(s=e/(e-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,l,c),o-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var o=Math.abs(i-t)>Math.abs(n-e);if(o){var s=e;e=t,t=s,s=n,n=i,i=s}for(var l=Math.abs(n-e),c=Math.abs(i-t),h=-l/2,p=e<n?1:-1,v=t<i?1:-1,m=0,_=n+p,E=e,I=t;E!==_;E+=p){var S=o?I:E,D=o?E:I;if(m===1===this.image.get(S,D)){if(m===2)return Ye.distance(E,I,e,t);m++}if(h+=c,h>0){if(I===i)break;I+=v,h-=l}}return m===2?Ye.distance(n+p,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var o=Math.floor(i*e),s=Math.max(0,t-o),l=Math.min(this.image.getWidth()-1,t+o);if(l-s<e*3)throw new J("Alignment top exceeds estimated module size.");var c=Math.max(0,n-o),h=Math.min(this.image.getHeight()-1,n+o);if(h-c<e*3)throw new J("Alignment bottom exceeds estimated module size.");var p=new yR(this.image,s,c,l-s,h-c,e,this.resultPointCallback);return p.find()},r})(),t1=(function(){function r(){this.decoder=new pR}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(xt.PURE_BARCODE)!==void 0){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,t),i=r.NO_POINTS}else{var s=new AR(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}n.getOther()instanceof Px&&n.getOther().applyMirroredCorrection(i);var l=new Cr(n.getText(),n.getRawBytes(),void 0,i,Ee.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(hr.BYTE_SEGMENTS,c);var h=n.getECLevel();return h!==null&&l.putMetadata(hr.ERROR_CORRECTION_LEVEL,h),n.hasStructuredAppend()&&(l.putMetadata(hr.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(hr.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new J;var i=this.moduleSize(t,e),o=t[1],s=n[1],l=t[0],c=n[0];if(l>=c||o>=s)throw new J;if(s-o!==c-l&&(c=l+(s-o),c>=e.getWidth()))throw new J;var h=Math.round((c-l+1)/i),p=Math.round((s-o+1)/i);if(h<=0||p<=0)throw new J;if(p!==h)throw new J;var v=Math.floor(i/2);o+=v,l+=v;var m=l+Math.floor((h-1)*i)-c;if(m>0){if(m>v)throw new J;l-=m}var _=o+Math.floor((p-1)*i)-s;if(_>0){if(_>v)throw new J;o-=_}for(var E=new ii(h,p),I=0;I<p;I++)for(var S=o+Math.floor(I*i),D=0;D<h;D++)e.get(l+Math.floor(D*i),S)&&E.set(D,I);return E},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],l=!0,c=0;o<i&&s<n;){if(l!==t.get(o,s)){if(++c===5)break;l=!l}o++,s++}if(o===i||s===n)throw new J;return(o-e[0])/7},r.NO_POINTS=new Array,r})(),IR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xe=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return Ye.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=IR(e),l=s.next();!l.done;l=s.next()){var c=l.value;i[o++]=c}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=$t.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),CR=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),SR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TR=(function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),o=r.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=r.detect(n,i)),new CR(i,o)},r.detect=function(e,t){for(var n,i,o=new Array,s=0,l=0,c=!1;s<t.getHeight();){var h=r.findVertices(t,s,l);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,l=0;try{for(var p=(n=void 0,SR(o)),v=p.next();!v.done;v=p.next()){var m=v.value;m[1]!=null&&(s=Math.trunc(Math.max(s,m[1].getY()))),m[3]!=null&&(s=Math.max(s,Math.trunc(m[3].getY())))}}catch(_){n={error:_}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}s+=r.ROW_STEP;continue}if(c=!0,o.push(h),!e)break;h[2]!=null?(l=Math.trunc(h[2].getX()),s=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY()))}return o},r.findVertices=function(e,t,n){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return r.copyToResult(s,r.findRowsWithPattern(e,i,o,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),r.copyToResult(s,r.findRowsWithPattern(e,i,o,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),s},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,o,s){for(var l=new Array(4),c=!1,h=new Int32Array(s.length);i<t;i+=r.ROW_STEP){var p=r.findGuardPattern(e,o,i,n,!1,s,h);if(p!=null){for(;i>0;){var v=r.findGuardPattern(e,o,--i,n,!1,s,h);if(v!=null)p=v;else{i++;break}}l[0]=new me(p[0],i),l[1]=new me(p[1],i),c=!0;break}}var m=i+1;if(c){for(var _=0,v=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);m<t;m++){var p=r.findGuardPattern(e,v[0],m,n,!1,s,h);if(p!=null&&Math.abs(v[0]-p[0])<r.MAX_PATTERN_DRIFT&&Math.abs(v[1]-p[1])<r.MAX_PATTERN_DRIFT)v=p,_=0;else{if(_>r.SKIPPED_ROW_COUNT_MAX)break;_++}}m-=_+1,l[2]=new me(v[0],m),l[3]=new me(v[1],m)}return m-i<r.BARCODE_MIN_HEIGHT&&$t.fill(l,null),l},r.findGuardPattern=function(e,t,n,i,o,s,l){$t.fillWithin(l,0,l.length,0);for(var c=t,h=0;e.get(c,n)&&c>0&&h++<r.MAX_PIXEL_DRIFT;)c--;for(var p=c,v=0,m=s.length,_=o;p<i;p++){var E=e.get(p,n);if(E!==_)l[v]++;else{if(v===m-1){if(r.patternMatchVariance(l,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([c,p]);c+=l[0]+l[1],pt.arraycopy(l,2,l,0,v-1),l[v-1]=0,l[v]=0,v--}else v++;l[v]=1,_=!_}}return v===m-1&&r.patternMatchVariance(l,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([c,p-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,s=0,l=0;l<i;l++)o+=e[l],s+=t[l];if(o<s)return 1/0;var c=o/s;n*=c;for(var h=0,p=0;p<i;p++){var v=e[p],m=t[p]*c,_=v>m?v-m:m-v;if(_>n)return 1/0;h+=_}return h/o},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),RR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},va=(function(){function r(e,t){if(t.length===0)throw new Ce;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),pt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=RR(this.coefficients),s=o.next();!s.done;s=o.next()){var l=s.value;i=this.field.add(i,l)}}catch(v){t={error:v}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)c=this.field.add(this.field.multiply(e,c),this.coefficients[p]);return c},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),s=n.length-t.length;pt.arraycopy(n,0,o,0,s);for(var l=s;l<n.length;l++)o[l]=this.field.add(t[l-s],n[l]);return new r(this.field,o)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,s=new Int32Array(n+o-1),l=0;l<n;l++)for(var c=t[l],h=0;h<o;h++)s[l+h]=this.field.add(s[l+h],this.field.multiply(c,i[h]));return new r(this.field,s)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Me,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),NR=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new Ax;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),PR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),OR=(function(r){PR(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*n%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new va(i,new Int32Array([0])),i.one=new va(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new Ce;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new va(this,i)},e.PDF417_GF=new e(Xe.NUMBER_OF_CODEWORDS,3),e})(NR),bR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DR=(function(){function r(){this.field=OR.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,o,s=new va(this.field,e),l=new Int32Array(t),c=!1,h=t;h>0;h--){var p=s.evaluateAt(this.field.exp(h));l[t-h]=p,p!==0&&(c=!0)}if(!c)return 0;var v=this.field.getOne();if(n!=null)try{for(var m=bR(n),_=m.next();!_.done;_=m.next()){var E=_.value,I=this.field.exp(e.length-1-E),S=new va(this.field,new Int32Array([this.field.subtract(0,I),1]));v=v.multiply(S)}}catch(N){i={error:N}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}for(var D=new va(this.field,l),O=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),D,t),V=O[0],z=O[1],G=this.findErrorLocations(V),B=this.findErrorMagnitudes(z,V,G),h=0;h<G.length;h++){var R=e.length-1-this.field.log(G[h]);if(R<0)throw rr.getChecksumInstance();e[R]=this.field.subtract(e[R],B[h])}return G.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,l=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(n/2);){var h=o,p=l;if(o=s,l=c,o.isZero())throw rr.getChecksumInstance();s=h;for(var v=this.field.getZero(),m=o.getCoefficient(o.getDegree()),_=this.field.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var E=s.getDegree()-o.getDegree(),I=this.field.multiply(s.getCoefficient(s.getDegree()),_);v=v.add(this.field.buildMonomial(E,I)),s=s.subtract(o.multiplyByMonomial(E,I))}c=v.multiply(l).subtract(p).negative()}var S=c.getCoefficient(0);if(S===0)throw rr.getChecksumInstance();var D=this.field.inverse(S),O=c.multiply(D),V=s.multiply(D);return[O,V]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==t)throw rr.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var l=new va(this.field,o),c=n.length,h=new Int32Array(c),s=0;s<c;s++){var p=this.field.inverse(n[s]),v=this.field.subtract(0,e.evaluateAt(p)),m=this.field.inverse(l.evaluateAt(p));h[s]=this.field.multiply(v,m)}return h},r})(),r1=(function(){function r(e,t,n,i,o){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,o)}return r.prototype.constructor_1=function(e,t,n,i,o){var s=t==null||n==null,l=i==null||o==null;if(s&&l)throw new J;s?(t=new me(0,i.getY()),n=new me(0,o.getY())):l&&(i=new me(e.getWidth()-1,t.getY()),o=new me(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,h=Math.trunc(c.getY()-e);h<0&&(h=0);var p=new me(c.getX(),h);n?i=p:s=p}if(t>0){var v=n?this.bottomLeft:this.bottomRight,m=Math.trunc(v.getY()+t);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var _=new me(v.getX(),m);n?o=_:l=_}return new r(this.image,i,o,s,l)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),kR=(function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),ap=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(s,l,c,h,p,v){if(s==="%%")return"%";if(t[++n]!==void 0){s=h?parseInt(h.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,_;switch(v){case"s":_=t[n];break;case"c":_=t[n][0];break;case"f":_=parseFloat(t[n]).toFixed(s);break;case"p":_=parseFloat(t[n]).toPrecision(s);break;case"e":_=parseFloat(t[n]).toExponential(s);break;case"x":_=parseInt(t[n]).toString(m||16);break;case"d":_=parseFloat(parseInt(t[n],m||10).toPrecision(s)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(m);for(var E=parseInt(c),I=c&&c[0]+""=="0"?"0":" ";_.length<E;)_=l!==void 0?_+I:I+_;return _}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),MR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ox=(function(){function r(e){this.boundingBox=new r1(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new ap,i=0;try{for(var o=MR(this.codewords),s=o.next();!s.done;s=o.next()){var l=s.value;if(l==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),LR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o},rl=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,o=function(v,m){var _={getKey:function(){return v},getValue:function(){return m}};_.getValue()>n?(n=_.getValue(),i=[],i.push(_.getKey())):_.getValue()===n&&i.push(_.getKey())};try{for(var s=LR(this.values.entries()),l=s.next();!l.done;l=s.next()){var c=FR(l.value,2),h=c[0],p=c[1];o(h,p)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Xe.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),VR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),d0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ay=(function(r){VR(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=d0(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=-1,p=1,v=0,m=l;m<c;m++)if(n[m]!=null){var _=n[m],E=_.getRowNumber()-h;if(E===0)v++;else if(E===1)p=Math.max(p,v),v=1,h=_.getRowNumber();else if(E<0||_.getRowNumber()>=t.getRowCount()||E>m)n[m]=null;else{var I=void 0;p>2?I=(p-2)*E:I=E;for(var S=I>=m,D=1;D<=I&&!S;D++)S=n[m-D]!=null;S?n[m]=null:(h=_.getRowNumber(),v=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=d0(this.getCodewords()),l=s.next();!l.done;l=s.next()){var c=l.value;if(c!=null){var h=c.getRowNumber();if(h>=o.length)continue;o[h]++}}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),h=-1,p=s;p<l;p++)if(c[p]!=null){var v=c[p];v.setRowNumberAsRowIndicatorColumn();var m=v.getRowNumber()-h;m===0||(m===1?h=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?c[p]=null:h=v.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),o=new rl,s=new rl,l=new rl,c=new rl;try{for(var h=d0(i),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null){v.setRowNumberAsRowIndicatorColumn();var m=v.getValue()%30,_=v.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:s.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:o.setValue(m+1);break}}}}catch(I){t={error:I}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<Xe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>Xe.MAX_ROWS_IN_BARCODE)return null;var E=new kR(o.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,l=o.getRowNumber();if(l>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(Ox),BR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UR=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Xe.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(o=r.adjustRowNumberIfValid(i,o,l),l.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(o=r.adjustRowNumberIfValid(i,o,l),l.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=n[t],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=l[t],h[3]=c[t],t>0&&(h[0]=n[t-1],h[4]=l[t-1],h[5]=c[t-1]),t>1&&(h[8]=n[t-2],h[10]=l[t-2],h[11]=c[t-2]),t<n.length-1&&(h[1]=n[t+1],h[6]=l[t+1],h[7]=c[t+1]),t<n.length-2&&(h[9]=n[t+2],h[12]=l[t+2],h[13]=c[t+2]);try{for(var p=BR(h),v=p.next();!v.done;v=p.next()){var m=v.value;if(r.adjustRowNumber(s,m))return}}catch(_){i={error:_}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new ap,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},r})(),jR=(function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),zR=(function(){function r(){}return r.initialize=function(){for(var e=0;e<Xe.SYMBOL_TABLE.length;e++)for(var t=Xe.SYMBOL_TABLE[e],n=t&1,i=0;i<Xe.BARS_IN_MODULE;i++){for(var o=0;(t&1)===n;)o+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Xe.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Xe.BARS_IN_MODULE-i-1]=Math.fround(o/Xe.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=Ye.sum(e),n=new Int32Array(Xe.BARS_IN_MODULE),i=0,o=0,s=0;s<Xe.MODULES_IN_CODEWORD;s++){var l=t/(2*Xe.MODULES_IN_CODEWORD)+s*t/Xe.MODULES_IN_CODEWORD;o+e[i]<=l&&(o+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Xe.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=Ye.sum(e),n=new Array(Xe.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var o=Y0.MAX_VALUE,s=-1;this.bSymbolTableReady||r.initialize();for(var l=0;l<r.RATIOS_TABLE.length;l++){for(var c=0,h=r.RATIOS_TABLE[l],p=0;p<Xe.BARS_IN_MODULE;p++){var v=Math.fround(h[p]-n[p]);if(c+=Math.fround(v*v),c>=o)break}c<o&&(o=c,s=Xe.SYMBOL_TABLE[l])}return s},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Xe.SYMBOL_TABLE.length).map(function(e){return new Array(Xe.BARS_IN_MODULE)}),r})(),HR=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),Iy=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),GR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),WR=(function(r){GR(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})(zr),$R=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new WR;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new tp;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),qR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),XR=(function(r){qR(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(zr),KR=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),YR=(function(r){KR(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new Ce("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new XR;i=Fe.MAX_VALUE}this.buf=$t.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new tp;this.ensureCapacity(this.count+i),pt.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return $t.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})($R),st;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(st||(st={}));function bx(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var lf;function po(r){if(typeof lf>"u"&&(lf=bx()),lf===null)throw new Error("BigInt is not supported!");return lf(r)}function QR(){var r=[];r[0]=po(1);var e=po(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var ZR=(function(){function r(){}return r.decode=function(e,t){var n=new Me(""),i=Wt.ISO8859_1;n.enableDecoding(i);for(var o=1,s=e[o++],l=new HR;o<e[0];){switch(s){case r.TEXT_COMPACTION_MODE_LATCH:o=r.textCompaction(e,o,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:o=r.byteCompaction(s,e,i,o,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:o=r.numericCompaction(e,o,n);break;case r.ECI_CHARSET:Wt.getCharacterSetECIByValue(e[o++]);break;case r.ECI_GENERAL_PURPOSE:o+=2;break;case r.ECI_USER_DEFINED:o++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=r.decodeMacroBlock(e,o,l);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new ue;default:o--,o=r.textCompaction(e,o,n);break}if(o<e.length)s=e[o++];else throw ue.getFormatInstance()}if(n.length()===0)throw ue.getFormatInstance();var c=new wh(null,n.toString(),null,t);return c.setOther(l),c},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ue.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<r.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];n.setSegmentIndex(Fe.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Me;t=r.textCompaction(e,t,s),n.setFileId(s.toString());var l=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Me;t=r.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new Me;t=r.textCompaction(e,t+1,h),n.setSender(h.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Me;t=r.textCompaction(e,t+1,p),n.setAddressee(p.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var v=new Me;t=r.numericCompaction(e,t+1,v),n.setSegmentCount(Fe.parseInt(v.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new Me;t=r.numericCompaction(e,t+1,m),n.setTimestamp(Iy.parseLong(m.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new Me;t=r.numericCompaction(e,t+1,_),n.setChecksum(Fe.parseInt(_.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Me;t=r.numericCompaction(e,t+1,E),n.setFileSize(Iy.parseLong(E.toString()));break;default:throw ue.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw ue.getFormatInstance()}if(l!==-1){var I=t-l;n.isLastSegment()&&I--,n.setOptionalData($t.copyOfRange(e,l,l+I))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,l=!1;t<e[0]&&!l;){var c=e[t++];if(c<r.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case r.TEXT_COMPACTION_MODE_LATCH:i[s++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return r.decodeTextCompaction(i,o,s,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var o=st.ALPHA,s=st.ALPHA,l=0;l<n;){var c=e[l],h="";switch(o){case st.ALPHA:if(c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case r.LL:o=st.LOWER;break;case r.ML:o=st.MIXED;break;case r.PS:s=o,o=st.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.LOWER:if(c<26)h=String.fromCharCode(97+c);else switch(c){case 26:h=" ";break;case r.AS:s=o,o=st.ALPHA_SHIFT;break;case r.ML:o=st.MIXED;break;case r.PS:s=o,o=st.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.MIXED:if(c<r.PL)h=r.MIXED_CHARS[c];else switch(c){case r.PL:o=st.PUNCT;break;case 26:h=" ";break;case r.LL:o=st.LOWER;break;case r.AL:o=st.ALPHA;break;case r.PS:s=o,o=st.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.PUNCT:if(c<r.PAL)h=r.PUNCT_CHARS[c];else switch(c){case r.PAL:o=st.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.ALPHA_SHIFT:if(o=s,c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.PUNCT_SHIFT:if(o=s,c<r.PAL)h=r.PUNCT_CHARS[c];else switch(c){case r.PAL:o=st.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break}h!==""&&i.append(h),l++}},r.byteCompaction=function(e,t,n,i,o){var s=new YR,l=0,c=0,h=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),v=t[i++];i<t[0]&&!h;)switch(p[l++]=v,c=900*c+v,v=t[i++],v){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number(po(c)>>po(8*(5-m))));c=0,l=0}break}i===t[0]&&v<r.TEXT_COMPACTION_MODE_LATCH&&(p[l++]=v);for(var _=0;_<l;_++)s.write(p[_]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var E=t[i++];if(E<r.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+E;else switch(E){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number(po(c)>>po(8*(5-m))));c=0,l=0}}break}return o.append(dn.decode(s.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,o=!1,s=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var l=e[t++];if(t===e[0]&&(o=!0),l<r.TEXT_COMPACTION_MODE_LATCH)s[i]=l,i++;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||l===r.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(r.decodeBase900toBase10(s,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=po(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*po(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new ue;return o.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=bx()?QR():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),qu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JR=(function(){function r(){}return r.decode=function(e,t,n,i,o,s,l){for(var c=new r1(e,t,n,i,o),h=null,p=null,v,m=!0;;m=!1){if(t!=null&&(h=r.getRowIndicatorColumn(e,c,t,!0,s,l)),i!=null&&(p=r.getRowIndicatorColumn(e,c,i,!1,s,l)),v=r.merge(h,p),v==null)throw J.getNotFoundInstance();var _=v.getBoundingBox();if(m&&_!=null&&(_.getMinY()<c.getMinY()||_.getMaxY()>c.getMaxY()))c=_;else break}v.setBoundingBox(c);var E=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,h),v.setDetectionResultColumn(E,p);for(var I=h!=null,S=1;S<=E;S++){var D=I?S:E-S;if(v.getDetectionResultColumn(D)===void 0){var O=void 0;D===0||D===E?O=new Ay(c,D===0):O=new Ox(c),v.setDetectionResultColumn(D,O);for(var V=-1,z=V,G=c.getMinY();G<=c.getMaxY();G++){if(V=r.getStartColumn(v,D,G,I),V<0||V>c.getMaxX()){if(z===-1)continue;V=z}var B=r.detectCodeword(e,c.getMinX(),c.getMaxX(),I,V,G,s,l);B!=null&&(O.setCodeword(G,B),z=V,s=Math.min(s,B.getWidth()),l=Math.max(l,B.getWidth()))}}}return r.createDecoderResult(v)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=r1.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new UR(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=r.getMax(i),s=0;try{for(var l=qu(i),c=l.next();!c.done;c=l.next()){var h=c.value;if(s+=o-h,h>0)break}}catch(_){t={error:_}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),v=0;s>0&&p[v]==null;v++)s--;for(var m=0,v=i.length-1;v>=0&&(m+=o-i[v],!(i[v]>0));v--);for(var v=p.length-1;m>0&&p[v]==null;v--)m--;return e.getBoundingBox().addMissingRows(s,m,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var o=qu(e),s=o.next();!s.done;s=o.next()){var l=s.value;i=Math.max(i,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,o,s){for(var l=new Ay(t,i),c=0;c<2;c++)for(var h=c===0?1:-1,p=Math.trunc(Math.trunc(n.getX())),v=Math.trunc(Math.trunc(n.getY()));v<=t.getMaxY()&&v>=t.getMinY();v+=h){var m=r.detectCodeword(e,0,e.getWidth(),i,p,v,o,s);m!=null&&(l.setCodeword(v,m),i?p=m.getStartX():p=m.getEndX())}return l},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Xe.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var h=t[l][c+1].getValue(),p=l*e.getBarcodeColumnCount()+c;h.length===0?n.push(p):h.length===1?i[p]=h[0]:(s.push(p),o.push(h))}for(var v=new Array(o.length),m=0;m<v.length;m++)v[m]=o[m];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Xe.toIntArray(n),Xe.toIntArray(s),v)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,o){for(var s=new Int32Array(i.length),l=100;l-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return r.decodeCodewords(t,e,n)}catch(p){var h=p instanceof rr;if(!h)throw p}if(s.length===0)throw rr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw rr.getChecksumInstance()}throw rr.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<s.length;l++)for(var c=0;c<s[l].length;c++)s[l][c]=new rl;var h=0;try{for(var p=qu(e.getDetectionResultColumns()),v=p.next();!v.done;v=p.next()){var m=v.value;if(m!=null)try{for(var _=(i=void 0,qu(m.getCodewords())),E=_.next();!E.done;E=_.next()){var I=E.value;if(I!=null){var S=I.getRowNumber();if(S>=0){if(S>=s.length)continue;s[S][h].setValue(I.getValue())}}}}catch(D){i={error:D}}finally{try{E&&!E.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}h++}}catch(D){t={error:D}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return s},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var o,s,l=i?1:-1,c=null;if(r.isValidBarcodeColumn(e,t-l)&&(c=e.getDetectionResultColumn(t-l).getCodeword(n)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(n),c!=null)return i?c.getStartX():c.getEndX();if(r.isValidBarcodeColumn(e,t-l)&&(c=e.getDetectionResultColumn(t-l).getCodewordNearby(n)),c!=null)return i?c.getEndX():c.getStartX();for(var h=0;r.isValidBarcodeColumn(e,t-l);){t-=l;try{for(var p=(o=void 0,qu(e.getDetectionResultColumn(t).getCodewords())),v=p.next();!v.done;v=p.next()){var m=v.value;if(m!=null)return(i?m.getEndX():m.getStartX())+l*h*(m.getEndX()-m.getStartX())}}catch(_){o={error:_}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,o,s,l,c){o=r.adjustCodewordStartColumn(e,t,n,i,o,s);var h=r.getModuleBitCount(e,t,n,i,o,s);if(h==null)return null;var p,v=Ye.sum(h);if(i)p=o+v;else{for(var m=0;m<h.length/2;m++){var _=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=_}p=o,o=p-v}if(!r.checkCodewordSkew(v,l,c))return null;var E=zR.getDecodedValue(h),I=Xe.getCodeword(E);return I===-1?null:new jR(o,p,r.getCodewordBucketNumber(E),I)},r.getModuleBitCount=function(e,t,n,i,o,s){for(var l=o,c=new Int32Array(8),h=0,p=i?1:-1,v=i;(i?l<n:l>=t)&&h<c.length;)e.get(l,s)===v?(c[h]++,l+=p):(h++,v=!v);return h===c.length||l===(i?n:t)&&h===c.length-1?c:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,o,s){for(var l=o,c=i?-1:1,h=0;h<2;h++){for(;(i?l>=t:l<n)&&i===e.get(l,s);){if(Math.abs(o-l)>r.CODEWORD_SKEW_SIZE)return o;l+=c}c=-c,i=!i}return l},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw ue.getFormatInstance();var i=1<<t+1,o=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var s=ZR.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(n.length),s},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw rr.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw ue.getFormatInstance();var n=e[0];if(n>e.length)throw ue.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw ue.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new ap,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new DR,r})(),eN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n1=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw J.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof ue||n instanceof rr?J.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,o,s=new Array,l=TR.detectMultiple(e,t,n);try{for(var c=eN(l.getPoints()),h=c.next();!h.done;h=c.next()){var p=h.value,v=JR.decode(l.getBits(),p[4],p[5],p[6],p[7],r.getMinCodewordWidth(p),r.getMaxCodewordWidth(p)),m=new Cr(v.getText(),v.getRawBytes(),void 0,p,Ee.PDF_417);m.putMetadata(hr.ERROR_CORRECTION_LEVEL,v.getECLevel());var _=v.getOther();_!=null&&m.putMetadata(hr.PDF417_EXTRA_METADATA,_),s.push(m)}}catch(E){i={error:E}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(E){return E})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Fe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),tN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Cy=(function(r){tN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})(zr),Sy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rN=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(xt.TRY_HARDER)!==void 0,n=e==null?null:e.get(xt.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(s){return s===Ee.UPC_A||s===Ee.UPC_E||s===Ee.EAN_13||s===Ee.EAN_8||s===Ee.CODABAR||s===Ee.CODE_39||s===Ee.CODE_93||s===Ee.CODE_128||s===Ee.ITF||s===Ee.RSS_14||s===Ee.RSS_EXPANDED});o&&!t&&i.push(new tl(e)),n.includes(Ee.QR_CODE)&&i.push(new t1),n.includes(Ee.DATA_MATRIX)&&i.push(new e1),n.includes(Ee.AZTEC)&&i.push(new Z0),n.includes(Ee.PDF_417)&&i.push(new n1),o&&t&&i.push(new tl(e))}i.length===0&&(t||i.push(new tl(e)),i.push(new t1),i.push(new e1),i.push(new Z0),i.push(new n1),t&&i.push(new tl(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=Sy(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new Cy("No readers where selected, nothing can be read.");try{for(var i=Sy(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(l){if(l instanceof Cy)continue}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new J("No MultiFormat Readers were able to detect the code.")},r})(),nN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),iN=(function(r){nN(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,o=new rN;return o.setHints(t),i=r.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Ys),oN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){oN(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new n1,t)||this}return e})(Ys);var aN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){aN(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new t1,t)||this}return e})(Ys);var i1;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(i1||(i1={}));const cf=i1;var Dx=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new To(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=n.multiply(new To(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),n=s}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new Ce("No error correction bytes");var n=e.length-t;if(n<=0)throw new Ce("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(n);pt.arraycopy(e,0,o,0,n);var s=new To(this.field,o);s=s.multiplyByMonomial(t,1);for(var l=s.divide(i)[1],c=l.getCoefficients(),h=t-c.length,p=0;p<h;p++)e[n+p]=0;pt.arraycopy(c,0,e,n+h,c.length)},r})(),nl=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var l=n[s],c=0;c<i-1;c++){var h=l[c];h===l[c+1]&&h===n[s+1][c]&&h===n[s+1][c+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var l=0;l<i;l++){var c=n[s];l+6<i&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(r.isWhiteHorizontal(c,l-4,l)||r.isWhiteHorizontal(c,l+7,l+11))&&t++,s+6<o&&n[s][l]===1&&n[s+1][l]===0&&n[s+2][l]===1&&n[s+3][l]===1&&n[s+4][l]===1&&n[s+5][l]===0&&n[s+6][l]===1&&(r.isWhiteVertical(n,l,s-4,s)||r.isWhiteVertical(n,l,s+7,s+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var l=n[s],c=0;c<i;c++)l[c]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*r.N4},r.getDataMaskBit=function(e,t,n){var i,o;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:o=n*t,i=(o&1)+o%3;break;case 6:o=n*t,i=(o&1)+o%3&1;break;case 7:o=n*t,i=o%3+(n+t&1)&1;break;default:throw new Ce("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),l=0;l<i;l++){for(var c=0,h=-1,p=0;p<o;p++){var v=t?s[l][p]:s[p][l];v===h?c++:(c>=5&&(n+=r.N1+(c-5)),c=1,h=v)}c>=5&&(n+=r.N1+(c-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),sN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uN=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=sN(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;$t.fill(s,e)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],s=t.bytes[n],l=0,c=this.width;l<c;++l)if(o[l]!==s[l])return!1;return!0},r.prototype.toString=function(){for(var e=new Me,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),o1=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Me;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),lN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),yt=(function(r){lN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})(zr),Ty=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,o){r.clearMatrix(o),r.embedBasicPatterns(n,o),r.embedTypeInfo(t,i,o),r.maybeEmbedVersionInfo(n,o),r.embedDataBits(e,i,o)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new nr;r.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var l=i.get(i.getSize()-1-o),c=r.TYPE_INFO_COORDINATES[o],h=c[0],p=c[1];if(n.setBoolean(h,p,l),o<8){var v=n.getWidth()-o-1,m=8;n.setBoolean(v,m,l)}else{var v=8,m=n.getHeight()-7+(o-8);n.setBoolean(v,m,l)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new nr;r.makeVersionInfoBits(e,n);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var l=n.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,l),t.setBoolean(t.getHeight()-11+s,o,l)}}},r.embedDataBits=function(e,t,n){for(var i=0,o=-1,s=n.getWidth()-1,l=n.getHeight()-1;s>0;){for(s===6&&(s-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var h=s-c;if(r.isEmpty(n.get(h,l))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&nl.getDataMaskBit(t,h,l)&&(p=!p),n.setBoolean(h,l,p)}}l+=o}o=-o,l+=o,s-=2}if(i!==e.getSize())throw new yt("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Fe.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new Ce("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!o1.isValidMaskPattern(t))throw new yt("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var o=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(o,10);var s=new nr;if(s.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new yt("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new yt("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new yt;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new yt;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new yt;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var o=r.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)n.setNumber(e+s,t+i,o[s])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var o=r.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)n.setNumber(e+s,t+i,o[s])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,s=i.length;o!==s;o++){var l=i[o];if(l>=0)for(var c=0;c!==s;c++){var h=i[c];h>=0&&r.isEmpty(t.get(h,l))&&r.embedPositionAdjustmentPattern(h-2,l-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),cN=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),Ry=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return nl.applyMaskPenaltyRule1(e)+nl.applyMaskPenaltyRule2(e)+nl.applyMaskPenaltyRule3(e)+nl.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(cf.CHARACTER_SET)!==void 0;o&&(i=n.get(cf.CHARACTER_SET).toString());var s=this.chooseMode(e,i),l=new nr;if(s===_t.BYTE&&(o||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Wt.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(s,l);var h=new nr;this.appendBytes(e,s,h,i);var p;if(n!==null&&n.get(cf.QR_VERSION)!==void 0){var v=Number.parseInt(n.get(cf.QR_VERSION).toString(),10);p=ma.getVersionForNumber(v);var m=this.calculateBitsNeeded(s,l,h,p);if(!this.willFit(m,p,t))throw new yt("Data too big for requested version")}else p=this.recommendVersion(t,s,l,h);var _=new nr;_.appendBitArray(l);var E=s===_t.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(E,p,s,_),_.appendBitArray(h);var I=p.getECBlocksForLevel(t),S=p.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(S,_);var D=this.interleaveWithECBytes(_,p.getTotalCodewords(),S,I.getNumBlocks()),O=new o1;O.setECLevel(t),O.setMode(s),O.setVersion(p);var V=p.getDimensionForVersion(),z=new uN(V,V),G=this.chooseMaskPattern(D,t,p,z);return O.setMaskPattern(G),Ty.buildMatrix(D,t,p,G,z),O.setMatrix(z),O},r.recommendVersion=function(e,t,n,i){var o=this.calculateBitsNeeded(t,n,i,ma.getVersionForNumber(1)),s=this.chooseVersion(o,e),l=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(l,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Wt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return _t.KANJI;for(var n=!1,i=!1,o=0,s=e.length;o<s;++o){var l=e.charAt(o);if(r.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return _t.BYTE}return i?_t.ALPHANUMERIC:n?_t.NUMERIC:_t.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=dn.encode(e,Wt.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,l=0;l<o1.NUM_MASK_PATTERNS;l++){Ty.buildMatrix(e,t,n,l,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=l)}return s},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=ma.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new yt("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(n),s=o.getTotalECCodewords(),l=i-s,c=(e+7)/8;return l>=c},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new yt("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new yt("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,o,s){if(i>=n)throw new yt("Block ID too large");var l=e%n,c=n-l,h=Math.floor(e/n),p=h+1,v=Math.floor(t/n),m=v+1,_=h-v,E=p-m;if(_!==E)throw new yt("EC bytes mismatch");if(n!==c+l)throw new yt("RS blocks mismatch");if(e!==(v+_)*c+(m+E)*l)throw new yt("Total bytes mismatch");i<c?(o[0]=v,s[0]=_):(o[0]=m,s[0]=E)},r.interleaveWithECBytes=function(e,t,n,i){var o,s,l,c;if(e.getSizeInBytes()!==n)throw new yt("Number of bits and data bytes does not match");for(var h=0,p=0,v=0,m=new Array,_=0;_<i;++_){var E=new Int32Array(1),I=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,_,E,I);var S=E[0],D=new Uint8Array(S);e.toBytes(8*h,D,0,S);var O=r.generateECBytes(D,I[0]);m.push(new cN(D,O)),p=Math.max(p,S),v=Math.max(v,O.length),h+=E[0]}if(n!==h)throw new yt("Data bytes does not match offset");for(var V=new nr,_=0;_<p;++_)try{for(var z=(o=void 0,Ry(m)),G=z.next();!G.done;G=z.next()){var B=G.value,D=B.getDataBytes();_<D.length&&V.appendBits(D[_],8)}}catch(F){o={error:F}}finally{try{G&&!G.done&&(s=z.return)&&s.call(z)}finally{if(o)throw o.error}}for(var _=0;_<v;++_)try{for(var R=(l=void 0,Ry(m)),N=R.next();!N.done;N=R.next()){var B=N.value,O=B.getErrorCorrectionBytes();_<O.length&&V.appendBits(O[_],8)}}catch(F){l={error:F}}finally{try{N&&!N.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}if(t!==V.getSizeInBytes())throw new yt("Interleaving error: "+t+" and "+V.getSizeInBytes()+" differ.");return V},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),o=0;o<n;o++)i[o]=e[o]&255;new Dx(jr.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[n+o];return s},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new yt(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},r.appendBytes=function(e,t,n,i){switch(t){case _t.NUMERIC:r.appendNumericBytes(e,n);break;case _t.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case _t.BYTE:r.append8BitBytes(e,n,i);break;case _t.KANJI:r.appendKanjiBytes(e,n);break;default:throw new yt("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getDigit(e.charAt(i));if(i+2<n){var s=r.getDigit(e.charAt(i+1)),l=r.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+l,10),i+=3}else if(i+1<n){var s=r.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new yt;if(i+1<n){var s=r.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new yt;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=dn.encode(e,n)}catch(c){throw new yt(c)}for(var o=0,s=i.length;o!==s;o++){var l=i[o];t.appendBits(l,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=dn.encode(e,Wt.SJIS)}catch(v){throw new yt(v)}for(var i=n.length,o=0;o<i;o+=2){var s=n[o]&255,l=n[o+1]&255,c=s<<8&4294967295|l,h=-1;if(c>=33088&&c<=40956?h=c-33088:c>=57408&&c<=60351&&(h=c-49472),h===-1)throw new yt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},r.appendECI=function(e,t){t.appendBits(_t.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Wt.UTF8.getName(),r})();var fN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){fN(e,r);function e(t,n,i,o,s,l,c,h){var p=r.call(this,l,c)||this;if(p.yuvData=t,p.dataWidth=n,p.dataHeight=i,p.left=o,p.top=s,o+l>n||s+c>i)throw new Ce("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(l,c),p}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return pt.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return pt.arraycopy(this.yuvData,s,o,0,i),o;for(var l=0;l<n;l++){var c=l*t;pt.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),o=this.yuvData,s=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*t,h=0;h<t;h++){var p=o[s+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+h]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<n;o++,s+=this.dataWidth)for(var l=s+t/2,c=s,h=s+t-1;c<l;c++,h--){var p=i[c];i[c]=i[h],i[h]=p}},e.prototype.invert=function(){return new rp(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(xh);var hN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){hN(e,r);function e(t,n,i,o,s,l,c){var h=r.call(this,n,i)||this;if(h.dataWidth=o,h.dataHeight=s,h.left=l,h.top=c,t.BYTES_PER_ELEMENT===4){for(var p=n*i,v=new Uint8ClampedArray(p),m=0;m<p;m++){var _=t[m],E=_>>16&255,I=_>>7&510,S=_&255;v[m]=(E+I+S)/4&255}h.luminances=v}else h.luminances=t;if(o===void 0&&(h.dataWidth=n),s===void 0&&(h.dataHeight=i),l===void 0&&(h.left=0),c===void 0&&(h.top=0),h.left+n>h.dataWidth||h.top+i>h.dataHeight)throw new Ce("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return pt.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return pt.arraycopy(this.luminances,s,o,0,i),o;for(var l=0;l<n;l++){var c=l*t;pt.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new rp(this)},e})(xh);var dN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pN=(function(r){dN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Wt),gN=(function(){function r(){}return r.ISO_8859_1=Wt.ISO8859_1,r})(),a1,vN=301,mN=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=vN);return{LOG:r,ALOG:e}};a1=mN([],[]),a1.LOG;a1.ALOG;var Ny;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Ny||(Ny={}));var Py=129,kx=230,yN=231,_N=235,xN=236,wN=237,EN=238,AN=239,IN=240,p0=254,CN=254,Oy="[)>05",by="[)>06",Dy="",ot=0,lr=1,Or=2,Ht=3,er=4,xr=5,SN=(function(){function r(){}return r.prototype.getEncodingMode=function(){return ot},r.prototype.encode=function(e){var t=Tn.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=Tn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case xr:e.writeCodeword(yN),e.signalEncoderChange(xr);return;case lr:e.writeCodeword(kx),e.signalEncoderChange(lr);return;case Ht:e.writeCodeword(EN),e.signalEncoderChange(Ht);break;case Or:e.writeCodeword(AN),e.signalEncoderChange(Or);break;case er:e.writeCodeword(IN),e.signalEncoderChange(er);break;default:throw new Error("Illegal mode: "+i)}else Tn.isExtendedASCII(n)?(e.writeCodeword(_N),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(Tn.isDigit(e)&&Tn.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),TN=(function(){function r(){}return r.prototype.getEncodingMode=function(){return xr},r.prototype.encode=function(e){var t=new Me;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=Tn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ot);break}}var o=t.length()-1,s=1,l=e.getCodewordCount()+o+s;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,We.getCharAt(o));else if(o<=1555)t.setCharAt(0,We.getCharAt(Math.floor(o/250)+249)),t.insert(1,We.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var h=0,n=t.length();h<n;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r})(),sp=(function(){function r(){}return r.prototype.getEncodingMode=function(){return lr},r.prototype.encodeMaximal=function(e){for(var t=new Me,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var l=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var h=e.getSymbolInfo().getDataCapacity()-c,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(n>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(kx),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Me;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Me;for(t.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var h=t.length();if(h%3===0){var p=Tn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(ot);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var l=e.getCurrentChar();return i=this.encodeChar(l,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(p0)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(p0),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(p0)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ot)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,o=new Me;return o.append(n),o.append(i),o.toString()},r})(),RN=(function(){function r(){}return r.prototype.getEncodingMode=function(){return er},r.prototype.encode=function(e){for(var t=new Me;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=Tn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(ot);break}}}t.append(We.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,l=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),h=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}h?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(l)}finally{e.signalEncoderChange(ot)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(We.getCharAt(e-64)):Tn.illegalCharacter(We.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(i<<12)+(o<<6)+s,c=l>>16&255,h=l>>8&255,p=l&255,v=new Me;return v.append(c),t>=2&&v.append(h),t>=3&&v.append(p),v.toString()},r})(),NN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),PN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=(function(){function r(e,t,n,i,o,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=l,this.rsBlockError=c}return r.lookup=function(e,t,n,i,o){var s,l;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=PN(bN),h=c.next();!h.done;h=c.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(n!=null&&(p.getSymbolWidth()<n.getWidth()||p.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(v){s={error:v}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),ON=(function(r){NN(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(Je),bN=[new Je(!1,3,5,8,8,1),new Je(!1,5,7,10,10,1),new Je(!0,5,7,16,6,1),new Je(!1,8,10,12,12,1),new Je(!0,10,11,14,6,2),new Je(!1,12,12,14,14,1),new Je(!0,16,14,24,10,1),new Je(!1,18,14,16,16,1),new Je(!1,22,18,18,18,1),new Je(!0,22,18,16,10,2),new Je(!1,30,20,20,20,1),new Je(!0,32,24,16,14,2),new Je(!1,36,24,22,22,1),new Je(!1,44,28,24,24,1),new Je(!0,49,28,22,14,2),new Je(!1,62,36,14,14,4),new Je(!1,86,42,16,16,4),new Je(!1,114,48,18,18,4),new Je(!1,144,56,20,20,4),new Je(!1,174,68,22,22,4),new Je(!1,204,84,24,24,4,102,42),new Je(!1,280,112,14,14,16,140,56),new Je(!1,368,144,16,16,16,92,36),new Je(!1,456,192,18,18,16,114,48),new Je(!1,576,224,20,20,16,144,56),new Je(!1,696,272,22,22,16,174,68),new Je(!1,816,336,24,24,16,136,56),new Je(!1,1050,408,18,18,36,175,68),new Je(!1,1304,496,20,20,36,163,62),new ON],DN=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Me,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new Me,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Je.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),kN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),MN=(function(r){kN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ht},e.prototype.encode=function(t){for(var n=new Me;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(t,n);var s=Tn.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(ot);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):Tn.illegalCharacter(We.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=n.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(CN),t.getNewEncoding()<0&&t.signalEncoderChange(ot)},e})(sp),LN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),FN=(function(r){LN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Or},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e})(sp),Tn=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Py+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,o){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new sp,l=[new SN,s,new FN,new MN,new RN,new TN],c=new DN(e);c.setSymbolShape(t),c.setSizeConstraints(n,i),e.startsWith(Oy)&&e.endsWith(Dy)?(c.writeCodeword(xN),c.setSkipAtEnd(2),c.pos+=Oy.length):e.startsWith(by)&&e.endsWith(Dy)&&(c.writeCodeword(wN),c.setSkipAtEnd(2),c.pos+=by.length);var h=ot;for(o&&(s.encodeMaximal(c),h=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[h].encode(c),c.getNewEncoding()>=0&&(h=c.getNewEncoding(),c.resetEncoderSignal());var p=c.getCodewordCount();c.updateSymbolInfo();var v=c.getSymbolInfo().getDataCapacity();p<v&&h!==ot&&h!==xr&&h!==er&&c.writeCodeword("");var m=c.getCodewords();for(m.length()<v&&m.append(Py);m.length()<v;)m.append(this.randomize253State(m.length()+1));return c.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===Ht&&i===Ht){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return ot}else if(n===er&&i===er){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return ot}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===ot?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,s=new Uint8Array(6),l=[];;){if(t+o===e.length){$t.fill(s,0),$t.fill(l,0);var c=this.findMinimums(i,l,Fe.MAX_VALUE,s),h=this.getMinimumCount(s);if(l[ot]===c)return ot;if(h===1){if(s[xr]>0)return xr;if(s[er]>0)return er;if(s[Or]>0)return Or;if(s[Ht]>0)return Ht}return lr}var p=e.charCodeAt(t+o);if(o++,this.isDigit(p)?i[ot]+=.5:this.isExtendedASCII(p)?(i[ot]=Math.ceil(i[ot]),i[ot]+=2):(i[ot]=Math.ceil(i[ot]),i[ot]++),this.isNativeC40(p)?i[lr]+=2/3:this.isExtendedASCII(p)?i[lr]+=8/3:i[lr]+=4/3,this.isNativeText(p)?i[Or]+=2/3:this.isExtendedASCII(p)?i[Or]+=8/3:i[Or]+=4/3,this.isNativeX12(p)?i[Ht]+=2/3:this.isExtendedASCII(p)?i[Ht]+=13/3:i[Ht]+=10/3,this.isNativeEDIFACT(p)?i[er]+=3/4:this.isExtendedASCII(p)?i[er]+=17/4:i[er]+=13/4,this.isSpecialB256(p)?i[xr]+=4:i[xr]++,o>=4){if($t.fill(s,0),$t.fill(l,0),this.findMinimums(i,l,Fe.MAX_VALUE,s),l[ot]<this.min(l[xr],l[lr],l[Or],l[Ht],l[er]))return ot;if(l[xr]<l[ot]||l[xr]+1<this.min(l[lr],l[Or],l[Ht],l[er]))return xr;if(l[er]+1<this.min(l[xr],l[lr],l[Or],l[Ht],l[ot]))return er;if(l[Or]+1<this.min(l[xr],l[lr],l[er],l[Ht],l[ot]))return Or;if(l[Ht]+1<this.min(l[xr],l[lr],l[er],l[Or],l[ot]))return Ht;if(l[lr]+1<this.min(l[ot],l[xr],l[er],l[Or])){if(l[lr]<l[Ht])return lr;if(l[lr]===l[Ht]){for(var v=t+o+1;v<e.length;){var m=e.charCodeAt(v);if(this.isX12TermSep(m))return Ht;if(!this.isNativeX12(m))break;v++}return lr}}}}},r.min=function(e,t,n,i,o){var s=Math.min(e,Math.min(t,Math.min(n,i)));return o===void 0?s:Math.min(s,o)},r.findMinimums=function(e,t,n,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);n>s&&(n=s,$t.fill(i,0)),n===s&&(i[o]=i[o]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=Fe.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),g0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ky=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return dn.encode(e,this.charset)!=null}catch{return!1}},r})(),VN=(function(){function r(e,t,n){var i,o,s,l,c,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new ky(pN.forName(k))}),this.encoders=[];var p=[];p.push(new ky(gN.ISO_8859_1));for(var v=t!=null&&t.name.startsWith("UTF"),m=0;m<e.length;m++){var _=!1;try{for(var E=(i=void 0,g0(p)),I=E.next();!I.done;I=E.next()){var S=I.value,D=e.charAt(m),O=D.charCodeAt(0);if(O===n||S.canEncode(D)){_=!0;break}}}catch(k){i={error:k}}finally{try{I&&!I.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}if(!_)try{for(var V=(s=void 0,g0(this.ENCODERS)),z=V.next();!z.done;z=V.next()){var S=z.value;if(S.canEncode(e.charAt(m))){p.push(S),_=!0;break}}}catch(k){s={error:k}}finally{try{z&&!z.done&&(l=V.return)&&l.call(V)}finally{if(s)throw s.error}}_||(v=!0)}if(p.length===1&&!v)this.encoders=[p[0]];else{this.encoders=[];var G=0;try{for(var B=g0(p),R=B.next();!R.done;R=B.next()){var S=R.value;this.encoders[G++]=S}}catch(k){c={error:k}}finally{try{R&&!R.done&&(h=B.return)&&h.call(B)}finally{if(c)throw c.error}}}var N=-1;if(t!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&t.name===this.encoders[m].name){N=m;break}}this.priorityEncoderIndex=N}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return dn.encode(We.getCharAt(e),this.encoders[t].name)},r})(),BN=3,UN=(function(){function r(e,t,n){this.fnc1=n;var i=new VN(e,t,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Me,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,o,s){var l=e.charAt(i).charCodeAt(0),c=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(l===s||t.canEncode(l,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),h=c+1);for(var p=c;p<h;p++)(l===s||t.canEncode(l,p))&&this.addEdge(n,i+1,new My(l,t,p,o,s))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,o=new My[i+1][t.length()];this.addEdges(e,t,o,0,null,n);for(var s=1;s<=i;s++){for(var l=0;l<t.length();l++)o[s][l]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][l],n);for(var l=0;l<t.length();l++)o[s-1][l]=null}for(var c=-1,h=Fe.MAX_VALUE,l=0;l<t.length();l++)if(o[i][l]!=null){var p=o[i][l];p.cachedTotalSize<h&&(h=p.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var v=[],m=o[i][c];m!=null;){if(m.isFNC1())v.unshift(1e3);else for(var _=t.encode(m.c,m.encoderIndex),s=_.length-1;s>=0;s--)v.unshift(_[s]&255);var E=m.previous===null?0:m.previous.encoderIndex;E!==m.encoderIndex&&v.unshift(256+t.getECIValue(m.encoderIndex)),m=m.previous}for(var I=[],s=0;s<I.length;s++)I[s]=v[s];return I},r})(),My=(function(){function r(e,t,n,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,n).length,l=i===null?0:i.encoderIndex;l!==n&&(s+=BN),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),jN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var Ly;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(Ly||(Ly={}));(function(r){jN(e,r);function e(t,n,i,o,s){var l=r.call(this,t,n,i)||this;return l.shape=o,l.macroId=s,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(UN);var zN=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),Fy=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),HN=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),GN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),up=(function(r){GN(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Fe.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(HN),WN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$N=(function(r){WN(e,r);function e(t,n,i){var o=r.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(up);function qN(r,e,t){return new $N(r,e,t)}function Xu(r,e,t){return new up(r,e,t)}var XN=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ro=0,qf=1,fn=2,Mx=3,Yn=4,KN=new up(null,0,0),v0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],YN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function QN(r){var e,t;try{for(var n=YN(r),i=n.next();!i.done;i=n.next()){var o=i.value;$t.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[Ro][Yn]=0,r[qf][Yn]=0,r[qf][Ro]=28,r[Mx][Yn]=0,r[fn][Yn]=0,r[fn][Ro]=15,r}var Lx=QN($t.createInt32Array(6,6)),ZN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JN=(function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=v0[this.mode][e];i=Xu(i,o&65535,o>>16),n+=o>>16}var s=e===fn?4:5;return i=Xu(i,t,s),new r(i,e,0,n+s)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===fn?4:5;return n=Xu(n,Lx[this.mode][e],i),n=Xu(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Yn||this.mode===fn){var o=v0[n][Ro];t=Xu(t,o&65535,o>>16),i+=o>>16,n=Ro}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new r(t,n,this.binaryShiftByteCount+1,i+s);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=qN(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(v0[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new nr;try{for(var l=ZN(i),c=l.next();!c.done;c=l.next()){var h=c.value;h.appendTo(s,e)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s},r.prototype.toString=function(){return We.format("%s bits=%d bytes=%d",XN[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(KN,Ro,0,0),r})();function eP(r){var e=We.getCharCode(" "),t=We.getCharCode("."),n=We.getCharCode(",");r[Ro][e]=1;for(var i=We.getCharCode("Z"),o=We.getCharCode("A"),s=o;s<=i;s++)r[Ro][s]=s-o+2;r[qf][e]=1;for(var l=We.getCharCode("z"),c=We.getCharCode("a"),s=c;s<=l;s++)r[qf][s]=s-c+2;r[fn][e]=1;for(var h=We.getCharCode("9"),p=We.getCharCode("0"),s=p;s<=h;s++)r[fn][s]=s-p+2;r[fn][n]=12,r[fn][t]=13;for(var v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<v.length;m++)r[Mx][We.getCharCode(v[m])]=m;for(var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<_.length;m++)We.getCharCode(_[m])>0&&(r[Yn][We.getCharCode(_[m])]=m);return r}var m0=eP($t.createInt32Array(5,256)),ff=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tP=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=We.getCharCode(" "),t=We.getCharCode(`
`),n=Fy.singletonList(JN.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case We.getCharCode("\r"):o=s===t?2:0;break;case We.getCharCode("."):o=s===e?3:0;break;case We.getCharCode(","):o=s===e?4:0;break;case We.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(n=r.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var l=Fy.min(n,function(c,h){return c.getBitCount()-h.getBitCount()});return l.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,o=[];try{for(var s=ff(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForChar(c,t,o)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r.simplifyStates(o)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,o=m0[e.getMode()][i]>0,s=null,l=0;l<=Yn;l++){var c=m0[l][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||l===e.getMode()||l===fn){var h=s.latchAndAppend(l,c);n.push(h)}if(!o&&Lx[e.getMode()][l]>=0){var p=s.shiftAndAppend(l,c);n.push(p)}}}if(e.getBinaryShiftByteCount()>0||m0[e.getMode()][i]===0){var v=e.addBinaryShiftChar(t);n.push(v)}},r.updateStateListForPair=function(e,t,n){var i,o,s=[];try{for(var l=ff(e),c=l.next();!c.done;c=l.next()){var h=c.value;this.updateStateForPair(h,t,n,s)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(s)},r.updateStateForPair=function(e,t,n,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Yn,n)),e.getMode()!==Yn&&i.push(o.shiftAndAppend(Yn,n)),n===3||n===4){var s=o.latchAndAppend(fn,16-n).latchAndAppend(fn,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(l)}},r.simplifyStates=function(e){var t,n,i,o,s=[];try{for(var l=ff(e),c=l.next();!c.done;c=l.next()){var h=c.value,p=!0,v=function(S){if(S.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(S)&&(s=s.filter(function(D){return D!==S}))};try{for(var m=(i=void 0,ff(s)),_=m.next();!_.done;_=m.next()){var E=_.value,I=v(E);if(I==="break")break}}catch(S){i={error:S}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}p&&s.push(h)}}catch(S){t={error:S}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s},r})(),rP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new tP(e).encode(),o=Fe.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,l,c,h,p,v;if(n!==r.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new Ce(We.format("Illegal value %s for layers",n));h=r.totalBitsInLayer(c,l),p=r.WORD_SIZE[c];var m=h-h%p;if(v=r.stuffBits(i,p),v.getSize()+o>m)throw new Ce("Data to large for user specified layer");if(l&&v.getSize()>p*64)throw new Ce("Data to large for user specified layer")}else{p=0,v=null;for(var _=0;;_++){if(_>r.MAX_NB_BITS)throw new Ce("Data too large for an Aztec code");if(l=_<=3,c=l?_+1:_,h=r.totalBitsInLayer(c,l),!(s>h)){(v==null||p!==r.WORD_SIZE[c])&&(p=r.WORD_SIZE[c],v=r.stuffBits(i,p));var m=h-h%p;if(!(l&&v.getSize()>p*64)&&v.getSize()+o<=m)break}}}var E=r.generateCheckWords(v,h,p),I=v.getSize()/p,S=r.generateModeMessage(l,c,I),D=(l?11:14)+c*4,O=new Int32Array(D),V;if(l){V=D;for(var _=0;_<O.length;_++)O[_]=_}else{V=D+1+2*Fe.truncDivision(Fe.truncDivision(D,2)-1,15);for(var z=Fe.truncDivision(D,2),G=Fe.truncDivision(V,2),_=0;_<z;_++){var B=_+Fe.truncDivision(_,15);O[z-_-1]=G-B-1,O[z+_]=G+B+1}}for(var R=new ii(V),_=0,N=0;_<c;_++){for(var k=(c-_)*4+(l?9:12),F=0;F<k;F++)for(var U=F*2,H=0;H<2;H++)E.get(N+U+H)&&R.set(O[_*2+H],O[_*2+F]),E.get(N+k*2+U+H)&&R.set(O[_*2+F],O[D-1-_*2-H]),E.get(N+k*4+U+H)&&R.set(O[D-1-_*2-H],O[D-1-_*2-F]),E.get(N+k*6+U+H)&&R.set(O[D-1-_*2-F],O[_*2+H]);N+=k*8}if(r.drawModeMessage(R,l,V,S),l)r.drawBullsEye(R,Fe.truncDivision(V,2),5);else{r.drawBullsEye(R,Fe.truncDivision(V,2),7);for(var _=0,F=0;_<Fe.truncDivision(D,2)-1;_+=15,F+=16)for(var H=Fe.truncDivision(V,2)&1;H<V;H+=2)R.set(Fe.truncDivision(V,2)-F,H),R.set(Fe.truncDivision(V,2)+F,H),R.set(H,Fe.truncDivision(V,2)-F),R.set(H,Fe.truncDivision(V,2)+F)}var M=new zN;return M.setCompact(l),M.setSize(V),M.setLayers(c),M.setCodeWords(I),M.setMatrix(R),M},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new nr;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var o=Fe.truncDivision(n,2);if(t)for(var s=0;s<7;s++){var l=o-3+s;i.get(s)&&e.set(l,o-5),i.get(s+7)&&e.set(o+5,l),i.get(20-s)&&e.set(l,o+5),i.get(27-s)&&e.set(o-5,l)}else for(var s=0;s<10;s++){var l=o-5+s+Fe.truncDivision(s,5);i.get(s)&&e.set(l,o-7),i.get(s+10)&&e.set(o+7,l),i.get(29-s)&&e.set(l,o+7),i.get(39-s)&&e.set(o-7,l)}},r.generateCheckWords=function(e,t,n){var i,o,s=e.getSize()/n,l=new Dx(r.getGF(n)),c=Fe.truncDivision(t,n),h=r.bitsToWords(e,n,c);l.encode(h,c-s);var p=t%n,v=new nr;v.appendBits(0,p);try{for(var m=rP(Array.from(h)),_=m.next();!_.done;_=m.next()){var E=_.value;v.appendBits(E,n)}}catch(I){i={error:I}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}return v},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var l=0,c=0;c<t;c++)l|=e.get(o*t+c)?1<<t-c-1:0;i[o]=l}return i},r.getGF=function(e){switch(e){case 4:return jr.AZTEC_PARAM;case 6:return jr.AZTEC_DATA_6;case 8:return jr.AZTEC_DATA_8;case 10:return jr.AZTEC_DATA_10;case 12:return jr.AZTEC_DATA_12;default:throw new Ce("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new nr,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var l=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(l|=1<<t-1-c);(l&o)===o?(n.appendBits(l&o,t),s--):(l&o)===0?(n.appendBits(l|1,t),s--):n.appendBits(l,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var Cf={exports:{}},nP=Cf.exports,Vy;function iP(){return Vy||(Vy=1,(function(r,e){(function(n,i){r.exports=i(Xf())})(nP,function(t){return(function(n){var i={};function o(s){if(i[s])return i[s].exports;var l=i[s]={i:s,l:!1,exports:{}};return n[s].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=n,o.c=i,o.d=function(s,l,c){o.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:c})},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,l){if(l&1&&(s=o(s)),l&8||l&4&&typeof s=="object"&&s&&s.__esModule)return s;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:s}),l&2&&typeof s!="string")for(var h in s)o.d(c,h,function(p){return s[p]}.bind(null,h));return c},o.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(l,"a",l),l},o.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},o.p="",o(o.s="./src/react-webcam.tsx")})({"./src/react-webcam.tsx":(function(n,i,o){o.r(i);var s=o("react"),l=(function(){var m=function(_,E){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,S){I.__proto__=S}||function(I,S){for(var D in S)S.hasOwnProperty(D)&&(I[D]=S[D])},m(_,E)};return function(_,E){m(_,E);function I(){this.constructor=_}_.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}})(),c=function(){return c=Object.assign||function(m){for(var _,E=1,I=arguments.length;E<I;E++){_=arguments[E];for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(m[S]=_[S])}return m},c.apply(this,arguments)},h=function(m,_){var E={};for(var I in m)Object.prototype.hasOwnProperty.call(m,I)&&_.indexOf(I)<0&&(E[I]=m[I]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,I=Object.getOwnPropertySymbols(m);S<I.length;S++)_.indexOf(I[S])<0&&Object.prototype.propertyIsEnumerable.call(m,I[S])&&(E[I[S]]=m[I[S]]);return E};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(_){var E=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return E?new Promise(function(I,S){E.call(navigator,_,I,S)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function p(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var v=(function(m){l(_,m);function _(E){var I=m.call(this,E)||this;return I.canvas=null,I.ctx=null,I.requestUserMediaId=0,I.unmounted=!1,I.state={hasUserMedia:!1},I}return _.prototype.componentDidMount=function(){var E=this,I=E.state,S=E.props;if(this.unmounted=!1,!p()){S.onUserMediaError("getUserMedia not supported");return}I.hasUserMedia||this.requestUserMedia(),S.children&&typeof S.children!="function"&&console.warn("children must be a function")},_.prototype.componentDidUpdate=function(E){var I=this.props;if(!p()){I.onUserMediaError("getUserMedia not supported");return}var S=JSON.stringify(E.audioConstraints)!==JSON.stringify(I.audioConstraints),D=JSON.stringify(E.videoConstraints)!==JSON.stringify(I.videoConstraints),O=E.minScreenshotWidth!==I.minScreenshotWidth,V=E.minScreenshotHeight!==I.minScreenshotHeight;(D||O||V)&&(this.canvas=null,this.ctx=null),(S||D)&&(this.stopAndCleanup(),this.requestUserMedia())},_.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},_.stopMediaStream=function(E){E&&(E.getVideoTracks&&E.getAudioTracks?(E.getVideoTracks().map(function(I){E.removeTrack(I),I.stop()}),E.getAudioTracks().map(function(I){E.removeTrack(I),I.stop()})):E.stop())},_.prototype.stopAndCleanup=function(){var E=this.state;E.hasUserMedia&&(_.stopMediaStream(this.stream),E.src&&window.URL.revokeObjectURL(E.src))},_.prototype.getScreenshot=function(E){var I=this,S=I.state,D=I.props;if(!S.hasUserMedia)return null;var O=this.getCanvas(E);return O&&O.toDataURL(D.screenshotFormat,D.screenshotQuality)},_.prototype.getCanvas=function(E){var I=this,S=I.state,D=I.props;if(!this.video||!S.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var O=this.video.videoWidth,V=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var z=O/V;O=D.minScreenshotWidth||this.video.clientWidth,V=O/z,D.minScreenshotHeight&&V<D.minScreenshotHeight&&(V=D.minScreenshotHeight,O=V*z)}this.canvas=document.createElement("canvas"),this.canvas.width=E?.width||O,this.canvas.height=E?.height||V,this.ctx=this.canvas.getContext("2d")}var G=this,B=G.ctx,R=G.canvas;return B&&R&&(R.width=E?.width||R.width,R.height=E?.height||R.height,D.mirrored&&(B.translate(R.width,0),B.scale(-1,1)),B.imageSmoothingEnabled=D.imageSmoothing,B.drawImage(this.video,0,0,E?.width||R.width,E?.height||R.height),D.mirrored&&(B.scale(-1,1),B.translate(-R.width,0))),R},_.prototype.requestUserMedia=function(){var E=this,I=this.props,S=function(V,z){var G={video:typeof z<"u"?z:!0};I.audio&&(G.audio=typeof V<"u"?V:!0),E.requestUserMediaId++;var B=E.requestUserMediaId;navigator.mediaDevices.getUserMedia(G).then(function(R){E.unmounted||B!==E.requestUserMediaId?_.stopMediaStream(R):E.handleUserMedia(null,R)}).catch(function(R){E.handleUserMedia(R)})};if("mediaDevices"in navigator)S(I.audioConstraints,I.videoConstraints);else{var D=function(V){return{optional:[{sourceId:V}]}},O=function(V){var z=V.deviceId;return typeof z=="string"?z:Array.isArray(z)&&z.length>0?z[0]:typeof z=="object"&&z.ideal?z.ideal:null};MediaStreamTrack.getSources(function(V){var z=null,G=null;V.forEach(function(N){N.kind==="audio"?z=N.id:N.kind==="video"&&(G=N.id)});var B=O(I.audioConstraints);B&&(z=B);var R=O(I.videoConstraints);R&&(G=R),S(D(z),D(G))})}},_.prototype.handleUserMedia=function(E,I){var S=this.props;if(E||!I){this.setState({hasUserMedia:!1}),S.onUserMediaError(E);return}this.stream=I;try{this.video&&(this.video.srcObject=I),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(I)})}S.onUserMedia(I)},_.prototype.render=function(){var E=this,I=this,S=I.state,D=I.props,O=D.audio;D.forceScreenshotSourceSize;var V=D.disablePictureInPicture;D.onUserMedia,D.onUserMediaError,D.screenshotFormat,D.screenshotQuality,D.minScreenshotWidth,D.minScreenshotHeight,D.audioConstraints,D.videoConstraints,D.imageSmoothing;var z=D.mirrored,G=D.style,B=G===void 0?{}:G,R=D.children,N=h(D,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),k=z?c(c({},B),{transform:(B.transform||"")+" scaleX(-1)"}):B,F={getScreenshot:this.getScreenshot.bind(this)};return s.createElement(s.Fragment,null,s.createElement("video",c({autoPlay:!0,disablePictureInPicture:V,src:S.src,muted:!O,playsInline:!0,ref:function(U){E.video=U},style:k},N)),R&&R(F))},_.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},_})(s.Component);i.default=v}),react:(function(n,i){n.exports=t})}).default})})(Cf)),Cf.exports}var oP=iP();const aP=Ww(oP),sP=({onUpdate:r,onError:e,width:t="100%",height:n="100%",facingMode:i="environment",torch:o,delay:s=500,videoConstraints:l,stopStream:c,formats:h})=>{const p=_e.useRef(null),v=_e.useCallback(()=>{const m=new iN(new Map([[xt.POSSIBLE_FORMATS,h?.map(E=>typeof E=="string"?Ee[E]:E)]])),_=p?.current?.getScreenshot();_&&m.decodeFromImage(void 0,_).then(E=>{r(null,E)}).catch(E=>{r(E)})},[r,h]);return _e.useEffect(()=>{if(typeof o=="boolean"&&(navigator?.mediaDevices?.getSupportedConstraints()).torch){const _=p?.current?.video?.srcObject?.getVideoTracks()[0];_&&_.getCapabilities().torch&&_.applyConstraints({advanced:[{torch:o}]}).catch(E=>r(E))}},[o,r]),_e.useEffect(()=>{if(c){let m=p?.current?.video?.srcObject;m&&(m.getTracks().forEach(_=>{m?.removeTrack(_),_.stop()}),m=null)}},[c]),_e.useEffect(()=>{const m=setInterval(v,s);return()=>{clearInterval(m)}},[v,s]),T.jsx(aP,{width:t,height:n,ref:p,screenshotFormat:"image/jpeg",videoConstraints:l||{facingMode:i},audio:!1,onUserMediaError:e,"data-testid":"video"})};var By;(function(r){r.AZTEC="AZTEC",r.CODABAR="CODABAR",r.CODE_39="CODE_39",r.CODE_93="CODE_93",r.CODE_128="CODE_128",r.DATA_MATRIX="DATA_MATRIX",r.EAN_8="EAN_8",r.EAN_13="EAN_13",r.ITF="ITF",r.MAXICODE="MAXICODE",r.PDF_417="PDF_417",r.QR_CODE="QR_CODE",r.RSS_14="RSS_14",r.RSS_EXPANDED="RSS_EXPANDED",r.UPC_A="UPC_A",r.UPC_E="UPC_E",r.UPC_EAN_EXTENSION="UPC_EAN_EXTENSION"})(By||(By={}));function uP({onClose:r,onResult:e}){const[t,n]=_e.useState(""),[i,o]=_e.useState(!1),[s,l]=_e.useState(""),c=async p=>{o(!0),l("");try{const v=await fetch(`https://world.openfoodfacts.org/api/v0/product/${p}.json`);if(!v.ok){l(`API request failed with status ${v.status}`);return}const m=await v.json();if(console.log("OpenFoodFacts response:",m),!m.product){l("Product not found");return}const _=m.product,E=_.categories_tags?.length>0?_.categories_tags[0].replace(/^en:/,""):"Other";let I="pcs";if(_.quantity){const S=_.quantity.toLowerCase();S.includes("ml")||S.includes("l")?I="ml":(S.includes("g")||S.includes("kg")||S.includes("oz")||S.includes("lb"))&&(I="g")}e({barcode:p,name:_.product_name||"Unknown Product",category:E,unit:I})}catch(v){console.error("Barcode fetch error:",v),l("Failed to fetch product info")}finally{o(!1)}},h=p=>{p.preventDefault(),t&&c(t)};return T.jsx("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center",children:T.jsx("div",{className:"w-full max-w-md mx-4",children:T.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden",children:[T.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[T.jsx("h2",{className:"text-gray-900 dark:text-white",children:"Scan Barcode"}),T.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:T.jsx($y,{className:"w-5 h-5 text-gray-500"})})]}),T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"relative aspect-square bg-gray-900 rounded-lg mb-4 overflow-hidden",children:[T.jsx(sP,{width:"100%",height:"100%",onUpdate:(p,v)=>{if(!v||i)return;const m=v.text;m&&c(m)}}),T.jsx("div",{className:"absolute inset-8 border-2 border-blue-500 rounded-lg pointer-events-none"})]}),i&&T.jsxs("div",{className:"text-center text-white mb-2",children:[T.jsx(Wy,{className:"w-8 h-8 mx-auto animate-pulse text-[#007057]"}),"Scanning..."]}),s&&T.jsx("p",{className:"text-red-500 text-sm text-center mb-3",children:s}),T.jsxs("div",{className:"relative my-6",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),T.jsx("div",{className:"relative flex justify-center",children:T.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-sm text-gray-500",children:"or enter manually"})})]}),T.jsxs("form",{onSubmit:h,className:"space-y-3",children:[T.jsx("input",{type:"text",placeholder:"Enter barcode number",value:t,onChange:p=>n(p.target.value),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border rounded-lg"}),T.jsx("button",{type:"submit",className:"w-full py-2 bg-gray-200 dark:bg-gray-700 rounded-lg",children:"Submit"})]})]})]})})})}const Uy=[{name:"Milk",category:"Dairy",unit:"L",defaultQty:1},{name:"Eggs",category:"Dairy",unit:"pcs",defaultQty:12},{name:"Bread",category:"Bakery",unit:"loaf",defaultQty:1},{name:"Chicken Breast",category:"Meat",unit:"g",defaultQty:500},{name:"Tomatoes",category:"Vegetables",unit:"pcs",defaultQty:4},{name:"Lettuce",category:"Vegetables",unit:"head",defaultQty:1},{name:"Cheese",category:"Dairy",unit:"g",defaultQty:250},{name:"Yogurt",category:"Dairy",unit:"g",defaultQty:500},{name:"Orange Juice",category:"Beverages",unit:"L",defaultQty:1},{name:"Apples",category:"Fruits",unit:"pcs",defaultQty:6}];function lP({onClose:r,onItemAdded:e}){const{user:t}=Ml(),[n,i]=_e.useState("suggestions"),[o,s]=_e.useState(!1),[l,c]=_e.useState(""),[h,p]=_e.useState(!1),[v,m]=_e.useState(""),[_,E]=_e.useState({name:"",category:"Dairy",quantity:1,unit:"pcs",expiryDate:""}),I=["Dairy","Meat","Vegetables","Fruits","Bakery","Beverages","Other"],S=["pcs","g","kg","L","ml","oz","lb"],D=async G=>{if(G.preventDefault(),!(!_.name||!_.expiryDate||!t)){p(!0),m("");try{const B=await Ex({item_code:`${_.category.toUpperCase()}_${Date.now()}`,item_name:_.name,item_category:_.category,item_default_shelf_life:7});console.log("Created item:",B),await wx(t.uid,{item_id:B,user_items_name:_.name,user_items_quantity:_.quantity,user_items_unit:_.unit,user_items_expiry_date:new Date(_.expiryDate)}),e(),r()}catch(B){console.error("Error adding item:",B),m(B instanceof Error?B.message:"Failed to add item")}finally{p(!1)}}},O=G=>{const B=new Date;B.setDate(B.getDate()+7),E({name:G.name,category:G.category,quantity:G.defaultQty,unit:G.unit,expiryDate:B.toISOString().split("T")[0]}),i("manual")},V=G=>{const B=new Date;B.setDate(B.getDate()+7),E({name:G.name,category:G.category,quantity:1,unit:G.unit,expiryDate:B.toISOString().split("T")[0]}),s(!1),i("manual")},z=Uy.filter(G=>G.name.toLowerCase().includes(l.toLowerCase()));return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center",children:T.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full sm:max-w-lg sm:rounded-lg rounded-t-2xl max-h-[90vh] overflow-y-auto",children:[T.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between",children:[T.jsx("h2",{className:"text-gray-900 dark:text-white",children:"Add Item"}),T.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:h,children:T.jsx($y,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),T.jsxs("div",{className:"p-4",children:[n==="suggestions"&&T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("button",{onClick:()=>s(!0),className:"p-4 bg-[#007057]/10 dark:bg-[#007057]/20 border-2 border-[#007057]/30 dark:border-[#007057]/40 rounded-lg hover:bg-[#007057]/20 dark:hover:bg-[#007057]/30 transition-colors",children:[T.jsx(Wy,{className:"w-8 h-8 text-[#007057] mx-auto mb-2"}),T.jsx("p",{className:"text-sm text-[#007057]",children:"Scan Barcode"})]}),T.jsxs("button",{onClick:()=>i("search"),className:"p-4 bg-green-50 dark:bg-green-900/20 border-2 border-green-200 dark:border-green-800 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",children:[T.jsx(_0,{className:"w-8 h-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),T.jsx("p",{className:"text-sm text-green-900 dark:text-green-100",children:"Search Items"})]})]}),T.jsx("button",{onClick:()=>i("manual"),className:"w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Enter Manually"}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx(BE,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsx("h3",{className:"text-gray-900 dark:text-white",children:"Popular Items"})]}),T.jsx("div",{className:"grid grid-cols-2 gap-2",children:Uy.slice(0,6).map((G,B)=>T.jsxs("button",{onClick:()=>O(G),className:"p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-left",children:[T.jsx("p",{className:"text-gray-900 dark:text-white",children:G.name}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:G.category})]},B))})]})]}),n==="search"&&T.jsxs("div",{className:"space-y-4",children:[T.jsx("button",{onClick:()=>i("suggestions"),className:"text-blue-600 dark:text-blue-400 text-sm",children:" Back"}),T.jsxs("div",{className:"relative",children:[T.jsx(_0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"text",placeholder:"Search for items...",value:l,onChange:G=>c(G.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",autoFocus:!0})]}),T.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[z.map((G,B)=>T.jsxs("button",{onClick:()=>O(G),className:"w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-left",children:[T.jsx("p",{className:"text-gray-900 dark:text-white",children:G.name}),T.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[G.category,"  ",G.defaultQty," ",G.unit]})]},B)),z.length===0&&T.jsx("p",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No items found"})]})]}),n==="manual"&&T.jsxs("form",{onSubmit:D,className:"space-y-4",children:[T.jsx("button",{type:"button",onClick:()=>i("suggestions"),className:"text-blue-600 dark:text-blue-400 text-sm",disabled:h,children:" Back"}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Item Name"}),T.jsx("input",{type:"text",value:_.name,onChange:G=>E({..._,name:G.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",required:!0,disabled:h})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),T.jsx("select",{value:_.category,onChange:G=>E({..._,category:G.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",disabled:h,children:I.map(G=>T.jsx("option",{value:G,children:G},G))})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Quantity"}),T.jsx("input",{type:"number",value:_.quantity,onChange:G=>E({..._,quantity:Number(G.target.value)}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",min:"0.1",step:"0.1",required:!0,disabled:h})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Unit"}),T.jsx("select",{value:_.unit,onChange:G=>E({..._,unit:G.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",disabled:h,children:S.map(G=>T.jsx("option",{value:G,children:G},G))})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Expiry Date"}),T.jsx("input",{type:"date",value:_.expiryDate,onChange:G=>E({..._,expiryDate:G.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",required:!0,disabled:h})]}),v&&T.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:T.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:v})}),T.jsx("button",{type:"submit",className:"w-full py-3 bg-[#007057] hover:bg-[#005a45] disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center justify-center gap-2",disabled:h,children:h?T.jsxs(T.Fragment,{children:[T.jsx(Tf,{className:"w-5 h-5 animate-spin"}),"Adding..."]}):"Add to Fridge"})]})]})]})}),o&&T.jsx(uP,{onClose:()=>s(!1),onResult:V})]})}function cP(){const{user:r}=Ml(),[e,t]=_e.useState(""),[n,i]=_e.useState(!1),[o,s]=_e.useState("All"),[l,c]=_e.useState([]),[h,p]=_e.useState(!0);_e.useEffect(()=>{r&&v()},[r]);const v=async()=>{try{p(!0);const O=await g8(r.uid);c(O)}catch(O){console.error("Error loading items:",O)}finally{p(!1)}},m=async O=>{try{await v8(O),c(l.filter(V=>V.user_items_id!==O))}catch(V){console.error("Error removing item:",V)}},_=async()=>{try{await J1()}catch(O){console.error("Error logging out:",O)}},E=["All",...Array.from(new Set(l.map(O=>"General")))],I=O=>{const V=new Date,z=O.getTime()-V.getTime();return Math.ceil(z/(1e3*60*60*24))},S=l.filter(O=>o==="All"),D=l.filter(O=>O.user_items_status==="expiring_soon");return h?T.jsx("div",{className:"max-w-2xl mx-auto p-4 flex items-center justify-center min-h-screen",children:T.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading your fridge..."})}):T.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[T.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"My Fridge"}),T.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l.length," items stored"]})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsxs("div",{className:"text-right",children:[T.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r?.displayName||"User"}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r?.email})]}),T.jsx("button",{onClick:_,className:"p-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:T.jsx(u1,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]}),D.length>0&&T.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx(cE,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),T.jsxs("div",{children:[T.jsxs("p",{className:"text-red-900 dark:text-red-100 font-medium",children:[D.length," item",D.length>1?"s":""," expiring soon"]}),T.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Check your fridge and use them before they expire!"})]})]})}),T.jsxs("div",{className:"relative mb-4",children:[T.jsx(_0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"text",placeholder:"Search ingredients...",value:e,onChange:O=>t(O.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4 scrollbar-hide",children:E.map(O=>T.jsx("button",{onClick:()=>s(O),className:`px-4 py-2 rounded-full whitespace-nowrap transition-colors ${o===O?"bg-[#007057] text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:O},O))}),T.jsxs("button",{onClick:()=>i(!0),className:"w-full mb-4 py-3 bg-[#007057] hover:bg-[#005a45] text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[T.jsx(Gy,{className:"w-5 h-5"}),"Add Item"]}),T.jsxs("div",{className:"space-y-3",children:[S.map(O=>{const V=I(O.user_items_expiry_date),z=O.user_items_status;return T.jsx("div",{className:`p-4 rounded-lg border ${z==="expired"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600":z==="expiring_soon"?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:["Item : ",O.user_items_name]}),z==="expiring_soon"&&T.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),T.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[O.user_items_quantity," ",O.user_items_unit]}),T.jsx("div",{className:"flex items-center gap-2",children:T.jsx("span",{className:`text-xs px-2 py-1 rounded ${z==="expired"?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":z==="expiring_soon"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}`,children:z==="expired"?"Expired":V===0?"Expires today":V===1?"Expires tomorrow":`${V} days left`})})]}),T.jsx("button",{onClick:()=>m(O.user_items_id),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:T.jsx(s1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})},O.user_items_id)}),S.length===0&&T.jsxs("div",{className:"text-center py-12",children:[T.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No items in your fridge yet"}),T.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:'Click "Add Item" to get started'})]})]}),n&&T.jsx(lP,{onClose:()=>i(!1),onItemAdded:v})]})}const fP=[{name:"Milk",category:"Dairy",quantity:1,unit:"L"},{name:"Eggs",category:"Dairy",quantity:12,unit:"pcs"},{name:"Bread",category:"Bakery",quantity:1,unit:"loaf"},{name:"Bananas",category:"Fruits",quantity:6,unit:"pcs"},{name:"Rice",category:"Grains",quantity:1,unit:"kg"}];function hP(){const{user:r}=Ml(),[e,t]=_e.useState([]),[n,i]=_e.useState(!0),[o,s]=_e.useState(!1),[l,c]=_e.useState(!1),[h,p]=_e.useState({name:"",category:"Dairy",quantity:1,unit:"pcs"}),v=["Dairy","Meat","Vegetables","Fruits","Bakery","Beverages","Grains","Other"],m=["pcs","g","kg","L","ml","oz","lb","loaf"],_=e.filter(B=>B.completed).length;_e.useEffect(()=>{r&&E()},[r]);const E=async()=>{try{i(!0);const B=cl(So(Ar,"grocery_items"),fl("user_id","==",r.uid)),N=(await hl(B)).docs.map(k=>({id:k.id,user_id:k.data().user_id,name:k.data().name,category:k.data().category,quantity:k.data().quantity,unit:k.data().unit,completed:k.data().completed||!1,created_at:k.data().created_at?.toDate()||new Date}));t(N)}catch(B){console.error("Error loading items:",B)}finally{i(!1)}},I=async B=>{if(r)try{await Z1(So(Ar,"grocery_items"),{user_id:r.uid,name:B.name,category:B.category,quantity:B.quantity,unit:B.unit,completed:!1,created_at:Bs()}),await E()}catch(R){console.error("Error adding item:",R)}},S=async B=>{try{await Ps(Si(Ar,"grocery_items",B)),t(e.filter(R=>R.id!==B))}catch(R){console.error("Error removing item:",R)}},D=async B=>{try{const R=e.find(N=>N.id===B);if(!R)return;await s8(Si(Ar,"grocery_items",B),{completed:!R.completed}),t(e.map(N=>N.id===B?{...N,completed:!N.completed}:N))}catch(R){console.error("Error toggling item:",R)}},O=async()=>{if(r)try{i(!0);const B=e.filter(R=>R.completed);for(const R of B)try{const N=await Ex({item_code:`${R.category.toUpperCase()}_${Date.now()}`,item_name:R.name,item_category:R.category,item_default_shelf_life:V(R.category)}),k=new Date;k.setDate(k.getDate()+V(R.category)),await wx(r.uid,{item_id:N,user_items_name:R.name,user_items_quantity:R.quantity,user_items_unit:R.unit,user_items_expiry_date:k}),console.log(`Added ${R.name} to fridge`)}catch(N){console.error(`Error adding ${R.name} to fridge:`,N)}await Promise.all(B.map(R=>Ps(Si(Ar,"grocery_items",R.id)))),await E(),alert(` ${B.length} item(s) added to fridge!`)}catch(B){console.error("Error completing purchase:",B),alert("Failed to complete purchase. Please try again.")}finally{i(!1)}},V=B=>({Dairy:7,Meat:3,Vegetables:5,Fruits:7,Bakery:5,Beverages:30,Grains:180,Other:7})[B]||7,z=async B=>{B.preventDefault(),h.name&&(await I(h),p({name:"",category:"Dairy",quantity:1,unit:"pcs"}),s(!1))},G=async B=>{await I(B)};return n?T.jsx("div",{className:"max-w-2xl mx-auto p-4 flex items-center justify-center min-h-screen",children:T.jsx(Tf,{className:"w-8 h-8 animate-spin text-gray-600 dark:text-gray-400"})}):T.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[T.jsxs("div",{className:"mb-6",children:[T.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Grocery List"}),T.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[_," of ",e.length," items completed"]})]}),T.jsx("button",{onClick:()=>c(!l),className:"w-full mb-4 p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-700 rounded-lg hover:from-purple-100 hover:to-blue-100 dark:hover:from-purple-900/30 dark:hover:to-blue-900/30 transition-colors",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(kE,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),T.jsx("span",{className:"text-purple-900 dark:text-purple-100 font-medium",children:"AI Recommended Items"})]}),T.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:l?"Hide":"Show"})]})}),l&&T.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[T.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Based on your fridge contents and shopping patterns"}),T.jsx("div",{className:"space-y-2",children:fP.map((B,R)=>T.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:B.name}),T.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[B.quantity," ",B.unit]})]}),T.jsx("button",{onClick:()=>G(B),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Add"})]},R))})]}),!o&&T.jsxs("button",{onClick:()=>s(!0),className:"w-full mb-4 py-3 bg-[#007057] hover:bg-[#005a45] text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[T.jsx(Gy,{className:"w-5 h-5"}),"Add Item"]}),o&&T.jsxs("form",{onSubmit:z,className:"mb-4 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg space-y-3",children:[T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsx("input",{type:"text",placeholder:"Item name",value:h.name,onChange:B=>p({...h,name:B.target.value}),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm",required:!0}),T.jsx("select",{value:h.category,onChange:B=>p({...h,category:B.target.value}),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm",children:v.map(B=>T.jsx("option",{value:B,children:B},B))})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsx("input",{type:"number",placeholder:"Quantity",value:h.quantity,onChange:B=>p({...h,quantity:Number(B.target.value)}),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm",min:"0.1",step:"0.1",required:!0}),T.jsx("select",{value:h.unit,onChange:B=>p({...h,unit:B.target.value}),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm",children:m.map(B=>T.jsx("option",{value:B,children:B},B))})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{type:"submit",className:"flex-1 py-2 bg-[#007057] hover:bg-[#005a45] text-white rounded-lg transition-colors text-sm",children:"Add"}),T.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors text-sm",children:"Cancel"})]})]}),T.jsxs("div",{className:"space-y-3 mb-4",children:[e.map(B=>T.jsx("div",{className:`p-4 rounded-lg border transition-all ${B.completed?"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-60":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:()=>D(B.id),className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${B.completed?"bg-[#007057] border-[#007057]":"border-gray-300 dark:border-gray-600 hover:border-[#007057]"}`,children:B.completed&&T.jsx(sE,{className:"w-4 h-4 text-white"})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${B.completed?"line-through":""}`,children:B.name}),T.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[B.quantity," ",B.unit,"  ",B.category]})]}),T.jsx("button",{onClick:()=>S(B.id),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:T.jsx(s1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})},B.id)),e.length===0&&T.jsxs("div",{className:"text-center py-12",children:[T.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No items in your grocery list"}),T.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:'Click "Add Item" to start building your list'})]})]}),_>0&&T.jsxs("button",{onClick:O,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",children:["Complete Purchase (",_," items)"]})]})}const Fx=_e.createContext(void 0);function dP({children:r}){const[e,t]=_e.useState(()=>localStorage.getItem("theme")||"light");_e.useEffect(()=>{localStorage.setItem("theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const n=()=>{t(i=>i==="light"?"dark":"light")};return T.jsx(Fx.Provider,{value:{theme:e,toggleTheme:n},children:r})}function pP(){const r=_e.useContext(Fx);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}function gP(){const{theme:r,toggleTheme:e}=pP(),{user:t}=Ml(),[n,i]=_e.useState(!1),[o,s]=_e.useState(!1),l=async()=>{try{i(!0),await J1()}catch(h){console.error("Error signing out:",h)}finally{i(!1)}},c=async()=>{if(t)try{i(!0);const h=cl(So(Ar,"user_items"),fl("user_id","==",t.uid)),p=await hl(h);await Promise.all(p.docs.map(I=>Ps(Si(Ar,"user_items",I.id))));const v=cl(So(Ar,"grocery_items"),fl("user_id","==",t.uid)),m=await hl(v);await Promise.all(m.docs.map(I=>Ps(Si(Ar,"grocery_items",I.id))));const _=cl(So(Ar,"recipes"),fl("user_id","==",t.uid)),E=await hl(_);await Promise.all(E.docs.map(I=>Ps(Si(Ar,"recipes",I.id)))),alert("All data cleared successfully!"),s(!1)}catch(h){console.error("Error clearing data:",h),alert("Failed to clear data. Please try again.")}finally{i(!1)}};return T.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[T.jsxs("div",{className:"mb-6",children:[T.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your preferences"})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[T.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:T.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Account"})}),T.jsxs("div",{className:"p-4 space-y-1",children:[T.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[T.jsx(u1,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t?.displayName||"User"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?.email})]})]}),T.jsxs("button",{onClick:l,disabled:n,className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[n?T.jsx(Tf,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 animate-spin"}):T.jsx(xE,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Sign Out"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Log out of your account"})]})]})]})]}),T.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[T.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:T.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Appearance"})}),T.jsx("div",{className:"p-4",children:T.jsxs("button",{onClick:e,className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[r==="light"?T.jsx(LE,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):T.jsx(AE,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"text-left",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r==="dark"?"On":"Off"})]})]}),T.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${r==="dark"?"bg-[#007057]":"bg-gray-300"}`,children:T.jsx("div",{className:`w-5 h-5 bg-white rounded-full mt-0.5 transition-transform ${r==="dark"?"translate-x-6":"translate-x-0.5"}`})})]})})]}),T.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[T.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:T.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Notifications"})}),T.jsxs("div",{className:"p-4 space-y-1",children:[T.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg opacity-50",children:[T.jsx(Tv,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Expiry Reminders"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Coming soon"})]})]}),T.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg opacity-50",children:[T.jsx(Tv,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Recipe Suggestions"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Coming soon"})]})]})]})]}),T.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[T.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:T.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Data Management"})}),T.jsx("div",{className:"p-4 space-y-1",children:T.jsxs("button",{onClick:()=>s(!0),disabled:n,className:"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[T.jsx(s1,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-red-900 dark:text-red-100",children:"Clear All Data"}),T.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Remove all items from fridge and lists"})]})]})})]}),T.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[T.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:T.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"About"})}),T.jsxs("div",{className:"p-4 space-y-1",children:[T.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[T.jsx(hE,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Help & Support"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get help using the app"})]})]}),T.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[T.jsx(vE,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"App Version"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"1.0.0 - Firebase Edition"})]})]})]})]})]}),o&&T.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[T.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Clear All Data?"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This will permanently delete all your fridge items, grocery lists, and recipes. This action cannot be undone."}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>s(!1),disabled:n,className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),T.jsx("button",{onClick:c,disabled:n,className:"flex-1 py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:n?T.jsxs(T.Fragment,{children:[T.jsx(Tf,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})}const vP="modulepreload",mP=function(r){return"/"+r},jy={},Vx=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let s=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=s(t.map(h=>{if(h=mP(h),h in jy)return;jy[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":vP,p||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),p)return new Promise((_,E)=>{m.addEventListener("load",_),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};function yP({onSwitchToSignUp:r}){const[e,t]=_e.useState(""),[n,i]=_e.useState(""),[o,s]=_e.useState(!1),[l,c]=_e.useState(""),[h,p]=_e.useState(!1),v=async m=>{m.preventDefault(),c(""),p(!0);try{const{signIn:_}=await Vx(async()=>{const{signIn:E}=await Promise.resolve().then(()=>_x);return{signIn:E}},void 0);await _(e,n),o?localStorage.setItem("rememberedEmail",e):localStorage.removeItem("rememberedEmail"),console.log("Login successful! Redirecting...")}catch(_){c(_ instanceof Error?_.message:"Failed to sign in")}finally{p(!1)}};return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#007057] to-[#005a45] flex items-center justify-center p-4",children:T.jsxs("div",{className:"w-full max-w-md",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:T.jsx(Sf,{className:"w-8 h-8 text-[#007057]"})}),T.jsx("h1",{className:"text-white text-3xl mb-2",children:"FridgeTrack"}),T.jsx("p",{className:"text-white/80",children:"Track ingredients, reduce waste"})]}),T.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[T.jsx("h2",{className:"text-2xl text-gray-900 mb-6",children:"Welcome Back"}),T.jsxs("form",{onSubmit:v,className:"space-y-4",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),T.jsxs("div",{className:"relative",children:[T.jsx(Hy,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"email",placeholder:"your@email.com",value:e,onChange:m=>t(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(y0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"password",placeholder:"",value:n,onChange:m=>i(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("input",{type:"checkbox",id:"rememberMe",checked:o,onChange:m=>s(m.target.checked),className:"h-4 w-4 text-[#007057] border-gray-300 rounded"}),T.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-700",children:"Remember Me"})]}),l&&T.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:T.jsx("p",{className:"text-red-600 text-sm",children:l})}),T.jsx("button",{type:"submit",className:"w-full bg-[#007057] hover:bg-[#005a45] text-white py-2 px-4 rounded-lg font-medium transition-colors",disabled:h,children:h?"Signing in...":"Sign In"})]}),T.jsx("div",{className:"mt-6 text-center",children:T.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",T.jsx("button",{onClick:r,className:"text-[#007057] hover:underline font-medium",children:"Sign Up"})]})})]})]})})}function _P({onSwitchToLogin:r}){const[e,t]=_e.useState(""),[n,i]=_e.useState(""),[o,s]=_e.useState(""),[l,c]=_e.useState(""),[h,p]=_e.useState(""),[v,m]=_e.useState(""),[_,E]=_e.useState(!1),I=async S=>{if(S.preventDefault(),m(""),l!==h){m("Passwords do not match");return}if(l.length<6){m("Password must be at least 6 characters");return}E(!0);try{const{signUp:D}=await Vx(async()=>{const{signUp:O}=await Promise.resolve().then(()=>_x);return{signUp:O}},void 0);await D({user_name:e,user_email:n,user_password:l}),console.log("Sign up successful! Redirecting...")}catch(D){m(D instanceof Error?D.message:"Failed to sign up")}finally{E(!1)}};return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#007057] to-[#005a45] flex items-center justify-center p-4",children:T.jsxs("div",{className:"w-full max-w-md",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:T.jsx(Sf,{className:"w-8 h-8 text-[#007057]"})}),T.jsx("h1",{className:"text-white text-3xl mb-2",children:"FridgeTrack"}),T.jsx("p",{className:"text-white/80",children:"Track ingredients, reduce waste"})]}),T.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[T.jsx("h2",{className:"text-2xl text-gray-900 mb-6",children:"Create Account"}),T.jsxs("form",{onSubmit:I,className:"space-y-4",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Full Name"}),T.jsxs("div",{className:"relative",children:[T.jsx(u1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"text",placeholder:"John Doe",value:e,onChange:S=>t(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),T.jsxs("div",{className:"relative",children:[T.jsx(Hy,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"email",placeholder:"your@email.com",value:n,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Phone Number"}),T.jsxs("div",{className:"relative",children:[T.jsx(CE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"tel",placeholder:"+60123456789",value:o,onChange:S=>s(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(y0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"password",placeholder:"",value:l,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Confirm Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(y0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"password",placeholder:"",value:h,onChange:S=>p(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#007057] focus:border-transparent",required:!0})]})]}),v&&T.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:T.jsx("p",{className:"text-red-600 text-sm",children:v})}),T.jsx("button",{type:"submit",className:"w-full bg-[#007057] hover:bg-[#005a45] text-white py-2 px-4 rounded-lg font-medium transition-colors",disabled:_,children:_?"Creating account...":"Sign Up"})]}),T.jsx("div",{className:"mt-6 text-center",children:T.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",T.jsx("button",{onClick:r,className:"text-[#007057] hover:underline font-medium",children:"Sign In"})]})})]})]})})}function xP(){const{user:r,isLoading:e}=Ml(),[t,n]=_e.useState("login");return e?T.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:T.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})}):r?T.jsx(wP,{}):t==="login"?T.jsx(yP,{onSwitchToSignUp:()=>n("signup")}):T.jsx(_P,{onSwitchToLogin:()=>n("login")})}function wP(){const[r,e]=_e.useState("fridge"),t=()=>{switch(r){case"fridge":return T.jsx(cP,{});case"grocery":return T.jsx(hP,{});case"recipes":return T.jsx("div",{className:"max-w-2xl mx-auto p-4 min-h-screen flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx(Sf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),T.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Recipes"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Coming soon! Find recipes based on your fridge items."})]})});case"settings":return T.jsx(gP,{});default:return null}};return T.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:[t(),T.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 safe-area-bottom",children:T.jsxs("div",{className:"grid grid-cols-4 h-16",children:[T.jsxs("button",{onClick:()=>e("fridge"),className:`flex flex-col items-center justify-center gap-1 transition-colors ${r==="fridge"?"text-[#007057]":"text-gray-500 dark:text-gray-400"}`,children:[T.jsx(pE,{className:"w-6 h-6"}),T.jsx("span",{className:"text-xs",children:"Fridge"})]}),T.jsxs("button",{onClick:()=>e("grocery"),className:`flex flex-col items-center justify-center gap-1 transition-colors ${r==="grocery"?"text-[#007057]":"text-gray-500 dark:text-gray-400"}`,children:[T.jsx(bE,{className:"w-6 h-6"}),T.jsx("span",{className:"text-xs",children:"Grocery"})]}),T.jsxs("button",{onClick:()=>e("recipes"),className:`flex flex-col items-center justify-center gap-1 transition-colors ${r==="recipes"?"text-[#007057]":"text-gray-500 dark:text-gray-400"}`,children:[T.jsx(Sf,{className:"w-6 h-6"}),T.jsx("span",{className:"text-xs",children:"Recipes"})]}),T.jsxs("button",{onClick:()=>e("settings"),className:`flex flex-col items-center justify-center gap-1 transition-colors ${r==="settings"?"text-[#007057]":"text-gray-500 dark:text-gray-400"}`,children:[T.jsx(PE,{className:"w-6 h-6"}),T.jsx("span",{className:"text-xs",children:"Settings"})]})]})})]})}function EP(){return T.jsx(dP,{children:T.jsx(d8,{children:T.jsx(xP,{})})})}eE.createRoot(document.getElementById("root")).render(T.jsx(EP,{}));
